(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["bundle.Ocf","icons/IconArrowDown-js","icons/IconMinus-js"],{49364:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s(2784),a=s(25686),i=s(65526);const o={threshold:.01},r=e=>{const{children:t,onImpression:s,style:r}=e,l=n.useRef(null),c=e=>{e.forEach((e=>{e.isIntersecting&&s()}))};return(0,i.q)((()=>{if("IntersectionObserver"in window){const e=new IntersectionObserver(c,o),t=l.current;null!=t&&e.observe(t);const s=()=>{const t=l.current;null!=t&&e.unobserve(t),e.disconnect()};return s}})),n.createElement(a.Z,{ref:l,style:r},t)}},67026:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s(2784),a=s(44542),i=s(73228);const o=s.n(i)().b2311b70;function r(){return n.createElement(a.Z,{onRetry:null,title:o})}const l=n.memo(r)},95779:(e,t,s)=>{"use strict";s.d(t,{W:()=>a,g:()=>n});s(71372);const n=Object.freeze({AppealTweetWarning:"appealtweet",LimitedDiscoveryAppealTweet:"limiteddiscoveryappealtweet",ProfileOnlyDiscoveryAppealTweet:"profileonlydiscoveryappealtweet",DMConversation:"reportdmconversation",DMMessage:"reportdmconversation",HideCommunityTweet:"hidetweet",Moment:"reportmoment",RemoveCommunityMember:"removecommunitymember",Tweet:"reporttweet",List:"reportlist",User:"reportprofile",Space:"reportspace",AppealSuspension:"appealsuspension"});function a(e){switch(e){case"appealtweet":case"limiteddiscoveryappealtweet":case"profileonlydiscoveryappealtweet":case"reportdmconversation":case"hidetweet":case"reportmoment":case"removecommunitymember":case"reporttweet":case"reportlist":case"reportprofile":case"reportspace":case"appealsuspension":return e;default:throw new Error(`unexpected source ${e}`)}}},7730:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});s(36728);var n=s(2784);class a extends n.Component{componentDidMount(){const{code:e,error:t,scope:s,state:n}=this.props.location.query,a={callback_url:`https://${window.location.hostname}${window.location.pathname}`,code:e,error:t,scope:s,state:n},i=window.opener;i?(i.postMessage(a,`https://${window.location.hostname}`),window.close(),i.focus()):this.props.history.push("/")}render(){return null}}},52235:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=s(7896),a=s(2784),i=s(72250);const o=(0,s(17943).YW)({task:e=>e.BounceOcfFlow.task}),r=a.memo((e=>a.createElement(i.Z,(0,n.Z)({},e,{ocfModule:o}))))},47065:(e,t,s)=>{"use strict";s.d(t,{m:()=>n});const n=s(2784).createContext({onFollow:void 0,onInitialize:void 0,onUnfollow:void 0})},19480:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var n=s(7896),a=s(2784),i=s(73228),o=s.n(i),r=s(72250),l=s(21100),c=s(96958),u=s(17943);const d=o().g2b8acd4,p=o().jd7ca8ee,h=e=>a.createElement(a.Fragment,null,a.createElement(c.Z,{title:d}),a.createElement(l.Z,{description:p}),a.createElement(r.Z,(0,n.Z)({},e,{flowName:"login",ocfModule:u.qE})))},86410:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=s(7896),a=s(2784),i=s(72250),o=s(17943);const r=e=>a.createElement(i.Z,(0,n.Z)({},e,{ocfModule:o.qE}))},15408:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=s(7896),a=s(2784),i=s(72250),o=s(17943);const r=e=>a.createElement(i.Z,(0,n.Z)({},e,{flowName:"convert_to_professional",ocfModule:o.qE}))},38765:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=s(7896),a=s(2784),i=s(72250),o=s(17943);const r=e=>a.createElement(i.Z,(0,n.Z)({},e,{flowName:"make_more_connections",ocfModule:o.qE}))},27228:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var n=s(7896),a=(s(85940),s(2784)),i=s(72250),o=s(72599),r=s(97871),l=s(95779);const c=(0,s(17943).YW)({task:e=>e.ReportFlow.task});var u=s(59824);const d=(e,t)=>(0,r.B)(e[t]),p=(e,t)=>{switch(d(e,t)){case"1":case"true":return!0;default:return!1}},h=e=>{const t=(0,l.W)(d(e,"source")||"");return{client_app_id:d(e,"client_app_id"),client_location:d(e,"client_location"),client_referer:d(e,"client_referer"),community_id:d(e,"community_id"),conversation_section:d(e,"conversation_section"),impression_id:d(e,"impression_id"),is_media:p(e,"is_media"),is_promoted:p(e,"is_promoted"),report_flow_id:d(e,"report_flow_id"),report_referrer:d(e,"report_referrer"),reported_broadcast_id:d(e,"reported_broadcast_id"),reported_direct_message_conversation_id:d(e,"reported_direct_message_conversation_id"),reported_direct_message_id:d(e,"reported_direct_message_id"),reported_list_id:d(e,"reported_list_id"),reported_moment_id:d(e,"reported_moment_id"),reported_tweet_id:d(e,"reported_tweet_id"),reported_user_id:d(e,"reported_user_id"),source:t}};function m(e){var t;const{history:s,location:{query:r,state:l}}=e;if(!(!(null==r||!r.input_flow_data)||null!=l&&null!=(t=l.input)&&t.requested_variant))try{return s.replace(location.pathname,{input:{requested_variant:JSON.stringify(h(r))}}),null}catch(e){return(0,o.ZP)(e),a.createElement(u.Z,{to:"/home"})}return a.createElement(i.Z,(0,n.Z)({},e,{flowName:"report-flow",ocfModule:c}))}},30593:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var n=s(7896),a=s(2784),i=s(73228),o=s.n(i),r=s(72250),l=s(21100),c=s(96958),u=s(17943);const d=o().eab9ceb2,p=o().i7387d1a,h=e=>a.createElement(a.Fragment,null,a.createElement(c.Z,{title:d}),a.createElement(l.Z,{description:p}),a.createElement(r.Z,(0,n.Z)({},e,{flowName:"signup",ocfModule:u.qE})))},53105:(e,t,s)=>{"use strict";s.d(t,{Z:()=>y});s(6886);var n=s(2784),a=s(25686),i=s(50829),o=s(41441),r=s(5252),l=s(70451),c=s(73186),u=s(73228),d=s.n(u),p=s(21783),h=s(73036),m=s(26176),_=s(76372),g=s(22318);const b=d().d2fb334c,k=d().hdf040dd;class v extends n.Component{constructor(...e){super(...e),this.state={contentScrollable:!1,scrollReachedBottom:!1},this._handleScroll=e=>{const t=e.currentTarget;if(t instanceof HTMLElement){const e=Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<2;e!==this.state.scrollReachedBottom&&this.setState({scrollReachedBottom:e})}},this._handleViewportSet=e=>{var t;const{onViewportSet:s}=this.props;this._viewport=e,s&&s(e),null==(t=this.viewportRectChangeListener)||t.call(this),this.viewportRectChangeListener=null==e?void 0:e.addRectChangeListener((()=>this._handleResize()))},this._handleResize=()=>{var e;const t=null==(e=this._viewport)?void 0:e.getViewport();if(t){const e=t.scrollHeight>t.clientHeight;e!==this.state.contentScrollable&&this.setState({contentScrollable:e})}}}componentWillUnmount(){var e;null==(e=this.viewportRectChangeListener)||e.call(this)}render(){const{children:e,footer:t,header:s,hideAppBar:r,providePadding:l=!1,rightControl:c,scrollPrompt:u}=this.props,{isModal:d}=this.context,{contentScrollable:p,scrollReachedBottom:m}=this.state,b=t||c,k=n.createElement(n.Fragment,null,s,e),v=d?f.contentArea:f.compactContentArea;return n.createElement(i.Z,{style:[f.root,d&&f.rootModal]},r?null:this._renderAppBar(),n.createElement(o.Z,{style:[f.container,d&&f.containerModal]},d?n.createElement(n.Fragment,null,n.createElement(_.Z,{onScroll:this._handleScroll,onViewportSet:this._handleViewportSet,style:[f.viewport,h.ZP.isIE()&&f.viewportIE]},n.createElement(a.Z,{onLayout:this._handleResize,onPageScroll:this._handleScroll,style:l&&v},k)),b&&n.createElement(a.Z,{style:[v,p&&!m&&f.footerShadow]},b)):b?n.createElement(g.l,{control:n.createElement(a.Z,{style:[l&&v,p&&!m&&f.footerShadow]},b),onViewportSet:this._handleViewportSet},n.createElement(a.Z,{style:l&&v},k)):l?n.createElement(a.Z,{style:v},k):k,d?null:u),d?u:null)}_renderAppBar(){var e;const{appBarPosition:t,appBarWithBackground:s,backButtonType:i,backLocation:o,hideBackButton:l,hideLogo:c,history:u,leftControl:d,onBackClick:h,progressIndication:_}=this.props,g=_||c?void 0:n.createElement(a.Z,{style:f.iconContainer},n.createElement(p.default,{accessibilityLabel:b,style:f.icon})),v=null==_||null==(e=_.text)?void 0:e.text,y=null==_?void 0:_.percentage_complete,x=y?y/100:void 0,w=k({percentage:y}),C=x?n.createElement(r.Z,{accessibilityLabel:w,ariaValueText:w,progress:x}):void 0;return n.createElement(m.ZP,{backButtonType:i,backLocation:o,centeredLogo:g,hideBackButton:l||!h,history:u,leftControl:d,onBackClick:h,position:t,secondaryBar:C,title:v,withBackground:s})}}v.contextType=l.Z;const f=c.Z.create((e=>({root:{display:"flex",flexGrow:1},rootModal:{backgroundColor:e.colors.cellBackground,flexShrink:1},container:{flexGrow:1},containerModal:{flexShrink:1},iconContainer:{alignItems:"center",alignSelf:"stretch",display:"flex",flexGrow:1,justifyContent:"center",minWidth:e.spaces.space32},icon:{color:e.colors.brandColor,flexGrow:1,height:"1.75rem"},viewport:{flexGrow:1,flexShrink:1,overflow:"auto"},viewportIE:{flexBasis:"0%"},footerShadow:{boxShadow:e.boxShadows.xSmall},contentArea:{paddingHorizontal:e.spaces.space80},compactContentArea:{paddingHorizontal:e.spaces.space32}}))),y=v},22318:(e,t,s)=>{"use strict";s.d(t,{l:()=>c});s(6886);var n=s(2784),a=s(25686),i=s(73186),o=s(73036),r=s(76372);const l="controlView",c=({children:e,control:t,onScroll:s,onViewportSet:c})=>{const p=n.useRef(null),h=n.useRef(0),[m,_]=n.useState(null);u((()=>{var e;const t=window.visualViewport;if(((null==(e=document.documentElement)?void 0:e.clientHeight)||window.innerHeight)-t.height>100){const e=p.current||75,s=e+(h.current||75)+i.Z.theme.componentDimensions.appBarHeightPx;window.visualViewport.height<s?_(s):_(t.height+t.offsetTop-e)}else _(null)}));const g=[d.fixed,...o.ZP.isIOS()&&m?[d.visualViewport,{top:m}]:[]];return n.createElement(n.Fragment,null,n.createElement(r.Z,{onScroll:s,onViewportSet:c,style:d.flexViewport},n.createElement(a.Z,{ref:e=>{e&&!h.current&&(h.current=e.getBoundingClientRect().height)},style:d.fullHeight},e)),n.createElement(a.Z,{ref:e=>{e&&!p.current&&(p.current=e.getBoundingClientRect().height)},style:g,testID:l},t),n.createElement(a.Z,{style:d.invisible},t))},u=e=>{const t=window.visualViewport;n.useEffect((()=>{if(t)return t.addEventListener("resize",e),t.addEventListener("scroll",e),()=>{t.removeEventListener("resize",e),t.removeEventListener("scroll",e)}}))},d=i.Z.create((e=>({fixed:{backgroundColor:e.colors.navigationBackground,position:"fixed",bottom:0,start:0,end:0},invisible:{visibility:"hidden"},flexViewport:{flexGrow:1,flexShrink:1,flexBasis:"100%",overflow:"auto"},fullHeight:{height:"100%"},visualViewport:{position:"absolute",start:0,end:0,marginTop:`-${e.componentDimensions.appBarHeight}`}})))},72250:(e,t,s)=>{"use strict";s.d(t,{Z:()=>hc});var n=s(7896),a=(s(85940),s(75640),s(2784)),i=s(25686),o=s(883),r=s(36934),l=s(84292),c=s(70451),u=s(73186),d=s(73228),p=s.n(d),h=s(1206),m=s(72983),_=s(31261),g=(s(6886),s(23335)),b=s(67560),k=s(63140);const v=p().e4ff75aa,f=p().e4f6bd9e,y={[b.Z.Offline]:v},x=(e,t,s)=>{let n;const a={[k.ZP.AccessDeniedByBouncer]:{customAction:t=>{(0,g.bouncerError)(t,{flow:e})}}};if(s)n={...a,customErrorHandler:({errors:[n]})=>(n.code===k.ZP.AccessDeniedByBouncer?(0,g.bouncerError)(n,{flow:e}):s(t||n.code&&y[n.code]||f),[])};else if(t){const e={toast:{text:t}};n={[k.ZP.ValidationFailure]:e,[k.ZP.OnboardingFlowRetriableFailure]:e,[k.ZP.OnboardingFlowFailure]:e,defaultToast:{text:t},showToast:!0,...a}}else n={...a,[b.Z.Offline]:{toast:{text:y[b.Z.Offline]}},defaultToast:{text:f},showToast:!0};return n};var w=s(88944),C=s(48580),I=s(72599),E=s(50519),S=s(34615),Z=s(88335),T=s(41268),A=s(88027),F=s(17943),P=s(23803),N=s(10364),B=s(49758),D=s(29496),L=(s(36728),s(53682));const O=e=>{const{entity:{navigation_link:t,subtask_data_reference:s},onClick:n,onNavigate:i,subtaskInputs:o}=e;let l=e.children,c={};if(t){c={withInteractiveStyling:!0,...t.link_type===Z.Iq.ChromelessWeb&&t.url?{link:{external:!0,pathname:t.url}}:{accessibilityRole:"button",color:"link",onClick:(u=t,e=>{e.preventDefault(),i?i(u):n&&n()})}}}else s&&(l=(0,L.OG)(o,s));var u;return a.createElement(r.ZP,c,l)},V=e=>{const{children:t,stylingRange:{styling_type:s,type:n}}=e;switch(n||s){case Z.Hm.UnorderedList:case Z.Hm.DEPRECATED_UnorderedList:return a.createElement("ul",null,t);case Z.Hm.ListItem:case Z.Hm.DEPRECATED_ListItem:return a.createElement("li",null,t);default:return a.createElement(a.Fragment,null,t)}};class R{constructor(e,t,s){this._renderChildren=e=>{const{text:t}=e;if(!t)return[];let s=this.fromIndex;const n=[];return this.children.forEach((i=>{s<i.fromIndex&&n.push(a.createElement(r.ZP,{key:`${s},${i.fromIndex}`},t.slice(s,i.fromIndex))),i.rangeObject&&n.push(i.render(e)),s=i.toIndex})),s<this.toIndex&&n.push(a.createElement(r.ZP,{key:`${s},${this.toIndex}`},t.slice(s,this.toIndex))),n},this.fromIndex=e,this.toIndex=t,this.rangeObject=s,this.children=[]}insert(e){const t=this.children.find((t=>t.fromIndex<=e.fromIndex&&t.toIndex>=e.toIndex));t?t.insert(e):(this.children.push(e),this.children.sort(((e,t)=>e.fromIndex-t.fromIndex)))}render(e){var t,s;const{accessibilityLevel:i,accessibilityRole:o,align:l,color:c,nativeID:u,size:d,style:p,testID:h,weight:m}=e,_=this._renderChildren(e),g=(0,L.eU)(p),b=`${this.fromIndex},${this.toIndex}`;return null!=(t=this.rangeObject)&&t.type||null!=(s=this.rangeObject)&&s.styling_type?a.createElement(V,(0,n.Z)({},e,{fromIndex:this.fromIndex,key:b,stylingRange:this.rangeObject,toIndex:this.toIndex}),_):this.rangeObject?a.createElement(O,(0,n.Z)({},e,{entity:this.rangeObject,fromIndex:this.fromIndex,key:b,toIndex:this.toIndex}),_):a.createElement(r.ZP,{accessibilityLevel:i,accessibilityRole:o,align:l,color:c,key:b,nativeID:u,size:d,style:p,testID:h,weight:g||m},_)}}class M extends a.PureComponent{constructor(...e){super(...e),this._generateRichTextTree=()=>{const{entities:e,styling_ranges:t,text:s}=this.props,n=[...null!=t?t:[],...null!=e?e:[]].sort(((e,t)=>t.to_index-t.from_index-(e.to_index-e.from_index))),a=new R(0,(null==s?void 0:s.length)||0);return n.forEach((e=>{a.insert(new R(e.from_index,e.to_index,e))})),a}}render(){return this._generateRichTextTree().render(this.props)}}const U=M,z=({children:e,condition:t,wrapper:s})=>t&&s?s(e):e;function j({actionLabel:e,secondaryActionLabel:t}){return Boolean(e||t)}const H=u.Z.create((e=>({spaceBetween:{marginBottom:e.spaces.space16},detailText:{marginTop:e.spaces.space16},actionContainer:{marginVertical:e.spaces.space24},columnView:{display:"flex",flexDirection:"row",justifyContent:"space-between"}}))),G=function(e){const{actionDisabled:t,actionLabel:s,actionTestID:o,actionType:r,actionWrapper:l,buttonSize:c,decorator:u,detailText:d,onAction:p,onNavigate:h,onSecondaryAction:m,secondaryActionDisabled:_,secondaryActionLabel:g,secondaryActionTestID:b,secondaryActionType:k,secondaryActionWrapper:v,subtaskInputs:f}=e;if(!j(e))return null;const y="primaryText"===k,x=[{disabled:t,onPress:p,size:null!=c?c:"xLarge",testID:o,type:null!=r?r:"primaryFilled",label:s,wrapper:l},{disabled:_,onPress:m,size:null!=c?c:"xLarge",testID:b,type:null!=k?k:"primaryOutlined",label:g,wrapper:v}].filter((({label:e})=>null!=e));return y&&x.reverse(),a.createElement(i.Z,{style:!!u&&H.columnView},u||null,a.createElement(i.Z,null,(null==d?void 0:d.text)&&f&&a.createElement(U,(0,n.Z)({},d,{color:"gray700",onNavigate:h,size:"subtext2",style:H.detailText,subtaskInputs:f})),a.createElement(i.Z,{style:H.actionContainer},x.map((({label:e,wrapper:t,...s},i)=>a.createElement(z,{condition:!!t,key:e,wrapper:t},a.createElement(D.ZP,(0,n.Z)({key:e,style:x.length>1&&i<x.length-1?H.spaceBetween:void 0},s),e)))))))};var W=s(35953),q=s(44329),$=s(19153),K=s(53363),Y=s(84361),Q=s(58721),X=s(85114),J=s(55258);const ee=u.Z.create((e=>({header:{marginBottom:e.spaces.space12},centerText:{textAlign:"center"},contentArea:{marginHorizontal:e.spaces.space80},contentAreaCompact:{paddingHorizontal:e.spaces.space32,margin:"auto",minWidth:X.fI+64,maxWidth:X.fI+64},checkboxText:{flexShrink:1,paddingEnd:e.spaces.space12,width:"100%"},option:{marginTop:e.spaces.space12,flexDirection:"row",justifyContent:"space-between"},primaryButton:{marginTop:e.spaces.space16},formTextInput:{paddingHorizontal:0},button:{width:"100%",margin:"auto",marginVertical:e.spaces.space12},ssoButton:{width:X.fI,height:e.spaces.space40}})));function te({number:e}){return a.createElement(i.Z,{style:se.badge},a.createElement(r.ZP,{color:"buttonWhite",weight:"bold"},e))}const se=u.Z.create((e=>({badge:{backgroundColor:e.colors.buttonBlack,borderRadius:e.borderRadii.infinite,height:e.spaces.space28,width:e.spaces.space28,marginEnd:e.spaces.space20,justifyContent:"center",alignItems:"center",overflow:"hidden"}}))),ne=({icon:e,style:t})=>{!(e in Z.q0)&&e.startsWith("number_")&&(Z.q0[e]=(e=>{if(!e.startsWith("number_"))return()=>null;const[,t]=e.split("number_");return()=>a.createElement(te,{number:t})})(e));const s=Z.q0[e];return s?a.createElement(s,{style:t,testID:"ocf-icon"}):null};var ae=s(59890);const ie=u.Z.create((e=>({separatorContainer:{width:"100%"},separatorColumn:{flex:1,justifyContent:"center"},separator:{width:"100%",height:"1px",backgroundColor:e.colors.gray200,marginTop:e.spaces.space8,marginBottom:e.spaces.space8},separatorText:{"flex-basis":"auto"}}))),oe=({label:e,onNavigate:t,subtaskInputs:s})=>e?a.createElement(ae.Z,{style:ie.separatorContainer,withGutter:!0},a.createElement(i.Z,{style:ie.separatorColumn},a.createElement(i.Z,{style:ie.separator})),a.createElement(U,(0,n.Z)({style:ie.separatorText},e,{onNavigate:t,size:"headline2",subtaskInputs:s})),a.createElement(i.Z,{style:ie.separatorColumn},a.createElement(i.Z,{style:ie.separator}))):a.createElement(i.Z,{style:ie.separator}),re=({button:e,displayType:t=Z.GN.Default,onNavigate:s,style:i,subtaskId:o,subtaskInputs:r,...l})=>{const{icon:c,navigation_link:u,preferred_size:d,separator:p}=e,h=o===Z.D7?J.yX.SignUp:J.yX.LogIn,m=a.useCallback((e=>{s(u)}),[u,s]);return a.createElement(a.Fragment,null,(()=>{switch(t){case Z.GN.GoogleSSO:return a.createElement(Q.Z,{buttonSize:d?(0,L.Yr)(d):"medium",buttonState:h,displayType:X.qv.Button,style:[ee.button,ee.ssoButton]});case Z.GN.AppleSSO:return a.createElement(Y.Z,{buttonSize:d?(0,L.Yr)(d):"medium",buttonState:h,style:[ee.button,ee.ssoButton]});default:return a.createElement(D.ZP,(0,n.Z)({},l,{icon:c&&a.createElement(ne,{icon:c.icon}),onPress:m,size:d?(0,L.Yr)(d):"medium",style:[ee.button,i],type:e.style?(0,L.$1)(e.style):"brandFilled"}),u.label)}})(),p?a.createElement(oe,{label:p.label,onNavigate:s,subtaskInputs:r}):null)},le=u.Z.create((e=>({buttonRightAligned:{marginHorizontal:`-${e.spaces.space8}`,marginVertical:0},containerRightAlignedButton:{marginStart:e.spaces.space20},secondaryTextRightAlignedButton:{flexBasis:0,flexGrow:1},subHeaderRightAlignedButton:{flexDirection:"row",flexWrap:"wrap"},headingContainer:{marginVertical:e.spaces.space20},subHeader:{marginTop:e.spaces.space8}}))),ce=e=>{var t,s;const{header:o,onNavigate:r,primaryTextProp:l,primaryTextTestID:d,secondaryTextProp:p,subtaskInputs:h,userInfo:m,withHeaderImage:_}=e,g=(null==o?void 0:o.header_button)&&!(!(b=o.header_button).icon||b.style!==Z.ZJ.Text||null!=(k=b.navigation_link)&&k.label);var b,k;let v,f,y,x,w,C,I;const{isModal:E}=a.useContext(c.Z);return o?(y=o.user,x=o.header_image,v=o.primary_text,f=o.secondary_text,w=10*u.Z.theme.lineHeightsPx.body,C=x?w*x.image.image_info.width/x.image.image_info.height:"initial",I=_&&x&&"icon"===x.image_type):(v="string"==typeof l?{text:l}:l,f="string"==typeof p?{text:p}:p),x||null!=(t=v)&&t.text||null!=(s=f)&&s.text||y?a.createElement(i.Z,null,_&&x?a.createElement(i.Z,{style:{marginHorizontal:"full_width"===x.image_type||"full_bleed_top"===x.image_type?`-${E?u.Z.theme.spaces.space80:u.Z.theme.spaces.space32}`:"auto",height:I?w:"initial",width:I?C:"initial"}},a.createElement(W.Z,{accessibilityLabel:x.image.image_info.alt_text||"",aspectMode:q.Z.exact(x.image.image_info.width/x.image.image_info.height),image:x.image.image_info})):null,a.createElement(i.Z,{style:le.headingContainer},v?a.createElement(U,(0,n.Z)({},v,{accessibilityLevel:1,accessibilityRole:"heading",nativeID:K.Q_,onNavigate:r,size:E?"title2":"title3",subtaskInputs:h,testID:d,weight:"bold"})):null,f||null!=o&&o.header_button?a.createElement(i.Z,{style:[le.subHeader,g&&le.subHeaderRightAlignedButton]},a.createElement(i.Z,{style:g&&le.secondaryTextRightAlignedButton},f?a.createElement(U,(0,n.Z)({},f,{color:"gray700",onNavigate:r,subtaskInputs:h})):null),null!=o&&o.header_button?a.createElement(i.Z,{style:g&&le.containerRightAlignedButton},a.createElement(re,{button:o.header_button,onNavigate:r,style:g&&le.buttonRightAligned,subtaskInputs:h})):null):null,y?null!=m?m:a.createElement($.ZP,{avatarUri:y.profile_image_url_https,displayMode:"UserCompact",name:y.name,screenName:y.screen_name,userId:y.id_str}):null)):null};var ue=s(53105);const de="ActionListNextButton",pe="ActionListSkipButton";function he({actionItem:e,link:t,onNavigate:s,subtaskId:i,subtaskInputs:o,updateFlow:r}){var l,c;const u=e.action_data.link_data,d=a.useCallback((e=>{e.preventDefault(),r(i,{link:t.link_id}),s(t)}),[t,s,i,r]);return a.createElement(N.Z,(0,n.Z)({accessibilityRole:"link",description:a.createElement(U,(0,n.Z)({},u.detail_text,{color:"gray700",size:"subtext2",subtaskInputs:o})),label:a.createElement(U,(0,n.Z)({},u.text,{size:"headline2",subtaskInputs:o,text:null!=(l=null==(c=u.text)?void 0:c.text)?l:u.link.label})),link:"#",onPress:d},ge(e.action_data.link_data.icon)))}function me({actionItem:e,onNavigate:t,subtaskInputs:s}){return a.createElement(N.Z,(0,n.Z)({accessibilityRole:null,description:a.createElement(U,(0,n.Z)({},e.action_data.text_data.detail_text,{color:"gray700",size:"subtext2",subtaskInputs:s})),label:a.createElement(U,(0,n.Z)({},e.action_data.text_data.text,{onNavigate:t,size:"headline2",subtaskInputs:s}))},ge(e.action_data.text_data.icon)))}function _e({actionItems:e,onNavigate:t,subtaskInputs:s}){const i=e.map((e=>{var i,o;const r="text"===e.action_type?e.action_data.text_data:e.action_data.link_data;return{label:a.createElement(U,(0,n.Z)({},r.text,{onNavigate:t,subtaskInputs:s,text:"text"===e.action_type?e.action_data.text_data.text.text:null!=(i=null==(o=e.action_data.link_data.text)?void 0:o.text)?i:e.action_data.link_data.link.label,weight:"bold"})),description:r.detail_text?a.createElement(U,(0,n.Z)({},r.detail_text,{color:"gray700",style:be.bulletListDescription,subtaskInputs:s})):null,decoration:r.icon?a.createElement(ne,{icon:r.icon.icon,style:be.bulletIcon}):null}}));return a.createElement(B.Z,{items:i})}function ge(e){return{thumbnail:e?a.createElement(r.ZP,{size:"headline2",style:be.icon},a.createElement(ne,{icon:e.icon})):null,thumbnailSize:"medium"}}const be=u.Z.create((e=>({icon:{display:"block",minWidth:e.spaces.space36,marginEnd:e.spaces.space20,textAlign:"center"},bulletIcon:{height:e.spaces.space24,width:e.spaces.space24,color:e.colors.text,marginEnd:e.spaces.space24,justifyContent:"center",overflow:"hidden"},bulletListDescription:{marginTop:e.spaces.space4}}))),ke=function(e){var t,s,o;const{onNavigate:r,passthroughOcfScreenProps:l,subtask:{action_items:c,header:u,next_link:d,skip_link:p,style:h},subtaskId:m,subtaskInputs:_,updateFlow:g}=e;return a.createElement(ue.Z,(0,n.Z)({},l,{appBarPosition:"full_bleed_top"===(null==u||null==(t=u.header_image)?void 0:t.image_type)?"absolute":void 0,appBarWithBackground:"full_bleed_top"!==(null==u||null==(s=u.header_image)?void 0:s.image_type),footer:a.createElement(G,{actionLabel:null==d?void 0:d.label,actionTestID:de,onAction:()=>{d&&(g(m,{link:d.link_id}),r(d))},onSecondaryAction:()=>{p&&(g(m,{link:p.link_id}),r(p))},secondaryActionLabel:null==p?void 0:p.label,secondaryActionTestID:pe}),header:a.createElement(ce,{header:u,onNavigate:r,subtaskInputs:_,withHeaderImage:!0}),hideLogo:"full_bleed_top"===(null==u||null==(o=u.header_image)?void 0:o.image_type),providePadding:!0}),h===Z.R8.BulletList?a.createElement(_e,(0,n.Z)({},e,{actionItems:c})):a.createElement(i.Z,{accessibilityRole:"list"},c.map(((t,s)=>a.createElement(i.Z,{accessibilityRole:"listitem",key:s},"text"===t.action_type?a.createElement(me,(0,n.Z)({},e,{actionItem:t})):a.createElement(he,(0,n.Z)({},e,{actionItem:t,link:t.action_data.link_data.link})))))))};class ve extends a.Component{constructor(...e){super(...e),this._handleConfirm=()=>{const{subtask:e}=this.props;this._handleButtonClick(e.next_link)},this._handleCancel=()=>{const{subtask:{cancel_link:e}}=this.props;e&&this._handleButtonClick(e)},this._handleButtonClick=e=>{const{onNavigate:t,subtaskId:s,updateFlow:n}=this.props;n(s,{link:e.link_id}),t(e)}}render(){const{onNavigate:e,subtask:t,subtaskInputs:s}=this.props,i=t.primary_text?a.createElement(U,(0,n.Z)({},t.primary_text,{nativeID:K.Q_,onNavigate:e,subtaskInputs:s})):void 0,o=t.secondary_text?a.createElement(U,(0,n.Z)({},t.secondary_text,{onNavigate:e,subtaskInputs:s})):void 0,{cancel_link:r,next_link:c}=t,u=r&&r.label;return a.createElement(l.Z,{cancelButtonLabel:u,confirmButtonLabel:c&&c.label,headline:i,onCancel:this._handleCancel,onConfirm:this._handleConfirm,onMaskClick:this._handleCancel,text:o,withCancelButton:!!u})}}const fe=ve;var ye=s(34411),xe=s(16587);class we extends a.Component{constructor(e,t){super(e,t),this._handleCtaClick=e=>{const{onNavigate:t,subtaskId:s,updateFlow:n}=this.props;n(s,{link:e.link_id}),t(e)},this._handlePrimaryActionClick=()=>{const{subtask:e}=this.props;this.setState({downloadLinkClicked:!0}),this._handleCtaClick(e.primary_action_link)},this._handleSecondaryActionClick=()=>{const{subtask:{secondary_action_link:e}}=this.props;e&&this._handleCtaClick(e)},this._getSubText=(0,xe.Z)(((e,t,s)=>{const o=e.primary_image_url?a.createElement(W.Z,{accessibilityLabel:"",aspectMode:q.Z.exact(1),image:e.primary_image_url||""}):null,r=e.secondary_text?a.createElement(U,(0,n.Z)({},e.secondary_text,{onNavigate:t,subtaskInputs:s})):null;return a.createElement(i.Z,null,o,r)})),this.state={downloadLinkClicked:!1}}render(){const{onNavigate:e,passthroughOcfScreenProps:t,subtask:s,subtaskInputs:i}=this.props,{downloadLinkClicked:o}=this.state,r=s.primary_text?a.createElement(U,(0,n.Z)({},s.primary_text,{nativeID:K.Q_,onNavigate:e,subtaskInputs:i})):null,l=!o||!s.primary_action_text_after_click,c=o&&s.primary_action_text_after_click||s.primary_action_link.label,u=s.detail_text?a.createElement(U,(0,n.Z)({},s.detail_text,{onNavigate:e,subtaskInputs:i})):null;return a.createElement(ue.Z,(0,n.Z)({hideLogo:!0},t),a.createElement(ye.Z,{actionLabel:c||"",actionType:(0,L.$1)(s.primary_action_style),footer:u,headline:r,onAction:l?this._handlePrimaryActionClick:h.Z,onClose:h.Z,onSecondaryAction:this._handleSecondaryActionClick,secondaryActionLabel:(s.secondary_action_link||{}).label,secondaryActionType:s.secondary_action_style&&(0,L.$1)(s.secondary_action_style),subtext:this._getSubText(s,e,i),withCloseButton:!1}),this.props.errorDialog)}}we.contextType=_.rC;var Ce=s(54044),Ie=s(73206),Ee=s(73036),Se=s(87191),Ze=s(95995),Te=s(37541);const Ae=u.Z.create((e=>({userContainerStacked:{alignItems:"center",marginTop:e.spaces.space8,marginBottom:e.spaces.space16},userAvatarStacked:{marginBottom:e.spaces.space8},userNameStacked:{alignItems:"center"},avatarColumnCentered:{justifyContent:"center"}}))),Fe=e=>{const{displayType:t=Z.CE.stacked,user:s,userCaption:o}=e;if(!s)return null;const r=e=>a.createElement(Se.default,{accessibilityHidden:!0,focusable:!1,size:Se.default.defaultSize,style:e,uri:s.profile_image_url_https}),l=t=>{const{onNavigate:i,subtaskInputs:r}=e;return a.createElement(a.Fragment,null,a.createElement(Ze.Z,{isBlueVerified:s.is_blue_verified,isProtected:s.protected,isVerified:s.verified,name:s.name,screenName:o?void 0:s.screen_name,withStackedLayout:!0}),o?a.createElement(U,(0,n.Z)({},o,{color:"gray700",onNavigate:i,subtaskInputs:r})):null)};switch(t){case Z.CE.stacked:return a.createElement(i.Z,{style:Ae.userContainerStacked},r(Ae.userAvatarStacked),l(Ae.userNameStacked));case Z.CE.compact:return a.createElement(Te.Z,{avatarCell:r(),avatarCellStyle:Ae.avatarColumnCentered,cellStyle:Ae.avatarColumnCentered,testID:"ocf-userinfo-avatar-row"},l());default:return null}},Pe="OCF_CallToAction_Button";class Ne extends a.Component{constructor(...e){super(...e),this._getCtaButtonProps=()=>{const{subtask:e}=this.props,[{navigation_link:t,style:s}={},{navigation_link:n,style:a}={},{navigation_link:i,style:o}={}]=e.buttons||[],r=t||e.primary_action_link,l=s||e.primary_action_style,c={actionLabel:r.label||"",actionType:l&&(0,L.$1)(l),onAction:r&&this._handleCtaClick(r)},u=n||e.secondary_action_link,d=a||e.secondary_action_style;return{...c,...{secondaryActionLabel:u?u.label:void 0,secondaryActionType:d&&(0,L.$1)(d),onSecondaryAction:u&&this._handleCtaClick(u)},...{tertiaryActionLabel:(i||{}).label,tertiaryActionType:o&&(0,L.$1)(o),onTertiaryAction:i&&this._handleCtaClick(i)}}},this._getCtaText=()=>{const{onNavigate:e,subtask:{detail_text:t,header:s,primary_text:i,secondary_text:o},subtaskInputs:r}=this.props;return{primaryText:a.createElement(U,(0,n.Z)({},s&&s.primary_text||i,{nativeID:K.Q_,onNavigate:e,subtaskInputs:r})),secondaryText:s||o?a.createElement(U,(0,n.Z)({},s&&s.secondary_text||o,{onNavigate:e,subtaskInputs:r})):null,detailText:t?a.createElement(U,(0,n.Z)({},t,{onNavigate:e,subtaskInputs:r})):null}},this._handleCtaClick=e=>()=>{const{onNavigate:t,subtaskId:s,updateFlow:n}=this.props;n(s,{link:e.link_id}),t(e)}}render(){var e;const{onNavigate:t,passthroughOcfScreenProps:s,subtask:o,subtaskInputs:r}=this.props,{onBackClick:l}=s,{detailText:c,primaryText:d,secondaryText:p}=this._getCtaText(),m=Ee.ZP.isDesktopOS(),_=o.style===Z.aD.HalfCover;let g,b;const k=o.header&&o.header.header_image||o.header_image;if(k){const e=k.image.image_info,t=k.image_type===Z.__.FullBleedTop,s=m&&t?q.Z.exact(e.width/e.height):void 0,n={url:e.url,height:e.height,width:e.width};g=({style:t})=>a.createElement(i.Z,{style:t},a.createElement(W.Z,{accessibilityLabel:e.alt_text||"",aspectMode:s,image:n})),b=t?"illustrationFullWidth":"illustration"}else _&&(b="none");const v=!("illustrationFullWidth"===b&&m),f={children:a.createElement(Fe,{onNavigate:t,subtaskInputs:r,user:null==(e=o.header)?void 0:e.user}),footer:c,graphic:g,graphicDisplayMode:b,headline:d,onClose:h.Z,primaryButtonTestID:Pe,subtext:p,withBottomPadding:v,withCloseButton:!1,...this._getCtaButtonProps()};return _?a.createElement(Ce.Z,null,(({windowWidth:e})=>{const t=e>u.Z.theme.breakpoints.medium;return a.createElement(Ie.Z,{type:t?"center":"bottom",withMask:!0},a.createElement(ye.Z,f))})):a.createElement(ue.Z,(0,n.Z)({hideAppBar:!l,hideLogo:!0},s),a.createElement(ye.Z,f),this.props.errorDialog)}}class Be extends a.Component{constructor(...e){super(...e),this._executeSubtaskAction=()=>{const{navigationLink:e,onError:t,onNavigate:s,subtaskAction:n}=this.props;try{n().then((()=>s(e,!0))).catch(t)}catch(e){t(e)}}}componentDidMount(){this._executeSubtaskAction()}componentDidUpdate(e){const{subtaskId:t}=this.props;t!==e.subtaskId&&this._executeSubtaskAction()}render(){return null}}Be.defaultProps={onError:h.Z};var De=s(92160),Le=s(26401);const Oe=(0,De.Z)().propsFromState((()=>({fetchStatus:Le.UD,multiAccountUsers:Le.pc}))).propsFromActions((()=>({createLocalApiErrorHandlerMultiListFetch:(0,g.createLocalApiErrorHandlerWithContextFactory)("ACCOUNT_SWITCHER_MULTI_LIST_FETCH"),fetchMultiAccountListIfNeeded:Le.s2}))).adjustStateProps((({fetchStatus:e,multiAccountUsers:t})=>({fetchStatus:e===P.ZP.NONE?P.ZP.LOADING:e,multiAccountUsers:t})));class Ve extends a.PureComponent{constructor(...e){super(...e),this._render=()=>{const{multiAccountUsers:e,onNavigate:t,subtask:s,subtaskId:n,updateFlow:i}=this.props,{false_link:o,true_link:r,user_id:l}=s,c=e.filter((e=>e.user_id===l)).length>0;return a.createElement(Be,{navigationLink:c?r:o,onNavigate:t,subtaskAction:()=>(i(n,{link:c?r.link_id:o.link_id}),Promise.resolve()),subtaskId:n})},this._handleFetch=()=>{const{createLocalApiErrorHandlerMultiListFetch:e,fetchMultiAccountListIfNeeded:t}=this.props;t().catch(e())}}componentDidMount(){const{loggedInUserId:e}=this.context;e&&this._handleFetch()}render(){const{errorDialog:e,fetchStatus:t}=this.props,{loggedInUserId:s}=this.context;return e||(s?a.createElement(m.Z,{fetchStatus:t,onRequestRetry:this._handleFetch,render:this._render}):this._render())}}Ve.contextType=_.rC;const Re=Oe(Ve);s(53985);var Me=s(29006),Ue=s(22150),ze=s(96818),je=s(72948),He=s(19874),Ge=s(54170),We=s(58955),qe=s(11722);Object.freeze({icon:"icon",bullet_icon:"bullet_icon",image:"image"});const $e=Object.freeze({headerTitle:"header_title",headerSubtitle:"header_subtitle",sectionTitle:"section_title",detailText:"detail"}),Ke=Object.freeze({TOP:"top",CENTER:"center",BOTTOM:"bottom"});var Ye=s(22318);const Qe=a.createContext({settings:{},subtask:{subtask_id:""},subtaskId:"",subtaskInputs:{},callbacks:{},registerCallback:h.Z,removeCallback:h.Z,setSettings:h.Z,updateFlow:h.Z,onNavigate:h.Z});function Xe(){return a.useContext(Qe)}var Je=s(51276);const et={render:e=>{const{onNavigate:t,subtaskId:s,subtaskInputs:i,updateFlow:o}=Xe(),{value_data:r,value_identifier:l}=e,{action_data:c}=r,{link:u,primary_text:d,secondary_text:p}=c,h=_t(l,(()=>{o(s,{link:u}),t&&null!=u&&u.link_id&&t(u)})),m=a.useMemo((()=>a.createElement(U,(0,n.Z)({},d,{onNavigate:t,size:"headline2",subtaskInputs:i}))),[d,t,i]),_=a.useMemo((()=>a.createElement(U,(0,n.Z)({},p,{color:"gray700",onNavigate:t,size:"subtext2",subtaskInputs:i}))),[p,t,i]),g=a.useMemo((()=>{var e;return void 0!==u?null!=(e=u.url)?e:"#":void 0}),[u]);return c?a.createElement(N.Z,{accessibilityRole:void 0===u?null:"link",description:_,label:m,link:g,onPress:h,paddingHorizontal:"space0"}):null}};const tt={render:function(e){var t;const{value_data:s,value_identifier:i,value_type:o}=e,{boolean_data:r}=s,{primary_text:l,secondary_text:c}=r,{onNavigate:u,subtaskInputs:d}=Xe(),[p,h]=function(e,t,s){var n;const{setSettings:i,settings:o}=a.useContext(Qe),r=a.useCallback((s=>i((n=>({...n,[e]:{type:t,value:s}})))),[i,e,t]);return a.useEffect((()=>{r(s)}),[s,r]),[null==(n=o[e])?void 0:n.value,r]}(i,o,null!=(t=null==r?void 0:r.initial_value)&&t),m=l?a.createElement(U,(0,n.Z)({},l,{onNavigate:u,subtaskInputs:d})):null,_=c?a.createElement(U,(0,n.Z)({},c,{onNavigate:u,subtaskInputs:d})):null;return a.createElement(ze.Z,{checked:Boolean(p),helpText:_,label:m,onChange:h})}},st={render:e=>{const{onNavigate:t,subtaskId:s,updateFlow:n}=Xe(),{value_data:i,value_identifier:o}=e,{button_data:r}=i,{button_appearance:l,button_label:c,link:u}=r,d=_t(o,(()=>{n(s,{link:u}),t&&null!=u&&u.link_id&&t(u)}));return r?a.createElement(D.ZP,{onPress:d,size:l.preferred_size?(0,L.Yr)(l.preferred_size):"medium",style:ee.button,type:l.style?(0,L.$1)(l.style):"brandFilled"},c.text):null}};const nt=class{constructor(e){this.registry=e}hasConfig(e){return e in this.registry}getConfig(e){return this.hasConfig(e)?this.registry[e]:null}},at=u.Z.create((e=>({fullBleedTop:{marginHorizontal:`-${e.spaces.space32}`,height:"initial",width:"initial",marginBottom:e.spaces.space20},fullWidth:{marginHorizontal:0,height:"initial",width:"initial",marginBottom:e.spaces.space20},modalFullBleedTop:{marginHorizontal:`-${e.spaces.space80}`,height:"initial",width:"initial",marginBottom:e.spaces.space20}}))),it={render:e=>{const{value_data:t}=e,{image_data:s}=t,{isModal:n}=a.useContext(c.Z),{image:o,image_type:r}=s,{image_info:l}=o,{alt_text:d,height:p,width:h}=l,m=q.Z.exact(h/p),_=a.useMemo((()=>{let e,t;switch(r){case Z.__.Icon:return e=10*u.Z.theme.lineHeightsPx.body,t=e*h/p,{marginHorizontal:"auto",height:e,width:t};case Z.__.FullBleedTop:return n?at.modalFullBleedTop:at.fullBleedTop;default:return at.fullWidth}}),[n,r,p,h]);return a.createElement(i.Z,{style:_},a.createElement(W.Z,{accessibilityLabel:d||"",aspectMode:m,image:l}))}};var ot=s(73487);const rt=u.Z.create((e=>({infoItemContainerStyle:{paddingHorizontal:0},image:{display:"flex",flexDirection:"row"},text:{display:"flex",flexDirection:"column"},icon:{height:e.spaces.space24,width:e.spaces.space24,color:e.colors.text},decorationContainer:{height:e.spaces.space24,width:e.spaces.space24,marginEnd:e.spaces.space20},imageDecorationContainer:{marginEnd:e.spaces.space20}}))),lt={render:e=>{const{value_data:t}=e,{info_item_data:s}=t,{primary_text:n,secondary_text:o}=s,{icon:r,image:l}=s,c=a.useMemo((()=>[rt.icon,rt.decorationContainer]),[]);let u,d;if(l){const e=(0,L.cR)(l);u=a.createElement(ot.Z,{accessibilityLabel:"ocf-info-item-image",source:e,style:rt.imageDecorationContainer})}r&&(d=a.createElement(ne,{icon:r.icon,style:c}));const p=r?d:l?u:null,h=r?"ocf-info-item-with-icon":l?"ocf-info-item-with-image":"ocf-info-item",m=a.useMemo((()=>[{label:n.text,description:null==o?void 0:o.text,decoration:p}]),[p,n,o]);return a.createElement(i.Z,{style:l?rt.image:null},a.createElement(B.Z,{accessibilityLabel:h,containerStyle:rt.infoItemContainerStyle,items:m}))}};const ct=u.Z.create((e=>({marginBottom:{marginBottom:e.spaces.space8}}))),ut={render:function(e){var t,s;const{onNavigate:i,subtaskInputs:o}=Xe();if(void 0===(null==(t=e.value_data)||null==(s=t.static_text_data)?void 0:s.primary_text))return null;const{static_text_data:r}=e.value_data,{primary_text:l,style:c}=r;return a.createElement(U,(0,n.Z)({},l,{onNavigate:i,subtaskInputs:o},function(e){switch(e){case $e.headerTitle:return{size:"title2",weight:"bold",style:ct.marginBottom};case $e.headerSubtitle:return{color:"gray700",style:ct.marginBottom};case $e.sectionTitle:return{size:"headline1",weight:"bold",style:ct.marginBottom};case $e.detailText:return{size:"subtext2",color:"gray700",style:ct.marginBottom};default:return{size:"body",style:ct.marginBottom}}}(c)))}};var dt=s(65502);const pt=new nt({action:et,static_text:ut,boolean:tt,button:st,tweet:{render:e=>{const{value_data:t}=e,{tweet_data:s}=t;return a.createElement(dt.Z,{tweet:s.tweet})}},info_item:lt,image:it}),ht=e=>(0,Je.Z)(e).map((e=>{const[t,{type:s,value:n}]=e;return{key:t,response_data:{[s]:{result:n}}}}));function mt(e){const{children:t,onNavigate:s,subtaskId:n,subtaskInputs:i,updateFlow:o}=e,[r,l]=a.useState({}),[c,u]=a.useState({});a.useLayoutEffect((()=>{l({}),u({})}),[n]);const d=a.useCallback(((e,t={},s={})=>{o(e,{...t,component_responses:ht(r)},s)}),[o,r]),p=a.useCallback(((e,t)=>{u((s=>({...s,[e]:t})))}),[]),h=a.useCallback((e=>{u((({[e]:t,...s})=>({...s})))}),[]),m=a.useMemo((()=>({componentRegistry:pt,settings:r,subtaskId:n,callbacks:c,registerCallback:p,removeCallback:h,setSettings:l,subtaskInputs:i,updateFlow:d,onNavigate:s})),[r,n,i,c,p,h,d,s]);return a.createElement(Qe.Provider,{value:m},t)}function _t(e,t){const{callbacks:s}=a.useContext(Qe),n=s[e];return a.useCallback(((...e)=>{var s;Promise.resolve(null!=(s=null==n?void 0:n())&&s).then((s=>{s||t(...e)})).catch((()=>t(...e)))}),[n,t])}const gt=function(e){const{componentRegistry:t}=Xe(),{components:s,style:n}=e;return void 0===s||s.length<1?null:a.createElement(i.Z,{style:n},s.map(((e,s)=>{const n=null==t?void 0:t.getConfig(e.value_type);return n?a.createElement(a.Fragment,{key:s},n.render(e)):null})))};var bt=s(31165),kt=s(78705),vt=s(21783);const ft=p().d2fb334c;const yt=u.Z.create((e=>({iconContainer:{alignItems:"center",alignSelf:"stretch",display:"flex",flexGrow:1,justifyContent:"center",minWidth:e.spaces.space32},icon:{color:e.colors.brandColor,flexGrow:1,height:"1.75rem"}}))),xt=function(e){const{backButtonType:t,componentCollection:s,hideBackButton:n,hideLogo:o,onBackPress:r}=e,{center_navbar_components:l,header_components:c,left_navbar_components:u,right_navbar_components:d}=s,p=a.useMemo((()=>{const e=null==c?void 0:c[0];return"image"===(null==e?void 0:e.value_type)&&(null==e?void 0:e.value_data.image_data.image_type)===Z.__.FullBleedTop}),[c]),h=a.useMemo((()=>n||!r||void 0!==u&&u.length>0),[n,u,r]),m=a.useMemo((()=>u&&u.length>0?a.createElement(gt,{components:u}):h||!r?void 0:a.createElement(bt.Z,{backButtonType:t,onClick:r,onMedia:p})),[u,h,r,t,p]),_=a.useMemo((()=>l&&l.length>0?a.createElement(gt,{components:l}):null),[l]),g=a.useMemo((()=>a.createElement(gt,{components:d})),[d]),b=a.useMemo((()=>{if(!o&&!p&&null===_)return a.createElement(i.Z,{style:yt.iconContainer},a.createElement(vt.default,{accessibilityLabel:ft,style:yt.icon}))}),[o,p,_]);return a.createElement(kt.Z,{centeredLogo:b,leftControl:m,middleControl:_,position:p?"absolute":void 0,rightControl:g,withBackground:!1})};const wt=u.Z.create((e=>({padding:{paddingHorizontal:e.spaces.space80,paddingBottom:e.spaces.space20},paddingCompact:{paddingHorizontal:e.spaces.space32,paddingBottom:e.spaces.space20},marginTop:{marginTop:e.spaces.space20},container:{display:"flex",flexGrow:2,flexShrink:1,flexBasis:"100%",maxWidth:"600px"},contentContainer:{flexGrow:1,display:"flex"},contentContainerMargin:{marginVertical:e.spaces.space16},alignTop:{justifyContent:"flex-start"},alignCenter:{justifyContent:"center"},alignBottom:{justifyContent:"flex-end"},shadowTop:{boxShadow:e.boxShadows.xSmall},root:{flexGrow:1}}))),Ct={[Ke.TOP]:wt.alignTop,[Ke.CENTER]:wt.alignCenter,[Ke.BOTTOM]:wt.alignBottom},It=function(e){const{isModal:t}=a.useContext(c.Z),{registerCallback:s,removeCallback:n}=a.useContext(Qe),{children:o,componentCollection:r,onPrimaryAction:l,onSecondaryAction:u}=e,{backButtonType:d,hideAppBar:p,hideBackButton:h,hideLogo:m,onBackPress:_}=e,{hasHiddenContent:g,onScroll:b,onViewportSet:k}=(()=>{const[e,t]=a.useState(),[s,n]=a.useState(!1),i=a.useCallback((e=>{if(e instanceof HTMLElement){const t=Math.abs(e.scrollHeight-e.scrollTop-e.clientHeight)<2;n(!t)}}),[n]),o=a.useCallback((e=>i(e.currentTarget)),[i]);return a.useEffect((()=>(i(null==e?void 0:e.getViewport()),null==e?void 0:e.addRectChangeListener((()=>{const t=null==e?void 0:e.getViewport();i(t)})))),[e,i]),{hasHiddenContent:s,onViewportSet:t,onScroll:o}})(),{content_vertical_alignment:v=Ke.TOP}=r,f=t?wt.padding:wt.paddingCompact,y=a.useMemo((()=>{var e;const t=null==(e=r.header_components)?void 0:e[0],s="image"===(null==t?void 0:t.value_type)&&(null==t?void 0:t.value_data.image_data.image_type)===Z.__.FullBleedTop;return[wt.container,f,!s&&wt.marginTop]}),[r,f]),x=o||r.content_header_components||r.content_footer_components,w=a.useMemo((()=>[wt.contentContainer,Ct[v],!!x&&wt.contentContainerMargin]),[x,v]),C=a.useMemo((()=>[f,g&&wt.shadowTop]),[f,g]),I=a.useMemo((()=>a.createElement(gt,{components:r.pinned_footer_components,style:C})),[C,r.pinned_footer_components]);return a.useEffect((()=>(r.primary_next_identifier&&l&&s(r.primary_next_identifier,l),r.primary_skip_identifier&&u&&s(r.primary_skip_identifier,u),()=>{r.primary_next_identifier&&n(r.primary_next_identifier),r.primary_skip_identifier&&n(r.primary_skip_identifier)})),[s,n,l,u,r]),a.createElement(i.Z,{style:wt.root},p?void 0:a.createElement(xt,{backButtonType:d,componentCollection:r,hideBackButton:h,hideLogo:m,onBackPress:_}),a.createElement(Ye.l,{control:I,onScroll:b,onViewportSet:k},a.createElement(i.Z,{style:y},a.createElement(gt,{components:r.header_components}),a.createElement(i.Z,{style:w},a.createElement(gt,{components:r.content_header_components}),o,a.createElement(gt,{components:r.content_footer_components})),a.createElement(gt,{components:r.footer_components}))))};const Et=u.Z.create((e=>({root:{minHeight:`calc(${e.spaces.space64} * 4)`,paddingBottom:u.Z.iPhoneOffsetBottom}}))),St=function(e){const{isModal:t}=a.useContext(c.Z),{children:s,componentCollection:n,coverType:i,hideAppBar:o,onBackPress:r,onPrimaryAction:l,onSecondaryAction:u}=e,d=a.useMemo((()=>t?qe.CA[qe.Cg.fixed]:Et.root),[t]),p=a.useMemo((()=>"half"===i?"bottom":"full"),[i]),h=!t&&"bottom"===p;return a.createElement(Ie.Z,{enableMaskForDismiss:h,onMaskClick:r,style:d,type:p,withMask:!0},a.createElement(It,{backButtonType:"back",componentCollection:n,hideAppBar:o||h,onBackPress:r,onPrimaryAction:l,onSecondaryAction:u},s))};const Zt=(e,t,s=$e.headerTitle)=>({value_identifier:e,value_type:"static_text",value_data:{static_text_data:{primary_text:{text:t},style:s}}});function Tt(e){const{header_image:t,primary_text:s,secondary_text:n}=e,a=[];return t&&a.push(((e,t,s=Z.__.FullWidth)=>({value_identifier:e,value_type:"image",value_data:{image_data:{image:t,image_type:s}}}))("header-image",t.image,t.image_type)),a.push(Zt("heading",s.text,$e.headerTitle)),n&&a.push(Zt("subheading",n.text,$e.headerSubtitle)),a}const At=p().c3d89aca;const Ft=u.Z.create((e=>({radioContainer:{paddingHorizontal:0}}))),Pt=function(e){var t;const{choices:s,header:n,nextLink:i,onDismiss:o,onSelect:r}=e,[l,c]=a.useState(null==(t=s[0])?void 0:t.id),u=a.useMemo((()=>{var e,t,s;return{header_components:Tt(n),footer_components:[(t="primary_select_next",s={button_label:{text:null!=(e=null==i?void 0:i.label)?e:At},link:i,button_appearance:{style:Z.ZJ.Primary,preferred_size:Z.qE.Large}},{value_identifier:t,value_type:"button",value_data:{button_data:s}})],primary_next_identifier:"primary_select_next"}}),[i,n]),d=a.useCallback((()=>(r(l),!0)),[r,l]);return a.createElement(St,{componentCollection:u,coverType:"half",onBackPress:o,onPrimaryAction:d},a.createElement(He.Z,{name:"primary-selection",onChange:(e,t)=>c(t),options:s.map((({id:e,subtext:t,text:s})=>({label:s.text,value:e,description:null==t?void 0:t.text,containerStyle:Ft.radioContainer}))),value:l}))},Nt="ChoiceSelectionInput",Bt="ChoiceSelectionNextButton",Dt="ChoiceSelectionSkipButton";class Lt extends a.Component{constructor(...e){var t,s,n;super(...e),this.state={selectedChoices:null!=(t=null!=(s=(0,L.OG)(this.props.subtaskInputs,{key:"selected_choices",subtask_id:this.props.subtaskId}))?s:this.props.subtask.selected_choices)?t:[],prevSubtaskId:this.props.subtaskId,searchText:"",numToShow:null==(n=this.props.subtask.show_more)?void 0:n.initial_to_show,displayPrimarySelection:!1,primaryChoice:void 0},this._handlePrimarySelection=e=>{this.setState({primaryChoice:e,displayPrimarySelection:!1},this._handleNextButtonClick)},this._handleCancelButtonClick=()=>{const{onNavigate:e,subtask:{skip_link:t},subtaskId:s,updateFlow:n}=this.props;t&&(n(s,{link:t.link_id}),e(t))},this._handleNextButtonClick=()=>{const{onNavigate:e,subtask:{next_link:t,primary_selection:s},subtaskId:n,updateFlow:a}=this.props,{primaryChoice:i,selectedChoices:o}=this.state;void 0!==s&&void 0===i&&o.length>1?this.setState({displayPrimarySelection:!0}):t&&(a(n,{link:t.link_id,selected_choices:o,primary_choice:void 0!==s?null!=i?i:o[0]:void 0}),e(t))},this._renderShowMore=e=>{const{show_more:t}=this.props.subtask,{numToShow:s}=this.state;return void 0===t||void 0===s||s>=e.length?null:a.createElement(Me.Z,{color:"primary",label:t.text,onPress:this._handleShowMore})},this._handleShowMore=()=>{const{numToShow:e}=this.state,{show_more:t}=this.props.subtask;void 0!==t&&void 0!==e&&this.setState({numToShow:e+t.extra_to_show})},this._handleRadioChange=(e,t)=>{this.setState({selectedChoices:[t]})},this._handleSearchTextChange=e=>{this.setState({searchText:e.target.value})},this._handleSearchTextClear=()=>{this.setState({searchText:""})},this._onCheckboxChange=e=>t=>{this._handleMultiSelection(e,t)}}static getDerivedStateFromProps(e,t){return e.subtaskId!==t.prevSubtaskId?{selectedChoices:[],prevSubtaskId:e.subtaskId}:null}render(){const{onNavigate:e,passthroughOcfScreenProps:t,subtask:{choices:s,detail_text:o,header:r,next_link:l,primary_selection:c,primary_text:u,search:d,secondary_text:p,skip_link:h},subtaskInputs:m}=this.props,{displayPrimarySelection:_,searchText:g,selectedChoices:b}=this.state;return a.createElement(ue.Z,(0,n.Z)({},t,{footer:a.createElement(G,{actionDisabled:!this._verifyBothTypesValidity(),actionLabel:null==l?void 0:l.label,actionTestID:Bt,onAction:this._handleNextButtonClick,onSecondaryAction:this._handleCancelButtonClick,secondaryActionLabel:null==h?void 0:h.label,secondaryActionTestID:Dt}),header:a.createElement(ce,{header:r,onNavigate:e,primaryTextProp:u,secondaryTextProp:p,subtaskInputs:m,withHeaderImage:!0}),providePadding:!0}),d&&a.createElement(Ue.Z,{Icon:Ge.default,autoFocus:d.is_focused,isCompact:!0,onChange:this._handleSearchTextChange,onClear:this._handleSearchTextClear,placeholder:d.hint_text,style:Vt.searchBox,testID:Nt,value:g,withClearButton:!0}),a.createElement(i.Z,{style:Vt.choicesContainer},this._renderChoices()),o&&a.createElement(U,(0,n.Z)({},o,{onNavigate:e,subtaskInputs:m})),_&&c?a.createElement(Pt,{choices:null==s?void 0:s.filter((({id:e})=>b.includes(e))),header:c.header,nextLink:l,onDismiss:()=>this.setState({displayPrimarySelection:!1}),onNavigate:e,onSelect:this._handlePrimarySelection,subtaskInputs:m}):null)}_renderCheckboxQuestion(e){const{onNavigate:t,subtaskInputs:s}=this.props,{selectedChoices:o}=this.state,r=o.indexOf(e.id)>-1,l=e.text?a.createElement(U,(0,n.Z)({},e.text,{onNavigate:t,subtaskInputs:s,weight:"bold"})):null,c=e.subtext?a.createElement(U,(0,n.Z)({},e.subtext,{subtaskInputs:s})):null;return e.text?a.createElement(i.Z,{key:e.id,style:Vt.checkboxRow},a.createElement(ze.Z,{checked:r,helpText:c,label:l,onChange:this._onCheckboxChange(e.id)})):null}_renderChoices(){const{onNavigate:e,subtask:t,subtaskInputs:s}=this.props,{search:o,selection_type:r,style:l}=t,{numToShow:c,searchText:u}=this.state,{choices:d}=function(e,t){const{choices:s,search:n,sections:a}=e;if(n&&a&&a.length&&!t){const e=a.flatMap((e=>e.item_ids)).filter((e=>"string"==typeof e));if(e.length){const t=(0,We.Z)(e);return{choices:s.filter((e=>t.has(e.id))),hasMore:!0}}}if(n&&t)return function(e,t){const s=Ot(t),n=e.filter((e=>Ot(e.text.text).includes(s)));if(n.length>50)return{choices:n.slice(0,50),hasMore:!0};return{choices:n,hasMore:!1}}(s,t);return{choices:s,hasMore:!1}}(t,u),p=void 0===c?d:d.slice(0,c),h=this._renderShowMore(d);if(0===p.length&&o)return a.createElement(U,(0,n.Z)({},o.no_results_text,{onNavigate:e,subtaskInputs:s}));if("boxed"===l)return"single_select"===r?a.createElement(i.Z,{style:Vt.tileContainer},a.createElement(je.Z,{name:"single-choice",onChange:this._handleRadioChange,options:p.map((({id:e,subtext:t,text:i})=>({value:e,label:i.text,helpText:a.createElement(U,(0,n.Z)({},t,{subtaskInputs:s}))}))),value:this.state.selectedChoices[0]}),h):null;switch(r){case"multi_select":return a.createElement(a.Fragment,null,p.map((e=>this._renderCheckboxQuestion(e))),h);case"single_select":return a.createElement(a.Fragment,null,a.createElement(He.Z,{name:"single-choice",onChange:this._handleRadioChange,options:p.map((({id:e,subtext:t,text:s})=>({label:s.text,value:e,description:null==t?void 0:t.text,containerStyle:Vt.radioRow}))),value:this.state.selectedChoices[0]}),h);default:return null}}_verifyBothTypesValidity(){const{subtask:e}=this.props,{selection_type:t}=e,{selectedChoices:s}=this.state;if(e&&t){if("multi_select"===t)return this._verifyMultiChoiceValidity(s);if("single_select"===t)return 1===s.length}}_verifyMultiChoiceValidity(e){const{subtask:t}=this.props,{next_link_options:s}=t;if(s){const{max_enable_count:t,min_enable_count:n}=s,a=e.length,i=t&&a>t;return!(n&&a<n)&&!i}return!1}_handleMultiSelection(e,t){const{selectedChoices:s}=this.state;let n;n=s&&s.includes(e)?s.filter((t=>t!==e)):s.concat([e]),this.setState({selectedChoices:n})}}function Ot(e){return e.toLowerCase().normalize("NFD")}const Vt=u.Z.create((e=>({searchBox:{marginBottom:e.spaces.space16},checkboxRow:{paddingVertical:e.spaces.space12},choicesContainer:{marginBottom:e.spaces.space16},cursor:{cursor:"pointer"},tileContainer:{marginTop:e.spaces.space12},radioRow:{paddingStart:0,paddingBottom:e.spaces.space16,paddingEnd:e.spaces.space16}})));var Rt=s(24949),Mt=s(39581),Ut=s(67935),zt=s(99629),jt=s(57659);const Ht=e=>(t,s)=>{if("single_sign_on"===Gt(t,s))return;const n=s.location.query[e];return Array.isArray(n)?n[0]:n},Gt=(e,t)=>t.flowName||t.location.pathname.slice(t.match.path.length),Wt=Ht("country_code"),qt=(0,Rt.P1)(($t="input",Kt={},(e,t)=>t.location.state&&t.location.state[$t]||Kt),Ht("input_flow_data"),L.Rs);var $t,Kt;const Yt=Ht("return_path"),Qt=Ht("is_native"),Xt=Ht("test_country_code"),Jt=Ht("target_user_id"),es=(0,Rt.P1)(((e,t)=>Ht("overrides")(e,t)),(e=>(0,L.jb)(e))),ts=(0,De.Z)().propsFromState((()=>({currentSubtask:F.jv,previouslySubmittedSubtaskId:F.zj,countryCode:Wt,debugOverrides:es,isNative:Qt,testCountryCode:Xt,flowName:Gt,inputFlowData:qt,returnPath:Yt,subtasks:F.B7,flowToken:F.cu,fetchStatus:F.UD,previousNavigableSubtaskId:F.Du,subtaskInputs:F.$B,failureMessage:F.or,shouldAbort:F.W2,shouldEndFlow:F.uz,startLocation:F.Lg,submitFailed:F.li,targetUserId:Jt,loginReturnPath:Ut.V_,language:Ut.VT}))).propsFromActions((({ocfModule:e})=>({addToast:zt.fz,callInteractiveSpinnerPath:F.WP,callOnboardingPath:F.R2,clearFlow:e.clearFlow,createLocalApiErrorHandler:(0,g.createLocalApiErrorHandlerWithContextFactory)("OCF_FLOW"),removeContacts:F.tY,fetchTemporaryPassword:F.n8,fetchUsers:jt.ZP.fetchMany,navigateSubtask:F.z_,startFlow:e.startFlow,submitFlow:e.submitFlow,updateFlow:e.updateFlow,googleAnalyticsPageView:Mt.XB,googleAnalyticsSendEvent:Mt.HT,verifyCredentials:Ut.TK}))).withAnalytics({page:"onboarding"});var ss=s(60673);const ns=e=>(t,s,{api:n})=>n.Contacts.uploadAddressBook(e),as=(0,De.Z)().propsFromActions((()=>({createLocalApiErrorHandler:(0,g.createLocalApiErrorHandlerWithContextFactory)("CONTACTS_SYNC"),uploadAddressBook:ns})));class is extends a.Component{constructor(...e){super(...e),this._handleCtaClick=e=>{const{onNavigate:t,subtaskId:s,updateFlow:n}=this.props;n(s,{link:e.link_id}),t(e)},this._handlePrimaryActionClick=()=>{try{window.navigator.contacts.select(["name","email","tel"],{multiple:!0}).then(this._handleContactResults)}catch(e){(0,I.ZP)(e),this._handleSecondaryActionClick()}},this._handleContactResults=e=>{const{analytics:t,createLocalApiErrorHandler:s,uploadAddressBook:n}=this.props,a=e.map((({email:e,name:t,tel:s})=>({name:t[0]||"",email_addresses:e,phone_numbers:s})));if(0===a.length)return t.scribeAction("cancel");t.scribe({action:"success",data:{event_value:a.length}}),n({contacts:a}).catch(s()),this._handleCtaClick(this.props.subtask.next_link)},this._handleSecondaryActionClick=()=>{const{subtask:{skip_link:e}}=this.props;e&&this._handleCtaClick(e)}}componentDidMount(){"contacts"in navigator&&"ContactsManager"in window||this._handleSecondaryActionClick()}render(){const{onNavigate:e,passthroughOcfScreenProps:t,subtask:s,subtaskInputs:i}=this.props,o=s.detail_text?a.createElement(U,(0,n.Z)({},s.detail_text,{onNavigate:e,subtaskInputs:i})):null;return a.createElement(ue.Z,(0,n.Z)({hideLogo:!0},t),a.createElement(ye.Z,{actionLabel:s.next_link.label||"",footer:o,headline:s.primary_text||"",onAction:this._handlePrimaryActionClick,onClose:h.Z,onTertiaryAction:this._handleSecondaryActionClick,subtext:"",tertiaryActionLabel:(s.skip_link||{}).label,withCloseButton:!1}))}}const os=(0,ss.Z)(as(is),{element:"contacts_sync"});var rs=s(7333);const ls=(e,t)=>Array.isArray(t.location.query.error)?t.location.query.error[0]:t.location.query.error,cs=(e,t)=>!!t.location.query.state,us=(0,De.Z)().propsFromState((()=>({importError:ls,startImport:cs}))).propsFromActions((()=>({createLocalApiErrorHandler:(0,g.createLocalApiErrorHandlerWithContextFactory)("EMAIL_CONTACTS_SYNC"),importStatus:F.YU,scribeAction:Mt.n9,syncContacts:F.Wl}))),ds=p().cea71014;class ps extends a.Component{constructor(e){super(e),this._startContactImports=e=>{this._scribeOAuthAction("accepted");const{createLocalApiErrorHandler:t,syncContacts:s}=this.props;s(e).then((e=>this._pollImportStatus())).catch((e=>{t()(e),this.setState({importFinished:!0})}))},this._handlePrimaryActionClick=()=>{const{subtask:{authorization_url:e,open_in_new_tab:t}}=this.props;if(t){const t=`width=500,height=500,top=0,left=${window.innerWidth-500},toolbar=no,location=yes`;window.open(e,"twitter_oauth",t).focus()}else S.ZP.navigateTo(e)},this._handleTertiaryActionClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props,{skip_link:a}=t;n(s,{link:a.link_id}),e(a)},this._scribeOAuthAction=e=>{const{scribeAction:t}=this.props;t({page:"onboarding",section:"email_contacts_sync",component:"oauth_prompt",element:"permission",action:e})},this._handleEvent=e=>{if(e.origin===`https://${window.location.hostname}`){const t={callback_url:`https://${window.location.hostname}${window.location.pathname}`,...e.data};!t.error&&t.state&&this._startContactImports(t)}},this._pollImportStatus=(e=1)=>{if(e>10)this.setState({importFinished:!0});else{const{createLocalApiErrorHandler:t,importStatus:s}=this.props;this._timer=setTimeout((()=>{s().then((t=>{switch(t.status){case Z.$T.Success:this.setState({importFinished:!0});break;case Z.$T.NotFound:this._pollImportStatus(e+1);break;default:this.setState({importFinished:!0})}})).catch((e=>{t()(e),this.setState({importFinished:!0})}))}),1e3)}},this.state={importFinished:void 0},this._navigating=!1,window.addEventListener("message",this._handleEvent,!1)}componentDidMount(){const{importError:e,location:t,onNavigate:s,passthroughOcfScreenProps:{history:n},startImport:a,subtask:i,subtaskId:o,updateFlow:r}=this.props;this._showLoadingSpinner=a;const{decline_link:l}=i;if("access_denied"===e)this._scribeOAuthAction("declined"),l&&(r(o,{link:l.link_id}),s(l));else if(a){const{error:e,state:s}=t.query,a={callback_url:`https://${window.location.hostname}${t.pathname}`};e&&"string"==typeof e&&(a.error=e),s&&"string"==typeof s&&(a.state=s),n&&n.replace(t.pathname),this._startContactImports(a)}}componentWillUnmount(){this._timer&&clearTimeout(this._timer),window.removeEventListener("message",this._handleEvent,!1)}componentDidUpdate(){const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props,{importFinished:a}=this.state,{next_link:i}=t;!this._navigating&&a&&(this._navigating=!0,n(s,{link:i.link_id}),e(i))}render(){const{errorDialog:e,onNavigate:t,passthroughOcfScreenProps:s,subtask:i,subtaskInputs:o}=this.props,{accept_text:r,detail_text:l,primary_text:c,secondary_text:u,skip_link:d}=i,p=a.createElement(U,(0,n.Z)({},c,{nativeID:K.Q_,onNavigate:t,subtaskInputs:o})),_=u?a.createElement(U,(0,n.Z)({},u,{onNavigate:t,subtaskInputs:o})):null,g=l?a.createElement(U,(0,n.Z)({},l,{onNavigate:t,subtaskInputs:o})):null;return this._showLoadingSpinner?a.createElement(m.Z,{fetchStatus:P.ZP.LOADING,loadingMessage:ds,onRequestRetry:h.Z,render:rs.Z,retryable:!1}):a.createElement(ue.Z,(0,n.Z)({hideLogo:!0},s),a.createElement(ye.Z,{actionLabel:r,footer:g,graphic:vt.default,graphicStyle:hs.twitterIcon,headline:p,onAction:this._handlePrimaryActionClick,onClose:h.Z,onTertiaryAction:this._handleTertiaryActionClick,subtext:_,tertiaryActionLabel:d.label,withCloseButton:!1}),e)}}const hs=u.Z.create((e=>({twitterIcon:{color:e.colors.brandColor}}))),ms=us(ps);var _s=s(94836);const gs=(0,De.Z)().propsFromState((()=>({navigationContext:F.b,verificationSendFailureMessage:F.aR}))).propsFromActions((()=>({createLocalApiErrorHandler:(0,g.createLocalApiErrorHandlerWithContextFactory)("OCF_FLOW_EMAIL_VERIFICATION"),getVerificationStatus:F.Ai,verifyIdentifier:F.if}))),bs="email";class ks extends a.Component{constructor(e){super(e),this._sendEmailVerificationRequest=()=>{const{createLocalApiErrorHandler:e,onNavigate:t,subtask:s,subtaskInputs:n,verifyIdentifier:a}=this.props,i=s.email&&(0,L.Ds)(n,s.email)||void 0,o=s.name&&(0,L.Ds)(n,s.name)||void 0;return a({email:i,display_name:o}).then((e=>{this.setState({email:i})})).catch((n=>{const{flowName:a,verificationSendFailureMessage:i}=this.props;e(x(a,i||f))(n),t(s.fail_link)}))},this._handleCodeUpdated=e=>{this.setState({pinCode:e.target.value})},this._startStatusPolling=()=>{const{createLocalApiErrorHandler:e,getVerificationStatus:t,subtask:s,subtaskInputs:n}=this.props,a=s.email.subtask_data_reference,i=a?n[a.subtask_id][a.key]:void 0;this._timer=setTimeout((()=>{t({email:i}).then((e=>{e.verified?(this.setState({pinCode:e.pin_code}),this._clearTimer(),this._handleDoneButtonClick()):(this._clearTimer(),this._startStatusPolling())})).catch((t=>{e()(t),this._clearTimer(),this._startStatusPolling()}))}),1e3)},this._clearTimer=()=>{this._timer&&clearTimeout(this._timer)},this._handleDoneButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props,{email:a,pinCode:i}=this.state;n(s,{code:i,email:a,link:t.next_link.link_id}),e(t.next_link)};const{subtaskId:t,subtaskInputs:s}=e,n=(0,L.OG)(s,{key:bs,subtask_id:t},"")||"";this.state={email:n,pinCode:""}}componentDidMount(){const{subtask:{verification_status_polling_enabled:e}}=this.props;return e&&this._startStatusPolling(),this._sendEmailVerificationRequest()}componentWillUnmount(){this._clearTimer()}render(){const{onNavigate:e,passthroughOcfScreenProps:t,subtask:s,subtaskInputs:i}=this.props,{next_link:o,primary_text:r,secondary_text:l}=s,c=a.createElement(U,(0,n.Z)({},s.detail_text,{color:"link",onNavigate:e,style:vs.detailLink,subtaskInputs:i}));return a.createElement(ue.Z,(0,n.Z)({},t,{footer:a.createElement(G,{actionDisabled:!this.state.pinCode,actionLabel:null==o?void 0:o.label,onAction:this._handleDoneButtonClick}),header:a.createElement(ce,{onNavigate:e,primaryTextProp:r,secondaryTextProp:l,subtaskInputs:i,withHeaderImage:!0}),providePadding:!0}),a.createElement(_s.Z,{autoFocus:!0,helperText:s.detail_text&&c,label:s.hint_text,name:"verfication_code",onChange:this._handleCodeUpdated,style:ee.formTextInput,value:this.state.pinCode}),this.props.errorDialog)}}const vs=u.Z.create((e=>({detailLink:{marginTop:e.spaces.space16}}))),fs=gs(ks);var ys=s(34509),xs=s(32307);const ws="ocfEnterDateNextLink",Cs="ocfEnterDateSkipLink",Is={day:void 0,month:void 0,year:void 0};class Es extends a.Component{constructor(e){super(e),this._handleDateChange=e=>{this.setState({date:e})},this._isCompleteDate=e=>!!(e&&e.year&&e.month&&e.day),this._isDateEmpty=()=>{const{date:e}=this.state;return(0,xs.Z)(e,Is)},this._meetsMinYearRequirement=e=>{var t,s;const{subtask:{valid_interval:n}}=this.props;return!(null!=n&&null!=(t=n.min)&&t.year&&!(e.year&&e.year>=(null==n||null==(s=n.min)?void 0:s.year)))},this._meetsMaxYearRequirement=e=>{var t,s;const{subtask:{valid_interval:n}}=this.props;return!(null!=n&&null!=(t=n.max)&&t.year&&!(e.year&&e.year<=(null==n||null==(s=n.max)?void 0:s.year)))},this._isDateValid=()=>{const{date:e}=this.state;return this._isCompleteDate(e)&&this._meetsMinYearRequirement(e)&&this._meetsMaxYearRequirement(e)},this._dateErrorMessage=()=>{const{date:e}=this.state;if(!this._isCompleteDate(e))return;const{subtask:{max_date_error:t,min_date_error:s}}=this.props,n=this._meetsMinYearRequirement(e);return this._meetsMaxYearRequirement(e)?n||null==s?void 0:s.text:null==t?void 0:t.text},this._handleDoneButtonClick=()=>{const{onNavigate:e,subtask:{next_link:t},subtaskId:s,updateFlow:n}=this.props,{date:a}=this.state;a&&this._isDateValid()&&(n(s,{date:a,link:t.link_id}),e(t))},this._handleSkipButtonClick=()=>{const{onNavigate:e,subtask:{skip_link:t},subtaskId:s,updateFlow:n}=this.props;t&&n(s,{link:t.link_id}),t&&e(t)};const{subtaskId:t,subtaskInputs:s}=this.props,n=(0,L.OG)(s,{key:"date",subtask_id:t},void 0)||Is;this.state={date:n}}render(){var e,t;const{errorDialog:s,onNavigate:i,passthroughOcfScreenProps:o,subtask:r,subtaskInputs:l}=this.props,{detail_text:c,hint_text:u,next_link:d,selectable_interval:p,skip_link:h}=r,{date:m={}}=this.state;return a.createElement(ue.Z,(0,n.Z)({},o,{footer:a.createElement(G,{actionDisabled:!this._isDateValid(),actionLabel:h&&this._isDateEmpty()||null==d?void 0:d.label,actionTestID:ws,onAction:this._handleDoneButtonClick,onSecondaryAction:this._handleSkipButtonClick,secondaryActionLabel:h&&this._isDateEmpty()?null==h?void 0:h.label:void 0,secondaryActionTestID:Cs}),header:a.createElement(ce,{header:r.header,onNavigate:i,subtaskInputs:l,withHeaderImage:!0}),providePadding:!0}),a.createElement(ys.Z,{autofocus:!0,day:m.day,errorMessage:this._dateErrorMessage(),label:u,maxSelectableYear:null==p||null==(e=p.max)?void 0:e.year,minSelectableYear:null==p||null==(t=p.min)?void 0:t.year,month:m.month,onChange:this._handleDateChange,year:m.year}),c?a.createElement(U,(0,n.Z)({},c,{color:"gray700",onNavigate:i,subtaskInputs:l})):null,s)}}var Ss=s(35193);const Zs=(e,t)=>t.module.selectEntitiesWithFetchStatus(e),Ts=(0,De.Z)().propsFromState((()=>({validity:Zs}))).propsFromActions((({module:e})=>({clearValidity:e.clear,createLocalApiErrorHandler:(0,g.createLocalApiErrorHandlerWithContextFactory)("VALIDITY_FIELD_CONTEXT"),validate:e.validate})));class As extends a.Component{constructor(e,t){super(e,t),this._setInputRef=e=>{this._input=e},this._handleValueChange=e=>{const{onChange:t,validationParams:s}=this.props,n=e.target.value.trim();this._validateDebounced({value:n,...s}),this.setState({value:n}),t&&t(e)},this._getIsValid=(e,t)=>!!(t&&e[t]&&e[t].valid);const s=e.defaultValue||"";this.state={value:s,isValid:this._getIsValid(e.validity,s)},this._validateDebounced=(0,Ss.Z)((({value:e,...t})=>this.props.validate(e,t).catch(this.props.createLocalApiErrorHandler())),500)}componentWillUnmount(){this.props.clearValidity(),this._validateDebounced.clear(),this.props.onRef(null)}componentDidMount(){const{defaultValue:e,validationParams:t}=this.props;e&&this._validateDebounced({value:e,...t}),this.props.onValidityChange(this.state.isValid),this.props.onRef({clear:()=>this.clear(),focus:()=>this.focus(),isValid:()=>this.isValid(),getValue:()=>this.getValue()})}UNSAFE_componentWillUpdate(e,t){const{validity:s}=this.props,{value:n}=this.state;if(s!==e.validity||n!==t.value){const s=this._getIsValid(e.validity,t.value);this.state.isValid!==s&&this.setState({isValid:s})}}componentDidUpdate(e,t){const{value:s}=this.state,n=t.isValid!==this.state.isValid,a=!(0,xs.Z)(e.validationParams,this.props.validationParams);n?this.props.onValidityChange(this.state.isValid):s&&a&&(this.props.clearValidity(),this._validateDebounced({value:s,...this.props.validationParams}))}render(){const{autoComplete:e,autoFocus:t,editable:s,label:n,name:i,style:o,type:r,validity:l}=this.props,{value:c}=this.state,u=c&&l[c]?l[c].errorMessage:"";return a.createElement(_s.Z,{autoComplete:e,autoFocus:t,editable:s,errorText:u,invalid:!!u,label:n,name:i,onChange:this._handleValueChange,ref:this._setInputRef,style:o,type:r,value:this.state.value})}clear(){this.setState({value:"",isValid:!1})}isValid(){return this.state.isValid}getValue(){return this.state.value}focus(){this._input&&this._input.focus()}}As.defaultProps={label:""};const Fs=Ts(As);var Ps=s(60917),Ns=s.n(Ps),Bs=s(49461),Ds=s(29122),Ls=s(91191);const Os=e=>({valid:!0});function Vs(e={}){const{localValidator:t=Os,...s}=e,n=(0,Ds.ZP)({customActions:{clear:{reducer:(e,t)=>({})}},...s});n.clear=()=>e=>e({type:n.customActionTypes.clear.SUCCESS}),n.validate=(e,s)=>a=>{const i=t(e,s);return i.valid?a(n.fetchOneIfNeeded(e,s)):(a(n.add({[e]:i})),Promise.resolve())};return n.selectEntitiesWithFetchStatus=(0,Rt.P1)(n.selectAll,(e=>n.selectState(e).fetchStatus||Ns()),((e,t)=>(0,Bs.Z)(t,((t,s)=>{const n=e[s]||{};return{...n,valid:!!n.valid||t===P.ZP.FAILED,isLoading:t===P.ZP.LOADING}})))),Ls.Z.register(n)}const Rs=new RegExp("^[a-zA-Z0-9_\\-+\\.!\\&]+@(?:[a-zA-Z0-9\\-_]+\\.)+[a-zA-Z]{2,63}$"),Ms=p().hc72e1fc,Us=Vs({namespace:"emailValidity",fetchOneContext:"FETCH_EMAIL_VALIDITY",fetchOneEndpoint:e=>e.Validity.isEmailAvailable,fetchOneParams:([e],t)=>({email:e,...t}),localValidator:e=>{const t=Rs.test(e);return{errorMessage:Ms,valid:t}}});var zs=s(13980);const js={accessibilityLabel:zs.string,accessibilityLiveRegion:(0,zs.oneOf)(["assertive","none","polite"]),style:zs.any},Hs=(zs.string,zs.bool,zs.string,zs.bool,zs.string,zs.string.isRequired,zs.func,zs.func.isRequired,zs.func.isRequired,zs.string,zs.func.isRequired,zs.func.isRequired,zs.object.isRequired,zs.func.isRequired,zs.object.isRequired,e=>{const{onRef:t,...s}=e;return a.createElement(Fs,(0,n.Z)({module:Us,onRef:t,type:"email"},s))});var Gs=s(2520),Ws=s(44573);const qs=p().c52be452,$s=p().cfd2f35e,Ks=p().gea6cc1a,Ys=p().i769e50a,Qs=p().ec129eb6,Xs=p().f1b5048a,Js=p().deaf5b16;class en extends a.Component{constructor(...e){super(...e),this.state={showRemoveContactsDialog:!1,disableRemoveContactsButton:!1},this._handleRemoveContactsClick=()=>{this.setState({showRemoveContactsDialog:!0})},this._handleRemoveContactsConfirm=()=>{this.setState({showRemoveContactsDialog:!1}),this._handleRemoveContacts()},this._handleRemoveContacts=()=>{const{addToast:e,removeContacts:t}=this.props;t&&t().then((()=>{this.setState({disableRemoveContactsButton:!0}),e({text:Qs,withClearButton:!0})})).catch((()=>{e({action:{label:Js,onAction:this._handleRemoveContacts},text:Xs,withAutoDismiss:!0})}))},this._handleRemoveContactsCancel=()=>{this.setState({showRemoveContactsDialog:!1})}}render(){var e;const{onNavigate:t,removeContactsSetting:s,subtaskInputs:o}=this.props,{disableRemoveContactsButton:r}=this.state;return a.createElement(i.Z,null,a.createElement(U,(0,n.Z)({},s.primary_text,{onNavigate:t,style:tn.header,subtaskInputs:o})),a.createElement(U,(0,n.Z)({},s.secondary_text,{color:"gray700",onNavigate:t,size:"subtext2",style:tn.subtext,subtaskInputs:o})),a.createElement(i.Z,null,null!=(e=s.value_data)&&e.action_data?a.createElement(D.ZP,{disabled:r,onPress:this._handleRemoveContactsClick,type:"destructiveText"},s.value_data.action_data.link.label):null,this._maybeRenderRemoveContactsDialog()))}_maybeRenderRemoveContactsDialog(){return this.state.showRemoveContactsDialog?a.createElement(l.Z,{cancelButtonLabel:$s,confirmButtonLabel:qs,headline:Ks,onCancel:this._handleRemoveContactsCancel,onConfirm:this._handleRemoveContactsConfirm,onMaskClick:this._handleRemoveContactsCancel,text:Ys}):null}}const tn=u.Z.create((e=>({header:{marginTop:e.spaces.space12,marginBottom:e.spaces.space12},subtext:{marginBottom:e.spaces.space20}}))),sn=en;var nn=s(70971);const an=p().d5568440,on=Vs({namespace:"passwordValidity",fetchOneContext:"FETCH_PASSWORD_VALIDITY",fetchOneEndpoint:e=>e.Validity.fetchPasswordStrength,fetchOneParams:([e],t)=>({password:e,...t}),localValidator:(e,t)=>{const s=!(!t||!t.username)&&e===t.username,n=e.length>=nn.l,a=e.length<=nn.E;let i=an;return n?a||(i=g.NEW_PASSWORD_LONG):i=g.NEW_PASSWORD_SHORT,{errorMessage:!s&&n&&a?void 0:i,valid:n&&a&&!s}}}),rn=(0,De.Z)().propsFromState((()=>({validityMap:on.selectEntitiesWithFetchStatus}))).propsFromActions((()=>({clearPasswordValidity:on.clear,createLocalApiErrorHandler:(0,g.createLocalApiErrorHandlerWithContextFactory)("PASSWORD_FIELD_CONTEXT"),validator:on.validate}))).withAnalytics({page:"onboarding",component:"password_entry"}),ln=p().dec3c9b8;class cn extends a.Component{constructor(e){super(e),this._validate=(e,t)=>{this.props.validator(e,t).catch(this.props.createLocalApiErrorHandler()).then(this._onValidationUpdated(e))},this._validateDebounced=(0,Ss.Z)(this._validate,500),this._onValidationUpdated=e=>()=>{const{analytics:t,customValidator:s,onPasswordValidated:n,validityMap:a}=this.props;let{valid:i=!1}=e&&a[e]?a[e]:{};s&&"string"==typeof e&&0===e.length&&(i=s().valid),this.setState({valid:i}),t.scribe({element:"entered_password",action:i?"valid":"invalid"}),n(i)},this._renderFormTextInput=()=>{const{autoComplete:e,autoFocus:t,customValidator:s,helperText:n,label:i,onSubmitEditing:o,validityMap:r}=this.props,{password:l,revealed:c}=this.state;let{valid:u}=this.state,{errorMessage:d=""}=r[l]||{};return s&&0===d.length&&(d=s().errorMessage,u=s().valid),a.createElement(_s.Z,{autoComplete:e,autoFocus:t,errorText:d,helperText:n,invalid:!u,label:i||ln,name:"password",onChange:this._handlePasswordUpdated,onSubmitEditing:u?o:void 0,showPasswordVisibilityIcon:!0,style:ee.formTextInput,type:c?"text":"password",value:l})},this._handleVisibilityToggle=()=>{this.setState({revealed:!this.state.revealed})},this._handlePasswordUpdated=e=>{const{onPasswordChange:t,skipPasswordValidation:s,userIdentifier:n}=this.props,a=e.target.value;s||this._validateDebounced(a,{username:n}),this.setState({password:a}),t(a)};const{defaultValue:t}=e;this.state={revealed:!1,password:t||"",valid:!0}}componentWillUnmount(){this.props.clearPasswordValidity(),this._validateDebounced.clear()}render(){const{style:e,userIdentifier:t}=this.props;return a.createElement(i.Z,{style:[ee.formTextInput,e]},t?a.createElement("input",{name:"username",type:"hidden",value:t}):null,this._renderFormTextInput())}}cn.defaultProps={autoComplete:"on",onPasswordChange:h.Z,onPasswordValidated:h.Z,skipPasswordValidation:!1};const un=rn(cn),dn=u.Z.create((e=>({textField:{width:"100%"},textFieldDetails:{marginBottom:e.spaces.space4}}))),pn=({autoComplete:e,autoFocus:t=!1,onChange:s,onNavigate:i,onSubmitEditing:o,passwordProps:r,style:l,subtaskInputs:c,textField:u})=>{const d=a.useCallback((e=>s(e.target.value)),[s]);if(!u)return null;const{content_type:p,detail_text:m,hint_text:_}=u,g=m?a.createElement(U,(0,n.Z)({},m,{color:"gray700",onNavigate:i,style:dn.textFieldDetails,subtaskInputs:c})):null;var b;return p===Z.Ae.Password||p===Z.Ae.NewPassword?a.createElement(un,(0,n.Z)({},r,{autoComplete:e||(p===Z.Ae.Password?"current-password":"new-password"),autoFocus:t,helperText:g,label:_||"",onPasswordChange:s,onPasswordValidated:null!=(b=null==r?void 0:r.onPasswordValidated)?b:h.Z,onSubmitEditing:o,style:[ee.formTextInput,dn.textField,l]})):a.createElement(_s.Z,{autoComplete:null!=e?e:"on",autoFocus:t,helperText:g,label:_||"",name:"text",onChange:d,onSubmitEditing:o,style:[ee.formTextInput,dn.textField,l]})},hn=p().dd4a83a6;class mn extends a.Component{constructor(e){super(e),this._handleActionClick=()=>{var e,t;const{onNavigate:s,settingValue:n}=this.props,a=null==(e=n.value_data)||null==(t=e.action_data)?void 0:t.link;a&&s(a)},this._handleButtonNavigation=(e,t)=>{const{onNavigate:s,updateFlow:n}=this.props;t===Z.ZF.NextButton&&(null==n||n(e)),s&&e&&s(e)},this._getSettingValueFromSubtaskInputs=e=>{const{subtaskId:t,subtaskInputs:s}=this.props,{value_identifier:n,value_type:a}=e,i=((0,L.OG)(s,{key:Z.Xb,subtask_id:t},[])||[]).find((e=>e.key===n));let o;var r;i&&(0,L._w)(a)&&(o=null==(r=i.response_data.boolean_data)?void 0:r.result);return o},this._handleSettingGroupClick=()=>{const{onSettingGroupClick:e,settingValue:t}=this.props;e&&e(t)},this._handleSettingToggle=()=>{const{onSettingToggle:e,settingValue:t}=this.props,{value_identifier:s}=t;s&&(this.setState({...this.state,[s]:!this.state[s]}),e&&e(t))},this._handleSettingTextChange=e=>{const{onSettingTextChanged:t,settingValue:s}=this.props;null==t||t(s,e)},this._handleTextFieldOnEditingSubmit=()=>{const{nextLink:e,onNavigate:t,updateFlow:s}=this.props;e&&(null==s||s(e),t(e))},this._addToast=e=>{this.props.addToast&&this.props.addToast(e)},this._getButtonDisplayType=e=>{switch(e){case Z.ZF.GoogleSSOButton:return Z.GN.GoogleSSO;case Z.ZF.AppleSSOButton:return Z.GN.AppleSSO;default:return Z.GN.Default}};const{settingValue:t}=e,{value_data:s,value_identifier:n,value_type:a}=t;if(n&&(0,L._w)(a)){let e=this._getSettingValueFromSubtaskInputs(t);var i;if(void 0===e)e=null==s||null==(i=s.boolean_data)?void 0:i.initial_value;this.state={[n]:e}}}render(){const{primary_text:e,secondary_text:t,toggle_wrapper:s,value_type:n}=this.props.settingValue,o=()=>{switch(n){case Z.h0.Action:return this._renderAction();case Z.h0.Boolean:case Z.h0.PreciseLocation:return this._renderSettingOption();case Z.h0.SettingsGroup:return this._renderSettingsGroup();case Z.h0.StaticText:return this._renderStaticText();case Z.h0.TextField:return this._renderTextField();case Z.h0.DestructiveAction:return this._renderDestructiveAction();case Z.h0.Separator:return this._renderSeparator();case Z.h0.Button:return this._renderButton();case Z.h0.Tweet:return this._renderTweet();default:return null}};return a.createElement(a.Fragment,null,(e||t)&&(()=>{switch(n){case Z.h0.Action:case Z.h0.TextField:case Z.h0.DestructiveAction:case Z.h0.Separator:case Z.h0.Button:case Z.h0.Tweet:return this._renderStaticText();default:return a.createElement(a.Fragment,null)}})(),s?a.createElement(i.Z,{style:_n.tweetDisclosure},a.createElement(Gs.Z,{label:hn},o())):o())}_renderStaticText(){var e,t;const{onNavigate:s,settingValue:o,subtaskInputs:r}=this.props,{primary_text:l,secondary_text:c}=o,u=(null==(e=o.value_data)||null==(t=e.static_text_data)?void 0:t.primary_text)||null;return a.createElement(i.Z,{style:l&&!u&&_n.header},l&&!u?a.createElement(U,(0,n.Z)({},l,{onNavigate:s,size:"headline1",subtaskInputs:r,weight:"bold"})):null,c||u?a.createElement(U,(0,n.Z)({},c||u,{color:"gray700",onNavigate:s,size:"body",style:_n.secondaryText,subtaskInputs:r})):null)}_renderTextField(){const{onNavigate:e,settingValue:t,subtaskInputs:s}=this.props,{value_data:n,value_identifier:i}=t;if(null==n||!n.text_field)return null;const o=i===Z.ZF.UserIdentifier;return a.createElement(pn,{autoComplete:o?"username":void 0,onChange:this._handleSettingTextChange,onNavigate:e,onSubmitEditing:this._handleTextFieldOnEditingSubmit,subtaskInputs:s,textField:n.text_field})}_renderDestructiveAction(){const{onNavigate:e,removeContacts:t,settingValue:s,subtaskInputs:n}=this.props;return a.createElement(i.Z,{style:{marginBottom:u.Z.theme.spaces.space16}},a.createElement(sn,{addToast:this._addToast,onNavigate:e,removeContacts:t,removeContactsSetting:s,subtaskInputs:n}))}_renderSeparator(){var e;const{onNavigate:t,settingValue:s,subtaskInputs:n}=this.props,{value_data:i}=s;return a.createElement(oe,{label:null==i||null==(e=i.separator)?void 0:e.label,onNavigate:t,subtaskInputs:n})}_renderAction(){var e,t;const{onNavigate:s,settingValue:o,subtaskInputs:r}=this.props,l=null==(e=o.value_data)||null==(t=e.action_data)?void 0:t.link.label;return a.createElement(i.Z,null,a.createElement(U,(0,n.Z)({},o.primary_text,{onNavigate:s,style:_n.header,subtaskInputs:r})),a.createElement(U,(0,n.Z)({},o.secondary_text,{color:"gray700",onNavigate:s,size:"subtext2",subtaskInputs:r})),l?a.createElement(i.Z,null,a.createElement(D.ZP,{onPress:this._handleActionClick,type:"primaryText"},l)):null)}_renderButton(){const{settingValue:e,subtaskId:t,subtaskInputs:s}=this.props,{value_data:n,value_identifier:i}=e;if(null==n||!n.button)return null;const{navigation_link:o}=n.button,r=(null==o?void 0:o.link_type)===Z.Iq.ChromelessWeb;return a.createElement(re,{button:n.button,displayType:this._getButtonDisplayType(i),link:r&&null!=o&&o.url?{external:!0,pathname:o.url}:void 0,onNavigate:()=>this._handleButtonNavigation(o,i),subtaskId:t,subtaskInputs:s})}_renderTweet(){var e,t;const{settingValue:s}=this.props,{value_data:n}=s;return null!=n&&null!=(e=n.tweet_data)&&e.tweet?a.createElement(Ws.Z,{tweet:null==(t=n.tweet_data)?void 0:t.tweet}):null}_renderSettingOption(){const{onNavigate:e,settingValue:t,showDividers:s,subtaskInputs:o}=this.props,{primary_text:r,secondary_text:l,value_identifier:c}=t;return a.createElement(i.Z,{accessibilityRole:"label",focusable:!0,style:[ee.option,s&&_n.optionDivider]},a.createElement(i.Z,{style:ee.checkboxText},a.createElement(U,(0,n.Z)({},r,{onNavigate:e,subtaskInputs:o})),l?a.createElement(U,(0,n.Z)({},l,{color:"gray700",onNavigate:e,size:"subtext2",style:_n.secondaryText,subtaskInputs:o})):null),c?a.createElement(i.Z,null,a.createElement(ze.Z,{checked:this.state[c],onChange:this._handleSettingToggle})):null)}_renderSettingsGroup(){var e,t;const{onNavigate:s,settingValue:o,subtaskInputs:r}=this.props,{primary_text:l,secondary_text:c,value_data:u}=o,d=null==u||null==(e=u.settings_group_data)?void 0:e.settings,p=null==u||null==(t=u.settings_group_data)?void 0:t.status_text_quantity_pairs;return a.createElement(i.Z,{accessibilityRole:"button",onClick:this._handleSettingGroupClick,style:_n.settingGroup},a.createElement(U,(0,n.Z)({},l,{onNavigate:s,subtaskInputs:r})),d&&p?this._renderQuantityStatus(d,p):null,c?a.createElement(U,(0,n.Z)({},c,{color:"gray700",onNavigate:s,size:"subtext2",subtaskInputs:r})):null)}_renderQuantityStatus(e,t){const{onNavigate:s,subtaskInputs:i}=this.props,o=e.reduce(((e,t)=>e+(this._getSettingValueFromSubtaskInputs(t)?1:0)),0);let r;return t.forEach((e=>{o>=e.threshold&&(r=a.createElement(U,(0,n.Z)({},e.text,{color:"gray700",onNavigate:s,size:"subtext2",style:_n.quantityStatusText,subtaskInputs:i})))})),r}}const _n=u.Z.create((e=>({header:{marginTop:e.spaces.space20},secondaryText:{marginTop:e.spaces.space12},quantityStatusText:{marginTop:e.spaces.space2,marginBottom:e.spaces.space12},optionDivider:{paddingBottom:e.spaces.space12,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},settingGroup:{marginTop:e.spaces.space12},textField:{width:"100%"},textFieldDetails:{marginBottom:e.spaces.space4},tweetDisclosure:{marginTop:e.spaces.space12,marginBottom:e.spaces.space12}}))),gn="ocfEnterEmailNextLink",bn="ocfEnterEmailSkipLink";class kn extends a.Component{constructor(e){super(e),this._renderEmailTextField=()=>a.createElement(Hs,{autoComplete:"email",autoFocus:!0,defaultValue:this.state.email,label:this.props.subtask.hint_text,name:"email",onRef:this._handleSetInputRef,onValidityChange:this._handleUpdateValidity,style:vn.emailTextField}),this._getInitialSettingValues=(e,t,s)=>{var n;return null==(n=e.settings)?void 0:n.map((e=>{var n,a,i,o;const r=e.value_identifier;if(void 0===r)return{};const l=null!=(n=null==(a=e.value_data)||null==(i=a.boolean_data)?void 0:i.initial_value)&&n;return{valueIdentifier:r,value:null!=(o=(0,L.OG)(s,{key:r,subtask_id:t},void 0))?o:l}}))},this._toggleSettingValue=e=>{const{settingValues:t}=this.state,s=null==t?void 0:t.map((t=>t.valueIdentifier===e?{valueIdentifier:e,value:!t.value}:t));this.setState({settingValues:s})},this._renderSettings=()=>{var e,t;const{onNavigate:s,subtask:n,subtaskId:i,subtaskInputs:o}=this.props;return null!=(e=null==(t=n.settings)?void 0:t.map((e=>{const t=e.value_identifier;return void 0===t?null:a.createElement(mn,{key:t,onNavigate:s,onSettingToggle:()=>this._toggleSettingValue(t),settingValue:e,subtaskId:i,subtaskInputs:o})})))?e:null},this._handleDoneButtonClick=()=>{const{subtask:e}=this.props,{settingValues:t}=this.state,s={setting_responses:null==t?void 0:t.map((({value:e,valueIdentifier:t})=>({key:t,response_data:{boolean_data:{result:e}}}))),email:this._getIdentifierValue(),link:e.next_link.link_id};this._handleButtonClick(e.next_link,s)},this._handleSkipButtonClick=()=>{const{subtask:e}=this.props;e.skip_link&&this._handleButtonClick(e.skip_link,{link:e.skip_link.link_id})},this._handleButtonClick=(e,t)=>{const{onNavigate:s,subtaskId:n,updateFlow:a}=this.props;a(n,t),s(e)},this._handleSetInputRef=e=>{this._input=e},this._handleUpdateValidity=()=>{const e=this._input&&this._input.isValid();this.setState({isValid:!!e})},this._getIdentifierValue=()=>this._input&&this._input.getValue()||void 0;const{subtask:t,subtaskId:s,subtaskInputs:n}=e,i=(0,L.OG)(n,{key:"email",subtask_id:s},"")||void 0,o=this._getInitialSettingValues(t,s,n);this.state={email:i,isValid:!!i,settingValues:o}}render(){const{onNavigate:e,passthroughOcfScreenProps:t,subtask:s,subtaskInputs:o}=this.props,{next_link:r,primary_text:l,secondary_text:c,skip_link:u}=s;return a.createElement(ue.Z,(0,n.Z)({},t,{footer:a.createElement(G,{actionDisabled:!this.state.isValid,actionLabel:this.state.isValid||!u?null==r?void 0:r.label:void 0,actionTestID:gn,onAction:this._handleDoneButtonClick,onSecondaryAction:this._handleSkipButtonClick,secondaryActionLabel:this.state.isValid||null==u?void 0:u.label,secondaryActionTestID:bn,secondaryActionType:"primaryOutlined"}),header:a.createElement(ce,{onNavigate:e,primaryTextProp:l,secondaryTextProp:c,subtaskInputs:o,withHeaderImage:!0}),providePadding:!0}),a.createElement(i.Z,{style:vn.textFieldArea},this._renderEmailTextField()),this._renderSettings(),this.props.errorDialog)}}const vn=u.Z.create((e=>({textFieldArea:{marginTop:e.spaces.space20},emailTextField:{paddingHorizontal:0,paddingVertical:e.spaces.space16}})));s(21515);var fn=s(23162),yn=s(12171);const xn=(0,De.Z)().propsFromActions((()=>({sendAllPreviews:yn.MH}))).withAnalytics(),wn="LoginForm_Login_Button",Cn="LoginForm_Skip_Button",In="LoginForm_Footer_Container",En=p().d1f6d336,Sn=p().a3841918,Zn=p().f70cd5ee,Tn=p().ca86b62c;class An extends a.Component{constructor(...e){super(...e),this._passwordlessSsoEnabled=this.context.featureSwitches.isTrue("responsive_web_passwordless_sso_enabled"),this.state={},this._renderIdentifier=()=>{const{subtask:e}=this.props,{email:t,phone_number:s,user_identifier_display_type:n,username:i}=e;let o,r;return"phone_number"===n?(o=s,r=Zn):"username"===n?(o=i,r=En):"email"===n&&(o=t,r=Sn),o&&r&&n?a.createElement(_s.Z,{editable:!1,label:r,name:n,onChange:h.Z,style:ee.formTextInput,value:o}):null},this._renderPasswordFields=()=>{const{onNavigate:e,subtask:t,subtaskInputs:s}=this.props,{show_password_confirmation:i}=t;if(t.password_field||t.new_password_field||t.confirm_password_field){var o;const i={onNavigate:e,onSubmitEditing:this._handleTextSubmit,subtaskInputs:s},r=null!=(o=t.password_field)?o:t.new_password_field;return a.createElement(a.Fragment,null,r?a.createElement(pn,(0,n.Z)({},i,{autoFocus:!0,onChange:this._handlePasswordChange,passwordProps:{onPasswordValidated:this._handleValidationChange,skipPasswordValidation:t.skip_password_validation},textField:r})):null,t.confirm_password_field?a.createElement(pn,(0,n.Z)({},i,{onChange:this._handlePasswordConfirmationChange,passwordProps:{onPasswordValidated:this._handleValidationChange,customValidator:this._validatePasswordConfirmation},textField:t.confirm_password_field})):null)}return a.createElement(a.Fragment,null,a.createElement(un,{autoComplete:this._getPasswordAutoCompleteValue(),autoFocus:!0,label:t.hint,onPasswordChange:this._handlePasswordChange,onPasswordValidated:this._handleValidationChange,onSubmitEditing:this._handleTextSubmit,skipPasswordValidation:t.skip_password_validation,userIdentifier:t.username}),i?a.createElement(un,{autoComplete:this._getPasswordAutoCompleteValue(),customValidator:this._validatePasswordConfirmation,label:t.password_confirmation_hint,onPasswordChange:this._handlePasswordConfirmationChange,onPasswordValidated:this._handleValidationChange,onSubmitEditing:this._handleTextSubmit,userIdentifier:t.username}):null)},this._renderFooter=()=>{var e,t;const{onNavigate:s,subtask:o,subtaskInputs:l}=this.props,{footer:c,next_link:u,skip_link:d}=o,p=this._isPasswordValid(),h=this._passwordlessSsoEnabled?null==(e=o.action_buttons)?void 0:e.map(((e,t)=>a.createElement(re,{button:e,displayType:(0,L.sI)(e.navigation_link.link_id),key:t,onNavigate:s,subtaskInputs:l}))):[],m=null!=(t=o.footer)&&t.footnote_text?a.createElement(U,(0,n.Z)({},o.footer.footnote_text,{color:"gray700",onNavigate:s,style:Fn.footnoteText,subtaskInputs:l})):null,_=a.createElement(G,{actionDisabled:!p,actionLabel:p||!d?null==u?void 0:u.label:void 0,actionTestID:wn,buttonSize:(null==c?void 0:c.style)===Z.$b.Floating?"medium":void 0,detailText:null==c?void 0:c.detail_text,onAction:this._handleDoneButtonClick,onNavigate:s,onSecondaryAction:this._handleSkipButtonClick,secondaryActionLabel:p||null==d?void 0:d.label,secondaryActionTestID:Cn,subtaskInputs:l});return a.createElement(i.Z,{testID:In},_,null!=h&&h.length?a.createElement(fn.Z,{label:a.createElement(r.ZP,null,Tn)}):null,h,m)},this._validatePasswordConfirmation=()=>{var e,t;const{subtask:s}=this.props,{password_confirmation_mismatch_message:n}=s,a=null==(e=s.confirm_password_field)||null==(t=e.validation_messages)?void 0:t.find((e=>e.message_type===Z.IN.Mismatch));let i;if(a?i=a.text.text:null!=n&&n.text&&(i=null==n?void 0:n.text),i){const{password:e,passwordConfirmation:t}=this.state;if(e!==t)return{valid:!1,errorMessage:i}}return{valid:!0,errorMessage:void 0}},this._handleDoneButtonClick=()=>{const{onNavigate:e,sendAllPreviews:t,subtask:s,subtaskId:n,updateFlow:a}=this.props;t().finally((()=>{this._saveCredentialsIfNeeded().then((()=>{a(n,{password:this.state.password,link:s.next_link.link_id}),e(s.next_link)})).catch((()=>{a(n,{password:this.state.password,link:s.next_link.link_id}),e(s.next_link)}))}))},this._handleSkipButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props,a=t.skip_link;a&&(n(s,{link:a.link_id}),e(a))},this._handlePasswordChange=e=>{this.setState({password:e})},this._handlePasswordConfirmationChange=e=>{this.setState({passwordConfirmation:e})},this._handleValidationChange=e=>{const{subtask:t}=this.props,{show_password_confirmation:s}=t;if(t.confirm_password_field||s){const t=this._validatePasswordConfirmation().valid;this.setState({isPasswordValid:e&&t})}else this.setState({isPasswordValid:e})},this._isPasswordValid=()=>{const{subtask:e}=this.props,{isPasswordValid:t,password:s}=this.state,n=!(s&&s.length);return t||e.skip_password_validation&&!n},this._handleTextSubmit=()=>{this._isPasswordValid()&&this._handleDoneButtonClick()},this._saveCredentialsIfNeeded=()=>{const{subtask:e}=this.props,{email:t,phone:s,skip_password_validation:n,username:a}=e,{password:i}=this.state,o=!!window.PasswordCredential,r=a||t||s;if(r&&o&&!n&&navigator.credentials){const e=new window.PasswordCredential({id:r,password:i});return navigator.credentials.store(e)}return Promise.resolve()},this._getPasswordAutoCompleteValue=()=>{const{subtask:e}=this.props;switch(e.os_content_type){case Z.Dk.Password:return"current-password";case Z.Dk.NewPassword:return"new-password";default:return"on"}},this._hasSSOButtons=()=>{var e;const{subtask:t}=this.props;return!(null==(e=t.action_buttons)||!e.find((e=>{const t=(0,L.sI)(e.navigation_link.link_id);return t===Z.GN.GoogleSSO||t===Z.GN.AppleSSO})))}}render(){var e,t,s,o,r;const{errorDialog:l,onNavigate:c,passthroughOcfScreenProps:u,subtask:d,subtaskInputs:p}=this.props,h=null!=(e=null==(t=d.footer)?void 0:t.style)?e:Z.$b.Fixed,m=this._passwordlessSsoEnabled&&(null==(s=d.action_buttons)?void 0:s.length);return a.createElement(ue.Z,(0,n.Z)({},u,{footer:h===Z.$b.Fixed?this._renderFooter():null,providePadding:!0}),a.createElement(i.Z,{style:!!m&&Fn.compact},a.createElement(ce,{header:d.header,onNavigate:c,primaryTextProp:d.primary_text,secondaryTextProp:d.secondary_text,subtaskInputs:p,userInfo:this._passwordlessSsoEnabled?a.createElement(Fe,{displayType:Z.CE.compact,onNavigate:c,subtaskInputs:p,user:null==(o=d.header)?void 0:o.user,userCaption:null==(r=d.header)?void 0:r.user_caption}):void 0}),this._renderIdentifier(),this._renderPasswordFields(),h===Z.$b.Floating||h===Z.$b.FloatingLarge?this._renderFooter():null),l)}}An.contextType=_.rC;const Fn=u.Z.create((e=>({footnoteText:{marginBottom:e.spaces.space24},detailText:{marginBottom:e.spaces.space40},compact:{margin:"auto",minWidth:X.fI+64,maxWidth:X.fI+64}}))),Pn=xn(An);var Nn=s(85204);const Bn=new RegExp("^\\+?[0-9\\-\\.\\(\\)\\s]{7,1000}$"),Dn=p().cd24fe60,Ln=Vs({namespace:"phoneNumberValidity",fetchOneContext:"FETCH_PHONE_VALIDITY",fetchOneEndpoint:e=>e.Validity.isPhoneNumberAvailable,fetchOneParams:([e],t)=>({raw_phone_number:e,...t}),localValidator:e=>{const t=Bn.test(e);return{errorMessage:Dn,valid:t}}}),On=e=>{const{countryCode:t,onRef:s,...i}=e,o={country_code:t};return a.createElement(Fs,(0,n.Z)({module:Ln,onRef:s,type:"tel",validationParams:o},i))},Vn="ocfEnterPhoneNextLink",Rn="ocfEnterPhoneSkipLink",Mn=p().gf8388fe;class Un extends a.Component{constructor(e){super(e),this._renderCountryCodes=()=>{const{country_codes:e}=this.props.subtask;if(e&&e.length){const t=e.map((e=>({label:e.text.text,value:e.id})));return a.createElement(Nn.ZP,{helperText:void 0,label:Mn,onChange:this._handleCountryChange,options:t,value:this.state.countryCode||""})}return null},this._handleCountryChange=e=>{this.setState({countryCode:e})},this._renderPhoneTextField=()=>a.createElement(On,{autoComplete:"tel",countryCode:this.state.countryCode,defaultValue:this.state.phoneNumber,label:this.props.subtask.hint_text,name:"phone_number",onRef:this._handleSetInputRef,onValidityChange:this._handleUpdateValidity,style:zn.phoneTextField}),this._getInitialSettingValues=(e,t,s)=>{var n;return null==(n=e.settings)?void 0:n.map((e=>{var n,a,i,o;const r=e.value_identifier;if(void 0===r)return{};const l=null!=(n=null==(a=e.value_data)||null==(i=a.boolean_data)?void 0:i.initial_value)&&n;return{valueIdentifier:r,value:null!=(o=(0,L.OG)(s,{key:r,subtask_id:t},void 0))?o:l}}))},this._toggleSettingValue=e=>{const{settingValues:t}=this.state,s=null==t?void 0:t.map((t=>t.valueIdentifier===e?{valueIdentifier:e,value:!t.value}:t));this.setState({settingValues:s})},this._renderSettings=()=>{var e,t;const{onNavigate:s,subtask:n,subtaskId:i,subtaskInputs:o}=this.props;return null!=(e=null==(t=n.settings)?void 0:t.map((e=>{const t=e.value_identifier;return void 0===t?null:a.createElement(mn,{key:t,onNavigate:s,onSettingToggle:()=>this._toggleSettingValue(t),settingValue:e,subtaskId:i,subtaskInputs:o})})))?e:null},this._handleDoneButtonClick=()=>{const{subtask:e}=this.props,{countryCode:t,settingValues:s}=this.state,n=null==s?void 0:s.map((({value:e,valueIdentifier:t})=>({key:t,response_data:{boolean_data:{result:e}}}))),a={country_code:t,phone_number:this._getIdentifierValue(),setting_responses:n,link:e.next_link.link_id};this._handleButtonClick(e.next_link,a)},this._handleSkipButtonClick=()=>{const{subtask:e}=this.props;e.skip_link&&this._handleButtonClick(e.skip_link,{link:e.skip_link.link_id})},this._handleButtonClick=(e,t)=>{const{onNavigate:s,subtaskId:n,updateFlow:a}=this.props;a(n,t),s(e)},this._handleSetInputRef=e=>{this._input=e},this._handleUpdateValidity=()=>{const e=this._input&&this._input.isValid();this.setState({isValid:!!e})},this._getIdentifierValue=()=>this._input&&this._input.getValue()||void 0;const{subtask:t,subtaskId:s,subtaskInputs:n}=e,i=(0,L.OG)(n,{key:"country_code",subtask_id:s},t.default_country_code)||void 0,o=(0,L.OG)(n,{key:"phone_number",subtask_id:s},"")||void 0,r=this._getInitialSettingValues(t,s,n);this.state={countryCode:i,phoneNumber:o,isValid:!!o,settingValues:r}}render(){const{onNavigate:e,passthroughOcfScreenProps:t,subtask:s,subtaskInputs:o}=this.props,{next_link:r,primary_text:l,secondary_text:c,skip_link:u}=s;return a.createElement(ue.Z,(0,n.Z)({},t,{footer:a.createElement(G,{actionDisabled:!this.state.isValid,actionLabel:this.state.isValid||!u?null==r?void 0:r.label:void 0,actionTestID:Vn,onAction:this._handleDoneButtonClick,onSecondaryAction:this._handleSkipButtonClick,secondaryActionLabel:this.state.isValid||null==u?void 0:u.label,secondaryActionTestID:Rn,secondaryActionType:"primaryOutlined"}),header:a.createElement(ce,{onNavigate:e,primaryTextProp:l,secondaryTextProp:c,subtaskInputs:o,withHeaderImage:!0}),providePadding:!0}),a.createElement(i.Z,{style:zn.textFieldArea},this._renderCountryCodes(),this._renderPhoneTextField()),this._renderSettings(),this.props.errorDialog)}}const zn=u.Z.create((e=>({textFieldArea:{marginTop:e.spaces.space20},phoneTextField:{paddingHorizontal:0,paddingVertical:e.spaces.space16}})));var jn=s(47884);const Hn="ocfEnterRecaptchaSkipButton";class Gn extends a.Component{constructor(...e){super(...e),this._handleRecaptchaStateChange=e=>{const{onNavigate:t,subtask:s,subtaskId:n,updateFlow:a}=this.props,{next_link:i}=s;e&&(a(n,{link:i.link_id,recaptcha_response:e}),t(i))},this._handleSkipButtonClick=()=>{const{onNavigate:e,subtask:{skip_link:t},subtaskId:s,updateFlow:n}=this.props;t&&(n(s,{link:t.link_id}),e(t))}}render(){const{errorDialog:e,onNavigate:t,passthroughOcfScreenProps:s,subtask:i,subtaskInputs:o}=this.props,{primary_text:r,secondary_text:l,skip_link:c}=i;return a.createElement(ue.Z,(0,n.Z)({},s,{footer:a.createElement(G,{onSecondaryAction:this._handleSkipButtonClick,secondaryActionLabel:null==c?void 0:c.label,secondaryActionTestID:Hn}),header:a.createElement(ce,{onNavigate:t,primaryTextProp:r,secondaryTextProp:l,subtaskInputs:o,withHeaderImage:!0}),providePadding:!0}),a.createElement(jn.Z,{nextButtonDisabled:!1,onChange:this._handleRecaptchaStateChange,withConsentForm:!1}),e)}}const Wn="ocfEnterTextNextButton",qn="ocfEnterTextSkipForNowButton",$n="ocfEnterTextTextInput",Kn="text";class Yn extends a.Component{constructor(e){super(e),this._handleSubmit=()=>{this.state.text&&this._handleDoneButtonClick()},this._handleDoneButtonClick=()=>{const{onNavigate:e,subtask:{next_link:t},subtaskId:s,updateFlow:n}=this.props;n(s,{...this.state,link:t.link_id}),e(t)},this._handleSkipButtonClick=()=>{const{onNavigate:e,subtask:{skip_link:t},subtaskId:s,updateFlow:n}=this.props;t&&n(s,{link:t.link_id}),t&&e(t)},this._handleEntryUpdated=e=>{const{value:t}=e.target;this.setState({text:t})},this._getAutoCompleteFromKeyboardType=e=>{switch(e){case Z.RA.Email:return"email";case Z.RA.Telephone:return"tel";default:return}},this._getInputTypeFromKeyboardType=e=>{switch(e){case Z.RA.Email:return"email";case Z.RA.Password:return"password";case Z.RA.Telephone:return"tel";default:return"text"}},this._getInputModeFromKeyboardType=e=>{switch(e){case Z.RA.Email:return"email";case Z.RA.Number:return"numeric";case Z.RA.Telephone:return"tel";default:return"text"}};const{subtask:t,subtaskId:s,subtaskInputs:n={}}=e,{default_text:a}=t,i=(0,L.OG)(n,{key:Kn,subtask_id:s},a)||"";this.state={text:i}}render(){const{errorDialog:e,onNavigate:t,passthroughOcfScreenProps:s,subtask:i,subtaskInputs:o}=this.props,{auto_capitalization_type:r,auto_correction_enabled:l,detail_text:c,header:u,hint_text:d,keyboard_type:p,max_length:h,multiline:m,next_link:_,os_content_type:g,primary_text:b,secondary_text:k,skip_link:v}=i;return a.createElement(ue.Z,(0,n.Z)({},s,{footer:a.createElement(G,{actionDisabled:!v&&!this.state.text,actionLabel:this.state.text||!v?null==_?void 0:_.label:void 0,actionTestID:Wn,onAction:this._handleDoneButtonClick,onSecondaryAction:this._handleSkipButtonClick,secondaryActionLabel:this.state.text||null==v?void 0:v.label,secondaryActionTestID:qn}),header:a.createElement(ce,{header:u,onNavigate:t,primaryTextProp:b,secondaryTextProp:k,subtaskInputs:o,withHeaderImage:!0}),providePadding:!0}),a.createElement(_s.Z,{autoCapitalize:r||"sentences",autoComplete:g===Z.Dk.Username?g:this._getAutoCompleteFromKeyboardType(p),autoCorrect:l,autoFocus:!0,inputMode:this._getInputModeFromKeyboardType(p),label:d||"",maxLength:h,multiline:m,name:g||Z.Dk.Text,onChange:this._handleEntryUpdated,onSubmitEditing:this._handleSubmit,positionCursorAtEnd:!0,spellCheck:l?"true":"false",style:ee.formTextInput,testID:$n,type:this._getInputTypeFromKeyboardType(p),value:this.state.text}),c?a.createElement(U,(0,n.Z)({},c,{color:"gray700",onNavigate:t,subtaskInputs:o})):null,e)}}var Qn=s(1815),Xn=s(90769);const Jn=(0,De.Z)().propsFromState((()=>({loggedInUser:jt.ZP.selectLoggedInUser,navigationContext:F.b,userNameAvailabilityData:Xn.El}))).adjustStateProps((({userNameAvailabilityData:e,...t})=>({isUsernameValid:e.valid,validationError:e.desc,...t}))).propsFromActions((()=>({fetchUsernameAvailability:Xn.HR}))).withAnalytics({section:"enter_username"}),ea="ocfEnterUsernameNextButton",ta="ocfEnterUsernameSkipButton",sa=p().d1f6d336;class na extends a.Component{constructor(e){super(e),this._maybeRenderDetailTexts=()=>{const{subtask:e,subtaskInputs:t}=this.props,{currentDetailTextIndex:s}=this.state;return e.detail_texts&&e.detail_texts.length?a.createElement(U,(0,n.Z)({},e.detail_texts[s],{color:"link",onNavigate:this._handleDetailTextClick,style:aa.detailLink,subtaskInputs:t})):void 0},this._handleDetailTextClick=e=>{const{analytics:t,onNavigate:s}=this.props;"show_more_usernames"===e.link_id?(this._updateCurrentDetailTextIndex(),t.scribe({element:"show_more",action:"click"})):(this._selectUsername(e.link_id,this._fetchUsernameStatus),t.scribe({element:"suggestion",action:"click"})),s(e)},this._handleUsernameUpdated=e=>{const t=e.target.value;this._selectUsername(t,this._fetchUsernameStatusDebounced)},this._selectUsername=(e,t)=>{this.setState({username:e}),t(e)},this._handleNextButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props,{username:a}=this.state;t.next_link&&(n(s,{username:a,link:t.next_link.link_id}),e(t.next_link))},this._handleSkipButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props,a=t.skip_link;a&&(n(s,{link:a.link_id}),e(a))},this._fetchUsernameStatus=e=>{const{analytics:t,fetchUsernameAvailability:s,loggedInUser:n}=this.props;n&&s({email:n.email&&n.email[0]&&n.email[0].address,full_name:n.name,suggest:!1,username:e}).then((e=>{e&&!e.valid&&"taken"===e.reason&&t.scribe({element:"username",action:"taken"})}))},this._updateCurrentDetailTextIndex=()=>{this.setState({currentDetailTextIndex:this.state.currentDetailTextIndex+1})};const{loggedInUser:t,subtaskId:s,subtaskInputs:i}=e,o=(0,L.OG)(i,{key:"username",subtask_id:s},"")||(t?t.screen_name:"");this.state={currentDetailTextIndex:0,username:o},this._fetchUsernameStatusDebounced=(0,Ss.Z)(((...e)=>this._fetchUsernameStatus(...e)),250)}componentDidMount(){const{action:e,text:t}=this.props.navigationContext||{};"set_text"===e&&t&&this._selectUsername(t,this._fetchUsernameStatus)}render(){const{isUsernameValid:e,loggedInUser:t,onNavigate:s,passthroughOcfScreenProps:i,subtask:o,subtaskInputs:r,validationError:l}=this.props,{next_link:c,primary_text:u,secondary_text:d,skip_link:p}=o,{username:h}=this.state,m=(t&&t.screen_name&&t.screen_name.toLowerCase())===(h&&h.toLowerCase());return a.createElement(ue.Z,(0,n.Z)({},i,{footer:a.createElement(G,{actionDisabled:!e,actionLabel:h&&!m?null==c?void 0:c.label:void 0,actionTestID:ea,onAction:this._handleNextButtonClick,onSecondaryAction:this._handleSkipButtonClick,secondaryActionLabel:!h||m?null==p?void 0:p.label:void 0,secondaryActionTestID:ta}),header:a.createElement(ce,{onNavigate:s,primaryTextProp:u,secondaryTextProp:d,subtaskInputs:r,withHeaderImage:!0}),providePadding:!0}),a.createElement(_s.Z,{Icon:Qn.default,autoComplete:"off",autoCorrect:!1,autoFocus:!0,errorText:l,invalid:!!h&&!m&&!e,label:o.hint||sa,name:"username",onChange:this._handleUsernameUpdated,showValidationIcon:!!h,spellCheck:"false",style:ee.formTextInput,value:h}),this._maybeRenderDetailTexts(),this.props.errorDialog)}}const aa=u.Z.create((e=>({detailLink:{marginTop:e.spaces.space16}}))),ia=Jn(na);var oa=s(10013),ra=s(67026),la=s(5621),ca=s(40082);const ua=Object.freeze({TopicFollowCount:"topic_follow_count"});var da=s(45855),pa=s(78149),ha=s(73835),ma=s(77590),_a=s(98701),ga=s(15372),ba=s(97758);const ka=e=>t=>null==t?void 0:t.selectInitialFetchStatus(e),va=(0,De.Z)().propsFromState((()=>({getModuleFetchStatus:ka}))).propsFromActions((()=>({clearTimelineCache:ba.Z,createLocalApiErrorHandler:(0,g.createLocalApiErrorHandlerWithContextFactory)("OCF_GENERIC_URT")}))).withAnalytics();var fa=s(56746),ya=s(44895);var xa=s(47065);const wa=e=>{switch(e){case ha.Z.NOT_FOUND:return a.createElement(la.Z,null);case ha.Z.NOT_ALLOWED:return a.createElement(ra.Z,null);default:return(0,I.ZP)(`Unhandled timeline unavailable reason in Ocf GenericURT screen: ${e}`),null}},Ca=(0,xe.Z)((e=>(e=>({...(0,ya.G)({}),...(0,fa.Z)({isWide:e})}))(e)));class Ia extends a.Component{constructor(e){super(e),this._isNextButtonEnabled=()=>{var e,t;const{topicsFollowed:s}=this.state,{subtask:n}=this.props,{navigation_link_options:{max_enable_count:a,min_enable_count:i}={}}=n,o=(null==(e=n.navigation_link_options)||null==(t=e.count_subtask_data_reference)?void 0:t.key)===ua.TopicFollowCount;return this._getModuleFetchStatus()===pa.Z.FAILED||(i&&a?o&&s.size>=i&&s.size<=a:i&&!a?o&&s.size>=i:!i&&a?o&&s.size<=a:!i&&!a||void 0)},this._renderThresholdDetailText=(e,t)=>{const{onNavigate:s,subtaskInputs:o}=this.props;let l,c=-1;for(let s=0;s<(null==e?void 0:e.length);s++){const{text:n,threshold:a}=e[s];a>c&&a<=t&&(c=a,l=n)}const u=this._isNextButtonEnabled()?"gray1100":"gray700",d=this._isNextButtonEnabled()?"bold":"normal";return this.state.initialized&&l?a.createElement(i.Z,{style:Ea.detailText},a.createElement(r.ZP,{color:u,size:"subtext2",weight:d},this._isNextButtonEnabled()?null:oa.ZP.getFormattedCount(t),a.createElement(U,(0,n.Z)({},l,{color:u,onNavigate:s,subtaskInputs:o,weight:d})))):a.createElement(i.Z,null)},this._getModule=(0,xe.Z)((e=>{const{graphql_timeline_query:t,timeline_source:s}=this.props.subtask;return t?(0,_a.R)(t.timeline_key):(0,ga.Z)({urtUrl:{url:s||"",urlType:ma.Z.UrtEndpoint}})})),this._getModuleFetchStatus=()=>{const{getModuleFetchStatus:e,subtaskId:t}=this.props;return e(this._getModule(t))},this._resetState=()=>{this.setState({topicsFollowed:new Set,initialized:!1})},this._handleOnTopicInitialize=(e,t)=>{this.setState((s=>{const n=(0,We.Z)(Array.from(s.topicsFollowed));return t?n.add(e):n.delete(e),{initialized:!0,topicsFollowed:n}}))},this._handleOnTopicFollow=e=>{const t=(0,We.Z)(Array.from(this.state.topicsFollowed));t.add(e),this.setState({topicsFollowed:t})},this._handleOnTopicUnfollow=e=>{const t=(0,We.Z)(Array.from(this.state.topicsFollowed));t.delete(e),this.setState({topicsFollowed:t})},this._handleNextButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props;n(s,{link:t.next_link.link_id}),e(t.next_link)},this._clearTimelineCache=()=>{const{clearTimelineCache:e,createLocalApiErrorHandler:t,subtask:{graphql_timeline_query:s}}=this.props;s&&e((0,_a.R)(s.timeline_key)).catch(t())},this.state={topicsFollowed:new Set,initialized:!1}}componentDidMount(){const{analytics:e,subtask:t}=this.props;e.scribe({...t.scribe_config,action:"impression"})}componentDidUpdate(e){const{analytics:t,subtask:s,subtaskId:n}=this.props;e.subtaskId!==n&&(this._resetState(),this._clearTimelineCache(),t.scribe({...s.scribe_config,action:"impression"}))}render(){var e,t,s,o,r;const{errorDialog:l,onNavigate:c,passthroughOcfScreenProps:d,subtask:p,subtaskId:m,subtaskInputs:_}=this.props,{topicsFollowed:g}=this.state,{header:b,detail_rich_text_options:{label_conditional_text:k}={}}=p,v=(null==(e=p.navigation_link_options)||null==(t=e.count_subtask_data_reference)?void 0:t.key)===ua.TopicFollowCount,f=a.createElement(D.ZP,{disabled:!this._isNextButtonEnabled(),onPress:this._handleNextButtonClick,size:"xLarge",type:"primaryFilled"},(null==(s=p.navigation_link_options)?void 0:s.label_conditional_text)||p.next_link.label),y=(null==(o=p.detail_rich_text_options)||null==(r=o.count_subtask_data_reference)?void 0:r.key)===ua.TopicFollowCount&&this._getModuleFetchStatus()!==pa.Z.FAILED&&k?a.createElement(i.Z,{style:Ea.spaceBetween},this._renderThresholdDetailText(k,g.size),f):f,x=a.createElement(ue.Z,(0,n.Z)({},d,{footer:a.createElement(i.Z,{style:Ea.footer},y),header:a.createElement(ce,{header:b,onNavigate:c,subtaskInputs:_,withHeaderImage:!0}),providePadding:!0}),a.createElement(i.Z,null,p.graphql_timeline_query||p.timeline_source?a.createElement(Ce.Z,null,(({containerWidth:e})=>{const t=e>=u.Z.theme.breakpoints.small;return a.createElement(xa.m.Provider,{value:{onInitialize:v?this._handleOnTopicInitialize:h.Z,onFollow:v?this._handleOnTopicFollow:h.Z,onUnfollow:v?this._handleOnTopicUnfollow:h.Z}},a.createElement(ca.Z,{entryConfiguration:Ca(t),module:this._getModule(m),renderUnavailable:wa,title:"",withoutHeadroom:!0}))})):null),l);return p.scribe_config?a.createElement(da.nO,{namespace:p.scribe_config},x):x}}const Ea=u.Z.create((e=>({detailText:{justifyContent:"center"},spaceBetween:{flexDirection:"row",justifyContent:"space-between"},footer:{marginVertical:e.spaces.space24}}))),Sa=va(Ia),Za=e=>{const{addToast:t,onNavigate:s,subtask:n,subtaskId:i}=e||{};return a.createElement(Be,{navigationLink:n.next_link,onNavigate:s,subtaskAction:()=>new Promise(((e,s)=>{e((()=>{if(null!=n&&n.message){const{message:{text:e}}=n;t({text:e})}})())})),subtaskId:i})};var Ta=s(34740),Aa=s(93983);const Fa="selected_custom_interests",Pa="selected_interest_ids",Na=(e,t)=>t.subtaskId,Ba=()=>(0,Rt.P1)(F.$B,Na,((e,t)=>((0,L.OG)(e,{key:Fa,subtask_id:t},[])||[]).map((e=>({topic:e.custom_interest,ttt_token:e.ttt_token}))))),Da=(e,t)=>{const s=(0,F.$B)(e);return(0,L.OG)(s,{key:Pa,subtask_id:t.subtaskId},[])||void 0},La=(0,De.Z)().propsFromState((()=>({initialCustomInterests:Ba(),initialCustomInterestIds:(0,Rt.P1)(Ba(),(e=>e.map((e=>e.topic)))),initialSelectedInterestIds:Da}))),Oa="ocfInterestPickerNextLink",Va="ocfInterestPickerSkipLink",Ra=[A.my.Topics];class Ma extends a.Component{constructor(e){super(e),this._maybeRenderCustomInterests=()=>{const{subtask:e}=this.props,{custom_interests_header:t}=e,{customInterests:s,shouldRenderCustomInterests:n}=this.state;if(n)return a.createElement(i.Z,null,a.createElement(i.Z,{style:Ua.group,testID:"custom"},a.createElement(r.ZP,{size:"headline1",style:Ua.groupHeader,weight:"bold"},t),a.createElement(i.Z,{style:Ua.pillsContainer},s.map((e=>this._renderCustomInterest(e.topic))))))},this._renderGroup=e=>{let t;if(e.show_more){const s=e.show_more.initial_to_show+(e.expanded?e.show_more.extra_to_show:0);t=e.items.slice(0,s)}else t=e.items;return a.createElement(i.Z,{key:`group_${e.header}`,style:Ua.group,testID:"group"},a.createElement(r.ZP,{size:"headline1",style:Ua.groupHeader,weight:"bold"},e.header),a.createElement(i.Z,{style:Ua.pillsContainer},t.map(this._renderSelectionPill),this._maybeRenderShowMoreButton(e)))},this._maybeRenderShowMoreButton=e=>{const t=e.show_more;return t&&e.items.length>t.initial_to_show&&!e.expanded?a.createElement(Ta.Z,{compact:!0,key:`showMore_${e.header}`,mode:"expand",onClick:this._handleShowMore(e),style:Ua.selectionPillStyles,text:t.text}):null},this._renderCustomInterest=e=>{const{selectedCustomInterestIds:t}=this.state;return a.createElement(Ta.Z,{compact:!0,key:`selectionPill_${e}`,onClick:this._handleToggleCustomInterest(e),selected:t.has(e),style:Ua.selectionPillStyles,text:e})},this._renderSelectionPill=e=>{const t=this.state.selectedInterestIds.has(e.id),s=this._handleToggleInterest(e.id,t);return a.createElement(Ta.Z,{compact:!0,key:`selectionPill_${e.id}`,onClick:s,selected:t,style:Ua.selectionPillStyles,text:e.name})},this._shouldShowSkipInstead=()=>{const{selectedCustomInterestIds:e,selectedInterestIds:t}=this.state,{subtask:s}=this.props;return s.skip_link&&0===t.size&&0===e.size},this._handleSuggestionSelected=e=>{const{customInterestIds:t,selectedCustomInterestIds:s}=this.state;if(e.type!==A.El.Topic&&e.type!==A.El.Hashtag)return;const n=e.data.topic,a={topic:n,ttt_token:void 0};t.has(n)||this.setState({customInterests:this.state.customInterests.concat([a]),customInterestIds:(0,We.Z)([...t]).add(n),selectedCustomInterestIds:(0,We.Z)([...s]).add(n),shouldRenderCustomInterests:!0})},this._handleShowMore=e=>()=>{const t=this.state.groups,s=t.find((t=>t.header===e.header));s&&(s.expanded=!0),this.setState({groups:t})},this._handleToggleCustomInterest=e=>()=>{const t=(0,We.Z)([...this.state.selectedCustomInterestIds]);t.has(e)?(t.delete(e),this.setState({selectedCustomInterestIds:t})):this.setState({selectedCustomInterestIds:t.add(e)})},this._handleToggleInterest=(e,t)=>()=>{const s=(0,We.Z)([...this.state.selectedInterestIds]);t?(s.delete(e),this.setState({selectedInterestIds:s})):this.setState({selectedInterestIds:s.add(e)})},this._handleNextButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props,{customInterests:a,selectedCustomInterestIds:i}=this.state,o=a.reduce(((e,t)=>(i.has(t.topic)&&e.push({custom_interest:t.topic,ttt_token:t.ttt_token}),e)),[]);n(s,{link:t.next_link.link_id,selected_interest_ids:Array.from(this.state.selectedInterestIds),selected_custom_interests:o}),e(t.next_link)},this._handleSkipButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props;t.skip_link&&n(s,{link:t.skip_link.link_id}),t.skip_link&&e(t.skip_link)};const{initialCustomInterestIds:t,initialCustomInterests:s,initialSelectedInterestIds:n}=e,{selected_items:o}=e.subtask;this.state={groups:e.subtask.groups||[],customInterests:[...s],customInterestIds:(0,We.Z)(t),selectedCustomInterestIds:(0,We.Z)(t),selectedInterestIds:n&&n.length>0?(0,We.Z)(n):(0,We.Z)(o||[]),shouldRenderCustomInterests:s.length>0}}render(){const{onNavigate:e,passthroughOcfScreenProps:t,subtask:s,subtaskInputs:o}=this.props,{next_link:r,primary_text:l,secondary_text:c,skip_link:u}=s,{groups:d}=this.state;return a.createElement(ue.Z,(0,n.Z)({},t,{footer:a.createElement(G,{actionLabel:this._shouldShowSkipInstead()||null==r?void 0:r.label,actionTestID:Oa,onAction:this._handleNextButtonClick,onSecondaryAction:this._handleSkipButtonClick,secondaryActionLabel:this._shouldShowSkipInstead()?null==u?void 0:u.label:void 0,secondaryActionTestID:Va}),header:a.createElement(ce,{onNavigate:e,primaryTextProp:l,secondaryTextProp:c,subtaskInputs:o,withHeaderImage:!0}),providePadding:!0}),s.hide_search?null:a.createElement(i.Z,{style:Ua.searchContainer},a.createElement(Aa.R7,{filter:Ra,maxTopics:8,onItemClick:this._handleSuggestionSelected,placeholder:s.hint,rounded:!0,shouldAutoFocus:!0,shouldClearOnSelect:!0,source:A._4.WelcomeFlow,withFocusStyling:!0})),this._maybeRenderCustomInterests(),a.createElement(i.Z,null,d.map(this._renderGroup)),this.props.errorDialog)}}const Ua=u.Z.create((e=>({searchContainer:{marginBottom:e.spaces.space16,zIndex:1},selectionPillStyles:{margin:e.spaces.space4},pillsContainer:{flexDirection:"row",flexWrap:"wrap"},groupHeader:{marginTop:e.spaces.space12,marginBottom:e.spaces.space12},group:{marginBottom:e.spaces.space12}}))),za=La(Ma);var ja=s(8443),Ha=s(87053);let Ga=0;const Wa=e=>{const[t,s]=a.useState(!1),n=a.useRef(null),{onNavigate:i,subtask:{next_link:o,timeout_ms:r=2e3,url:l},subtaskId:c,updateFlow:u}=e||{},d=a.useCallback((()=>{const e=Math.min(100,r);let t=0;const s=setInterval((()=>{const a=n.current&&n.current.value?{response:n.current.value}:void 0;t+=e,(a&&Ga++%20==0||t>=r)&&(clearInterval(s),u(c,{...a,link:o.link_id}),i(o))}),e);return s}),[o,i,u,c,r]);return a.useEffect((()=>{let e;return s(!1),Ha.Z.replace({callback:()=>{s(!0),e=d()},scriptId:"jsInstLibrary",src:l}),()=>clearInterval(e)}),[d,l]),a.createElement(a.Fragment,null,a.createElement("input",{autoComplete:"off","data-testid":"tim_input",id:"tim_input",name:"ui_metrics",ref:n,type:"hidden"}),t?null:a.createElement(ja.Z,{style:qa.activityIndicator}))},qa=u.Z.create((e=>({activityIndicator:{height:"100%"}})));var $a=s(44487);class Ka extends a.Component{constructor(...e){super(...e),this._makeNavFunction=e=>()=>{const{onNavigate:t,subtaskId:s,updateFlow:n}=this.props;n(s,{link:e.link_id}),t(e)},this._itemFromNavLink=e=>({text:e.label||"",onClick:this._makeNavFunction(e)})}render(){const{onNavigate:e,subtask:t,subtaskInputs:s}=this.props;return a.createElement($a.Z,{cancelButtonLabel:t.cancel_link&&t.cancel_link.text,description:t.primary_text?a.createElement(U,(0,n.Z)({},t.primary_text,{nativeID:K.Q_,onNavigate:e,style:{padding:u.Z.theme.spacesPx.space16},subtaskInputs:s})):null,items:t.primary_action_links.map(this._itemFromNavLink),onCloseRequested:t.cancel_link?this._makeNavFunction(t.cancel_link):h.Z})}}var Ya=s(47790);const Qa=e=>Ya.selectBrowserPushStatus(e),Xa=(0,De.Z)().propsFromState((()=>({promptAllowed:Ya.selectShouldPromptBrowserPush,pushSettingsStatus:Qa}))).adjustStateProps((({promptAllowed:e,pushSettingsStatus:t})=>({promptAllowed:e,pushSettingsFetchStatus:t.fetchStatus,subscribed:t.subscribed}))).propsFromActions((()=>({createLocalApiErrorHandler:(0,g.createLocalApiErrorHandlerWithContextFactory)("NOTIFICATIONS_PERMISSIONS_PROMPT"),dismissPushNotificationsPrompt:Ya.dismissPushNotificationsPrompt,fetchPushSettingsIfNeeded:Ya.fetchPushSettingsIfNeeded,loadPushPromptSettingsIfNeeded:Ya.loadPushPromptSettingsIfNeeded,pushSubscribe:Ya.pushSubscribe}))).withAnalytics();const Ja=function(e){const{componentCollection:t,onPrimaryAction:s,onSecondaryAction:n}=e;return a.createElement(It,{componentCollection:t,onPrimaryAction:s,onSecondaryAction:n})};var ei=s(82998);const ti=function(e){const{handleConfirm:t,handleSkip:s,onNavigate:i,passthroughOcfScreenProps:o,subtask:r,subtaskInputs:l}=e,c=r.primary_text?a.createElement(U,(0,n.Z)({},r.primary_text,{nativeID:K.Q_,onNavigate:i,subtaskInputs:l})):null,u=r.secondary_text?a.createElement(U,(0,n.Z)({},r.secondary_text,{onNavigate:i,subtaskInputs:l})):null;return r.granted_link.label?a.createElement(ue.Z,(0,n.Z)({hideLogo:!0},o),a.createElement(ye.Z,{actionLabel:r.granted_link.label,graphic:ei.default,graphicDisplayMode:r.auto_prompt?"none":void 0,headline:c,onAction:r.auto_prompt?s:t,onClose:s,onSecondaryAction:s,secondaryActionLabel:r.auto_prompt?void 0:r.denied_link.label,subtext:u,withCloseButton:!1})):null};function si(e,t){e.granted_link.label||(0,I.ZP)("Invalid notification permission prompt subtask: granted_link does not have a label",{extra:{subtaskId:t,grantedLinkId:e.granted_link.link_id}})}class ni extends a.Component{constructor(...e){super(...e),this._actionClicked=e=>{const{onNavigate:t,subtaskId:s,updateFlow:n}=this.props;n(s,{link:e.link_id}),t(e)},this._handleSkip=()=>{const{dismissPushNotificationsPrompt:e}=this.props;e()},this._legacyHandleSkip=()=>{const{dismissPushNotificationsPrompt:e,subtask:t}=this.props;e(),this._actionClicked(t.denied_link)},this._handleConfirm=()=>{const{pushSubscribe:e}=this.props;return e().then((()=>!1))},this._legacyHandleConfirm=()=>{const{pushSubscribe:e,subtask:t}=this.props;e().then((()=>{this._actionClicked(t.granted_link)}))},this._skipIfPushPromptNotAllowed=()=>{const{promptAllowed:e,subscribed:t,subtask:s}=this.props;e||this._actionClicked(t?s.granted_link:s.denied_link)}}componentDidMount(){const{createLocalApiErrorHandler:e,fetchPushSettingsIfNeeded:t,pushSettingsFetchStatus:s,pushSubscribe:n,subtask:a,subtaskId:i}=this.props;si(a,i),t().catch(e({[k.ZP.AppInReadOnlyMode]:{customAction:h.Z}})),s===P.ZP.LOADED&&this._skipIfPushPromptNotAllowed(),a.auto_prompt&&n().then((e=>{this._actionClicked(e?a.granted_link:a.denied_link)}))}componentDidUpdate(e){const{pushSettingsFetchStatus:t,subtask:s}=this.props;t===P.ZP.LOADED&&e.pushSettingsFetchStatus===P.ZP.NONE&&this._skipIfPushPromptNotAllowed(),s!==e.subtask&&si(s,this.props.subtaskId)}render(){const{onNavigate:e,passthroughOcfScreenProps:t,subtask:s,subtaskInputs:n}=this.props;return s.component_collection?a.createElement(Ja,{componentCollection:s.component_collection,onPrimaryAction:this._handleConfirm,onSecondaryAction:this._handleSkip}):a.createElement(ti,{handleConfirm:this._legacyHandleConfirm,handleSkip:this._legacyHandleSkip,onNavigate:e,passthroughOcfScreenProps:t,subtask:s,subtaskInputs:n})}}const ai=Xa(ni),ii=(0,De.Z)().propsFromActions((()=>({callOnboardingPath:F.R2,createLocalApiErrorHandler:(0,g.createLocalApiErrorHandlerWithContextFactory)("OCF_OPEN_LINK")})));class oi extends a.Component{constructor(...e){super(...e),this._hitCallbackPath=()=>{const{callOnboardingPath:e,createLocalApiErrorHandler:t,flowName:s,subtask:{onboarding_callback_path:n}}=this.props;return n?e(n).catch(t(x(s,void 0,h.Z))):Promise.resolve()}}render(){const{onNavigate:e,subtask:t,subtaskId:s}=this.props;return a.createElement(Be,{navigationLink:t.link,onNavigate:e,subtaskAction:this._hitCallbackPath,subtaskId:s})}}const ri=ii(oi),li=(0,De.Z)().propsFromState((()=>({navigationContext:F.b,verificationSendFailureMessage:F.aR}))).propsFromActions((()=>({createLocalApiErrorHandler:(0,g.createLocalApiErrorHandlerWithContextFactory)("OCF_FLOW_PHONE_VERIFICATION"),verifyIdentifier:F.if}))).withAnalytics({component:"phone_verification"}),ci="ocfPhoneVerificationNextLink",ui="normalized_phone";class di extends a.Component{constructor(e,t){super(e,t),this._sendSmsVerificationRequest=()=>{const{createLocalApiErrorHandler:e,navigationContext:t,onNavigate:s,subtask:n,subtaskInputs:a,verifyIdentifier:i}=this.props,o=n.phone_number&&(0,L.Ds)(a,n.phone_number),r=n.phone_country_code&&(0,L.Ds)(a,n.phone_country_code),l=t&&t.action?t.action===Z.vY.ResendVoice:!!n.send_via_voice;this._isSmsAutoVerifyEnabled&&this._autoVerifySmsCode();return i({phone:o,use_voice:l,sim_country_code:r,send_auto_verify_hash:this._isSmsAutoVerifyEnabled||this._isSmsAutoVerifySupported&&this.context.featureSwitches.isTrue("responsive_web_ocf_sms_autoverify_darkwrite")}).then((e=>{const t=e.normalized_phone_number;t&&this.setState({normalized_phone:t})})).catch((t=>{const{flowName:a,verificationSendFailureMessage:i}=this.props;e(x(a,i||f))(t),s(n.fail_link)}))},this._getCodePattern=(0,xe.Z)((e=>"number"==typeof e&&Number.isSafeInteger(e)&&e>0?new RegExp(`^\\d{${e}}$`):new RegExp("^\\d{6}$"))),this._handleCodeUpdated=e=>{this.setState({code:e.target.value})},this._autoVerifySmsCode=()=>{var e;const{analytics:t}=this.props;t.scribe({element:"auto",action:"attempt"}),window.navigator.credentials.get({otp:{transport:["sms"]},signal:null==(e=this._smsAutoVerifyAbortController)?void 0:e.signal}).then((({code:e})=>{e?(this._smsAutoVerifyAbortController=void 0,this.setState({code:e},(()=>{t.scribe({element:"auto",action:"success"}),this._handleDoneButtonClick()}))):t.scribe({element:"auto",action:"missing"})})).catch((()=>{t.scribe({element:"auto",action:"failure"})}))},this._handleDoneButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props,{code:a,normalized_phone:i}=this.state;n(s,{code:a,link:t.next_link.link_id,normalized_phone:i,by_voice:!!t.send_via_voice}),e(t.next_link)};const{subtaskId:s,subtaskInputs:n}=e,a=(0,L.OG)(n,{key:ui,subtask_id:s},"")||"";this.state={code:"",normalized_phone:a,showSmsResendDialog:!1},this._isSmsAutoVerifySupported="OTPCredential"in window,this._isSmsAutoVerifyEnabled=this._isSmsAutoVerifySupported&&this.context.featureSwitches.isTrue("responsive_web_ocf_sms_autoverify_enabled"),this._isSmsAutoVerifyEnabled&&(this._smsAutoVerifyAbortController=new AbortController)}componentDidMount(){return this._sendSmsVerificationRequest()}componentWillUnmount(){this._smsAutoVerifyAbortController&&(this._smsAutoVerifyAbortController.abort(),this.props.analytics.scribe({element:"auto",action:"abort"}))}render(){const{onNavigate:e,passthroughOcfScreenProps:t,subtask:s,subtaskInputs:i}=this.props,{code_length:o,next_link:r,primary_text:l,secondary_text:c}=s,{code:u}=this.state,d=a.createElement(U,(0,n.Z)({},s.detail_text,{color:"link",onNavigate:e,style:pi.detailLink,subtaskInputs:i}));return a.createElement(ue.Z,(0,n.Z)({},t,{footer:a.createElement(G,{actionDisabled:0===u.length,actionLabel:null==r?void 0:r.label,actionTestID:ci,onAction:this._handleDoneButtonClick}),header:a.createElement(ce,{onNavigate:e,primaryTextProp:l,secondaryTextProp:c,subtaskInputs:i,withHeaderImage:!0}),providePadding:!0}),a.createElement(_s.Z,{autoComplete:"one-time-code",autoFocus:!0,helperText:d,inputMode:"numeric",label:s.hint_text,name:"verfication_code",onChange:this._handleCodeUpdated,pattern:this._getCodePattern(o).source,style:ee.formTextInput,value:u}),this.props.errorDialog)}}di.contextType=_.rC;const pi=u.Z.create((e=>({detailLink:{marginTop:e.spaces.space16}}))),hi=li(di),mi="discoverable_by_email",_i="discoverable_by_phone";class gi extends a.Component{constructor(e){super(e),this._formatSubtaskInputsForRedux=e=>({link:this.props.subtask.next_link,discoverable_by_email:e.discoverable_by_email?1:0,discoverable_by_phone:e.discoverable_by_phone?1:0}),this._getInitialSubtaskInputs=()=>{const{subtaskId:e,subtaskInputs:t}=this.props;return{discoverable_by_email:0!==(0,L.OG)(t,{key:mi,subtask_id:e}),discoverable_by_phone:0!==(0,L.OG)(t,{key:_i,subtask_id:e})}},this._handleDoneButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props;n(s,this._formatSubtaskInputsForRedux(this.state)),e(t.next_link)},this._handleDiscoverableByEmailToggle=e=>{this.setState({discoverable_by_email:e})},this._handleDiscoverableByPhoneToggle=e=>{this.setState({discoverable_by_phone:e})};const t=this._getInitialSubtaskInputs();this.state={...t}}render(){const{discoverable_by_email:e,discoverable_by_phone:t}=this.state,{onNavigate:s,passthroughOcfScreenProps:o,subtask:l,subtaskInputs:c}=this.props,{next_link:u,primary_text:d,secondary_text:p}=l;return a.createElement(ue.Z,(0,n.Z)({},o,{footer:a.createElement(G,{actionLabel:null==u?void 0:u.label,onAction:this._handleDoneButtonClick}),header:a.createElement(ce,{onNavigate:s,primaryTextProp:p||d,subtaskInputs:c,withHeaderImage:!0}),providePadding:!0}),a.createElement(i.Z,{accessibilityRole:"label",style:ee.option},a.createElement(i.Z,{style:ee.checkboxText},a.createElement(r.ZP,null,l.discoverable_by_email_label),a.createElement(U,(0,n.Z)({},l.discoverable_by_email_detail_text,{color:"gray700",onNavigate:s,size:"subtext2",subtaskInputs:c}))),a.createElement(ze.Z,{checked:e,onChange:this._handleDiscoverableByEmailToggle})),a.createElement(i.Z,{accessibilityRole:"label",style:ee.option},a.createElement(i.Z,{style:ee.checkboxText},a.createElement(r.ZP,null,l.discoverable_by_phone_label),a.createElement(U,(0,n.Z)({},l.discoverable_by_phone_detail_text,{color:"gray700",onNavigate:s,size:"subtext2",subtaskInputs:c}))),a.createElement(ze.Z,{checked:t,onChange:this._handleDiscoverableByPhoneToggle})))}}s(13675),s(94898),s(38857),s(40171),s(57093),s(65688),s(70315);var bi=s(24797);const ki=e=>{const t=(s=e).replace(/-/g,"+").replace(/_/g,"/")+"====".substring(0,(4-s.length%4)%4);var s;const n=window.atob(t);return new Uint8Array(n.length).map(((e,t)=>n.charCodeAt(t))).buffer},vi=e=>{const t=new Uint8Array(e);let s="";return t.forEach((e=>s+=String.fromCharCode(e))),btoa(s).replace(/\+/g,"-").replace(/(\/)/g,"_").replace(/=/g,"")};class fi extends a.Component{constructor(...e){super(...e),this._supportsWebAuthn=!!window.PublicKeyCredential&&"function"==typeof window.PublicKeyCredential&&"function"==typeof window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable,this._navigateAndUpdate=(e,t)=>{const{onNavigate:s,subtaskId:n,updateFlow:a}=this.props;t&&a(n,{challenge_response:t,link:e.link_id}),s(e)},this._triggerWebAuthn=e=>{const{subtask:t}=this.props,{challenge:s,fail_link:n,next_link:a}=t;this._getCredentialsRequest(s,e)().then((t=>{if(t){const s=this._getFinalResult(t,e);this._navigateAndUpdate(a,s)}else;})).catch((()=>{this._navigateAndUpdate(n)}))},this._getCredentialsRequest=(e,t)=>{const s=JSON.parse(e);if(t===Z.WP.enrollment){const e={publicKey:{challenge:ki(s.challenge),rp:s.rp,user:{...s.user,id:ki(s.user.id)},pubKeyCredParams:s.pubKeyCredParams,attestation:s.attestation,excludeCredentials:s.excludeCredentials.map((e=>({...e,id:ki(e.id)}))),extensions:s.extensions,timeout:6e4,authenticatorSelection:{authenticatorAttachment:"cross-platform",userVerification:"discouraged"}}};return()=>{var t;return(null==(t=navigator.credentials)?void 0:t.create(e))||Promise.resolve()}}{const{publicKeyCredentialRequestOptions:e}=s,t={publicKey:{rpId:"twitter.com",extensions:{appid:e.extensions.appid},challenge:ki(e.challenge),userVerification:"discouraged",timeout:6e4,allowCredentials:(n=e.allowCredentials,n.map((e=>({type:"public-key",id:ki(e.id)}))))}};return()=>{var e;return(null==(e=navigator.credentials)?void 0:e.get(t))||Promise.resolve()}}var n},this._getFinalResult=(e,t)=>{const{id:s,response:n,type:a}=e;let i;return"enrollment"===t&&n.attestationObject?i={id:s,type:a,response:{clientDataJSON:vi(n.clientDataJSON),attestationObject:vi(n.attestationObject)},clientExtensionResults:{}}:"verification"===t&&n.authenticatorData&&(i={id:s,type:a,response:{clientDataJSON:vi(n.clientDataJSON),authenticatorData:vi(n.authenticatorData),signature:vi(n.signature),userHandle:""},clientExtensionResults:{appid:!0}}),JSON.stringify(i||"")}}componentDidMount(){const{subtask:{action_type:e,unsupported_link:t}}=this.props;this._supportsWebAuthn?(0,bi.Z)(this.props.errorDialog)&&this._triggerWebAuthn(e):t&&this._navigateAndUpdate(t)}render(){const{errorDialog:e,onNavigate:t,passthroughOcfScreenProps:s,subtask:o,subtaskInputs:r}=this.props;return a.createElement(ue.Z,(0,n.Z)({},s,{providePadding:!0}),e||a.createElement(i.Z,null,this._supportsWebAuthn?null:a.createElement(U,(0,n.Z)({},o.unsupported_error_message,{onNavigate:t,subtaskInputs:r}))))}}var yi=s(82939),xi=s(48974),wi=s(80779),Ci=s(5255),Ii=s(18255),Ei=s(33626);const Si=(e,t)=>{const s=Ei.C6(e),[n]=s?Ii.m3(e,s):[];return n},Zi=(0,De.Z)().propsFromState((()=>({loggedInUser:jt.ZP.selectLoggedInUser,avatarMedia:Si}))).propsFromActions((()=>({addAvatarMedia:Ei._D,removeAvatarMedia:Ei.Xw}))),Ti="ocfSelectAvatarSkipForNowButton",Ai="ocfSelectAvatarNextButton";class Fi extends a.Component{constructor(e){super(e),this._handleCropDone=()=>this.setState({done:!0,showCropper:!1}),this._handleCropCancel=()=>this._handleCropDone(),this._handleImageMediaChange=e=>{const{addAvatarMedia:t}=this.props;t(e[0]),this.setState({mediaId:e[0],showCropper:!0,done:!0})},this._handleImageMediaFailure=()=>{this._handleSkipButtonClick()},this._handleImageMediaRemove=()=>{const{removeAvatarMedia:e}=this.props;e(),this.setState({done:!1,showCropper:!1})},this._handleDoneButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props;n(s,{link:t.next_link.link_id}),e(t.next_link)},this._handleSkipButtonClick=()=>{const{onNavigate:e,subtask:{skip_link:t},subtaskId:s,updateFlow:n}=this.props;t&&n(s,{link:t.link_id}),t&&e(t)},this.state={done:!1,showCropper:!1,mediaId:void 0}}render(){const{errorDialog:e,onNavigate:t,passthroughOcfScreenProps:s,subtask:o,subtaskInputs:r}=this.props,{next_link:l,primary_text:c,secondary_text:u,skip_link:d}=o;return a.createElement(ue.Z,(0,n.Z)({},s,{footer:a.createElement(G,{actionDisabled:!d&&!this.state.mediaId,actionLabel:this.state.done||!d?null==l?void 0:l.label:void 0,actionTestID:Ai,onAction:this._handleDoneButtonClick,onSecondaryAction:this._handleSkipButtonClick,secondaryActionLabel:this.state.done||null==d?void 0:d.label,secondaryActionTestID:Ti}),header:a.createElement(ce,{onNavigate:t,primaryTextProp:c,secondaryTextProp:u,subtaskInputs:r}),providePadding:!0}),a.createElement(i.Z,null,this._renderMediaPickerWithPreview()),this.state.showCropper&&void 0!==this.state.mediaId?a.createElement(xi.Z,{circle:!0,defaultAspectRatio:1,mediaId:this.state.mediaId,onCancel:this._handleCropCancel,onDone:this._handleCropDone}):null,e)}_renderMediaPickerWithPreview(){const{avatarMedia:e,loggedInUser:t}=this.props,{done:s}=this.state;return a.createElement(i.Z,{style:Pi.centerContent},a.createElement(wi.default,{borderRadius:yi.A.INFINITE,currentContent:t?a.createElement(Se.default,{size:"custom",uri:t.profile_image_url_https}):null,location:Ci.vC.Avatar,mediaItem:e,onChange:this._handleImageMediaChange,onFailure:this._handleImageMediaFailure,onRemove:s?this._handleImageMediaRemove:void 0,rootStyle:Pi.avatarContainer}))}}const Pi=u.Z.create((e=>({avatarContainer:{borderWidth:e.borderWidths.medium,borderColor:e.colors.white,borderStyle:"solid",marginTop:e.spaces.space64,marginBottom:e.spaces.space64,width:`calc(${e.spaces.space64} * 3)`},bannerContainer:{marginTop:e.spaces.space64,marginBottom:e.spaces.space64,maxHeight:"9em"},banner:{height:"100%"},centerContent:{alignItems:"center",display:"flex",width:"100%"}}))),Ni=Zi(Fi);var Bi=s(94407),Di=s(12934),Li=s(400),Oi=s(84973);const Vi=(e,t)=>{const s=Ei.C6(e),[n]=s?Ii.m3(e,s):[];return n},Ri=(e,t)=>{const s=Ei.vW(e),[n]=s?Ii.m3(e,s):[];return n},Mi=(0,De.Z)().propsFromState((()=>({loggedInUser:jt.ZP.selectLoggedInUser,avatarMedia:Vi,bannerMedia:Ri}))).propsFromActions((()=>({addBannerMedia:Ei.NJ,removeBannerMedia:Ei.HR}))),Ui="ocfSelectBannerSkipForNowButton",zi="ocfSelectBannerNextButton";class ji extends a.Component{constructor(e){super(e),this._handleImageMediaRemove=()=>{const{removeBannerMedia:e}=this.props;e(),this.setState({done:!1,showCropper:!1})},this._handleCropDone=()=>this.setState({done:!0,showCropper:!1}),this._handleCropCancel=()=>this._handleCropDone(),this._handleImageMediaChange=e=>{const{addBannerMedia:t}=this.props;t(e[0]),this.setState({media_id:e[0],showCropper:!0,done:!0})},this._handleImageMediaFailure=()=>{this._handleSkipButtonClick()},this._handleDoneButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props;n(s,{link:t.next_link.link_id}),e(t.next_link)},this._handleSkipButtonClick=()=>{const{onNavigate:e,subtask:{skip_link:t},subtaskId:s,updateFlow:n}=this.props;t&&n(s,{link:t.link_id}),t&&e(t)},this.state={done:void 0,media_id:void 0,showCropper:!1}}render(){const{errorDialog:e,onNavigate:t,passthroughOcfScreenProps:s,subtask:o,subtaskInputs:r}=this.props,{next_link:l,primary_text:c,secondary_text:u,skip_link:d}=o;return a.createElement(ue.Z,(0,n.Z)({},s,{footer:a.createElement(G,{actionDisabled:!d&&!this.state.media_id,actionLabel:this.state.done||!d?null==l?void 0:l.label:void 0,actionTestID:zi,onAction:this._handleDoneButtonClick,onSecondaryAction:this._handleSkipButtonClick,secondaryActionLabel:this.state.done||null==d?void 0:d.label,secondaryActionTestID:Ui}),header:a.createElement(ce,{onNavigate:t,primaryTextProp:c,secondaryTextProp:u,subtaskInputs:r,withHeaderImage:!0}),providePadding:!0}),a.createElement(i.Z,{style:Hi.container},this._renderMediaPickerWithPreview(),a.createElement(i.Z,{style:Oi.Z.avatarAndButton},this._renderAvatar()),this._renderNames()),this.state.showCropper&&void 0!==this.state.media_id?a.createElement(xi.Z,{defaultAspectRatio:3,mediaId:this.state.media_id,onCancel:this._handleCropCancel,onDone:this._handleCropDone}):null,e)}_renderMediaPickerWithPreview(){const{bannerMedia:e,loggedInUser:t}=this.props,s=e||!!t&&!!t.profile_banner_url,{done:n}=this.state;return a.createElement(wi.default,{aspectRatio:3,currentContent:a.createElement(Di.Z,{ratio:u.Z.theme.aspectRatios.profileBanner},s&&t?a.createElement(Bi.Z,{source:{uri:t.profile_banner_url},style:Hi.banner}):null),location:Ci.vC.ProfileBanner,mediaItem:e,onChange:this._handleImageMediaChange,onFailure:this._handleImageMediaFailure,onRemove:n?this._handleImageMediaRemove:void 0,rootStyle:Hi.bannerContainer})}_renderAvatar(){const{avatarMedia:e,loggedInUser:t}=this.props,s=e&&e.mediaFile&&e.mediaFile.url||t&&t.profile_image_url_https;return a.createElement(Se.default,{accessibilityHidden:!0,borderColor:"white",borderWidth:"medium",focusable:!1,size:"custom",style:Oi.Z.avatar,uri:s})}_renderNames(){const{loggedInUser:e}=this.props;if(!e)return null;const t=e.name,s=`@${e.screen_name}`,n={isBlueVerified:e.is_blue_verified,isProtected:e.protected,isVerified:e.verified,verifiedType:e.verified_type};return a.createElement(i.Z,{style:Hi.nameContainer},a.createElement(r.ZP,{align:"left",style:Hi.names},a.createElement(r.ZP,{accessibilityRole:"heading",size:"title4",style:Hi.displayName,weight:"bold"},t,a.createElement(r.ZP,{size:"title4",style:Hi.userBadges},a.createElement(Li.Z,n))),a.createElement(r.ZP,{color:"gray700",style:Hi.screenName},s)))}}const Hi=u.Z.create((e=>({container:{paddingBottom:e.spaces.space64},avatarContainer:{marginStart:e.spaces.space16,marginTop:"-25%",maxWidth:"calc(${theme.spaces.space16} * 8)",width:"25%"},bannerContainer:{marginTop:e.spaces.space64,marginBottom:e.spaces.space64,maxHeight:"9em"},banner:{height:"100%"},nameContainer:{marginStart:e.spaces.space16},names:{display:"block",marginBottom:e.spaces.space12},displayName:{writingDirection:"ltr",display:"block",marginTop:e.spaces.space4},screenName:{writingDirection:"ltr"},userBadges:{display:"inline-flex",flexDirection:"row",flexShrink:0}}))),Gi=Mi(ji);var Wi=s(28316),qi=s(39466),$i=s(8329),Ki=s(51908);const Yi="Ocf_Scroll_Prompt_Container",Qi=u.Z.create((e=>({icon:{height:"1.5em",width:"1.5em"},pillContainer:{bottom:e.spaces.space16,alignItems:"center",start:"0",end:"0",margin:"auto",zIndex:1},pillContainerNarrow:{position:"fixed"},pillContainerModal:{position:"absolute"}}))),Xi=({isModal:e,label:t,onPress:s})=>{const n=[Qi.pillContainer,e?Qi.pillContainerModal:Qi.pillContainerNarrow];return a.createElement(i.Z,{style:n,testID:Yi},a.createElement(D.ZP,{icon:a.createElement(Ki.default,{style:Qi.icon}),onPress:s,type:"primaryFilled"},a.createElement(r.ZP,{size:"body",weight:"normal"},t)))},Ji="ocfSettingsListNextButton",eo="ocfSettingsListSkipButton",to="ocfSettingsListPrimaryText";class so extends a.Component{constructor(e){super(e),this._formatSubtaskInputsForStore=e=>(0,Je.Z)(e).map((e=>{const[t,{result:s,type:n}]=e;return{key:t,response_data:{[n]:{result:s}}}})),this._loadSubtaskInputsFromStore=()=>{const{subtaskId:e,subtaskInputs:t}=this.props;return((0,L.OG)(t,{key:Z.Xb,subtask_id:e},[])||[]).reduce(((e,t)=>{const{key:s}=t,[n]=Object.keys(t.response_data),a=t.response_data[n].result;return e[s]={result:a,type:n},e}),{})},this._updateFlow=e=>{const{subtask:t,subtaskId:s,updateFlow:n}=this.props,{next_link:a}=t,{settingsValues:i}=this.state;e?n(s,{[Z.Xb]:this._formatSubtaskInputsForStore(i),link:e.link_id}):a&&n(s,{[Z.Xb]:this._formatSubtaskInputsForStore(i),link:a.link_id})},this._handleShowMore=()=>{this.setState({showMore:!0})},this._handleNextButtonPress=()=>{const{onNavigate:e,subtask:t}=this.props,{next_link:s}=t;this._updateFlow(),s&&e(s)},this._handleSubListBackClick=()=>{this.setState({isSubList:!1,showDividers:!1,showMoreConfig:null,subList:[],subListHeader:null}),this._updateFlow()},this._handleSettingGroupClick=e=>{var t;const{primary_text:s,value_data:n,value_type:a}=e,i=null==n||null==(t=n.settings_group_data)?void 0:t.settings;i&&a===Z.h0.SettingsGroup&&this.setState({isSubList:!0,showDividers:!1,showMoreConfig:null,subList:i,subListHeader:s})},this._handleScrollPromptClick=()=>{this._viewport&&this._viewport.scrollBy(this._viewport.getRect().getHeight())},this._handleViewportSet=e=>{const{subtask:t}=this.props;t.scroll_hint&&(this._removeScrollListener&&this._removeScrollListener(),this._viewport=e,this._viewport&&(this._removeScrollListener=this._viewport.addScrollListener(this._handleViewportScroll)))},this._handleViewportScroll=(0,qi.Z)((()=>{this.state.lastSettingSeen||this.setState({lastSettingSeen:this._isLastSettingInViewport()})}),250),this._isLastSettingInViewport=()=>{if(this._lastSetting&&this._viewport){var e;const t=this._lastSetting.getBoundingClientRect(),s=null==(e=this._viewport)?void 0:e.getRect();if(s)return t.top>=s.getTop()&&t.bottom<=s.getBottom()}return!1},this._isPrompt=()=>{const{subtask:e}=this.props;return"prompt"===e.style},this._setSettingsRef=e=>t=>{const{isSubList:s}=this.state;if(this.props.subtask.scroll_hint&&!s&&e&&void 0===this._lastSetting){this._lastSetting=Wi.findDOMNode(t);const e=this._isLastSettingInViewport();e&&!this.state.lastSettingSeen&&this.setState({lastSettingSeen:e})}else this._lastSetting=void 0},this._handleSettingToggle=e=>{const{value_identifier:t,value_type:s}=e;if(t&&(0,L._w)(s)){const{settingsValues:e}=this.state;this.setState({settingsValues:{...e,[t]:{...e[t],result:!e[t].result}}})}},this._handleSettingTextChange=(e,t)=>{const{value_identifier:s}=e;if(s){const{settingsValues:e}=this.state;this.setState({settingsValues:{...e,[s]:{...e[s],result:t}}})}},this._handleCancelButtonPress=()=>{const{onNavigate:e,subtask:t}=this.props,{cancel_link:s}=t;s&&(this._updateFlow(s),e(s))},this._getSettingsValueNextLink=()=>{const{subtask:e}=this.props;if(e.next_link)return e.next_link;for(const s of e.settings){var t;const{value_data:e,value_identifier:n}=s,a=null==e||null==(t=e.button)?void 0:t.navigation_link;if(n===Z.ZF.NextButton&&a)return a}};const{subtask:t}=e,s=this._initializeSettingsState(t.settings);this.state={isSubList:!1,showDividers:!!t.show_divider,showMoreConfig:t.show_more,showMore:!1,subList:[],subListHeader:null,settingsValues:s,lastSettingSeen:!1}}componentDidMount(){const{isModal:e,subtask:t,viewport:s}=this.props;t.scroll_hint&&!e&&this._isPrompt()&&(this._viewport=s,this._removeScrollListener=this._viewport.addScrollListener(this._handleViewportScroll)),this._updateFlow()}componentWillUnmount(){this._removeScrollListener&&this._removeScrollListener()}render(){const{isSubList:e}=this.state;return e?this._renderSubList():this._renderMainList()}_renderMainList(){var e;const{errorDialog:t,isModal:s,onNavigate:o,passthroughOcfScreenProps:l,subtask:c,subtaskId:u,subtaskInputs:d}=this.props,{header:p,primary_text:h,secondary_text:m}=c,{lastSettingSeen:_}=this.state,g=!!!c.scroll_hint||_,b=this._isPrompt(),k=this._renderNavigationButtons(g),v=c.scroll_hint,f=!g&&v?a.createElement(Xi,{isModal:!!s,label:v,onPress:this._handleScrollPromptClick}):null,y=(null!=(e=c.horizontal_style)?e:Z.YI.Normal)===Z.YI.Compact,x=u===Z.D7;return a.createElement(ue.Z,(0,n.Z)({},l,{footer:b?void 0:k,onViewportSet:this._handleViewportSet,providePadding:!b&&!y,scrollPrompt:f}),a.createElement(i.Z,{style:[y&&ee.contentAreaCompact,no.bottomPadding,b&&no.centeredRoot]},a.createElement(ce,{header:p,onNavigate:o,primaryTextProp:h,primaryTextTestID:to,secondaryTextProp:m,subtaskInputs:d}),this._renderSettingsList(c.settings),x?a.createElement(r.ZP,{color:"gray700",size:"subtext2"},J.K2):null,c.detail_text?a.createElement(U,(0,n.Z)({},c.detail_text,{color:"gray700",onNavigate:o,style:no.detailText,subtaskInputs:d})):null,b&&k?a.createElement(i.Z,{style:no.doneButtonContainer},k):null),t)}_renderSubList(){const{onNavigate:e,subtaskInputs:t}=this.props,{subList:s,subListHeader:o}=this.state;return a.createElement(ue.Z,{onBackClick:this._handleSubListBackClick},a.createElement(i.Z,{style:ee.contentArea},a.createElement(U,(0,n.Z)({},o,{onNavigate:e,size:"title4",style:no.headline,subtaskInputs:t,weight:"bold"})),this._renderSettingsList(s)))}_renderSettingsList(e){const{addToast:t,onNavigate:s,removeContacts:n,subtaskId:i,subtaskInputs:o}=this.props,{showDividers:r,showMore:l,showMoreConfig:c}=this.state,u=this._getSettingsValueNextLink();return a.Children.toArray(e.map(((d,p)=>{const h=p===e.length-1;if(c&&!l){if(p===c.initial_to_show)return a.createElement(Me.Z,{color:"primary",label:c.text,onPress:this._handleShowMore});if(p>c.initial_to_show)return null}return a.createElement(mn,{addToast:t,nextLink:u,onNavigate:s,onSettingGroupClick:this._handleSettingGroupClick,onSettingTextChanged:this._handleSettingTextChange,onSettingToggle:this._handleSettingToggle,ref:this._setSettingsRef(h),removeContacts:n,settingValue:d,showDividers:!h&&r,subtaskId:i,subtaskInputs:o,updateFlow:this._updateFlow})})))}_renderNavigationButtons(e){const{subtask:t}=this.props,{cancel_link:s,next_link:n}=t,i={actionDisabled:!e,actionLabel:null==n?void 0:n.label,actionTestID:Ji,onAction:this._handleNextButtonPress,onSecondaryAction:this._handleCancelButtonPress,secondaryActionLabel:null==s?void 0:s.label,secondaryActionTestID:eo};return j(i)?a.createElement(G,i):null}_initializeSettingsState(e){const t=this._loadSubtaskInputsFromStore();return t&&Object.keys(t).length>0?t:e.reduce(((e,t)=>{const{value_data:s,value_identifier:n,value_type:a}=t;var i;if(n&&s&&(0,L._w)(a))e[n]={result:null==(i=s.boolean_data)?void 0:i.initial_value,type:Object.keys(s)[0]};else if(n&&a===Z.h0.TextField)e[n]={result:"",type:"text_data"};else if(a===Z.h0.SettingsGroup){var o;((null==s||null==(o=s.settings_group_data)?void 0:o.settings)||[]).forEach((t=>{const{value_data:s,value_identifier:n,value_type:a}=t;var i;n&&s&&(0,L._w)(a)&&(e[n]={result:null==(i=s.boolean_data)?void 0:i.initial_value,type:Object.keys(s)[0]})}))}return e}),{})}}const no=u.Z.create((e=>({centeredRoot:{alignItems:"center"},headline:{marginBottom:e.spaces.space12},detailText:{marginTop:e.spaces.space40},bottomPadding:{paddingBottom:e.spaces.space48},doneButtonContainer:{marginTop:e.spaces.space40}}))),ao=(0,$i.Z)(so),io=()=>s.e("ondemand.qrcode").then(s.t.bind(s,74061,19)),oo="ocfShowCodeNextLink",ro="ocfShowCodeSkipLink";function lo(e){const{errorDialog:t,onNavigate:s,passthroughOcfScreenProps:o,subtask:{code:l,detail_text:c,header:u,next_link:d,skip_link:p,style:h},subtaskId:m,subtaskInputs:_,updateFlow:g}=e,b=c?a.createElement(U,(0,n.Z)({},c,{onNavigate:s,subtaskInputs:_})):null;return a.createElement(ue.Z,(0,n.Z)({},o,{footer:a.createElement(G,{actionLabel:null==d?void 0:d.label,actionTestID:oo,onAction:()=>{g(m,{link:d.link_id}),s(d)},onSecondaryAction:()=>{p&&(g(m,{link:p.link_id}),s(p))},secondaryActionLabel:null==p?void 0:p.label,secondaryActionTestID:ro,secondaryActionType:"primaryOutlined"}),header:a.createElement(ce,{header:u,onNavigate:s,subtaskInputs:_,withHeaderImage:!0}),providePadding:!0}),h===Z.C_.Qr?a.createElement(i.Z,{style:co.qrCode},a.createElement("canvas",{ref:t=>{const{code:s}=e.subtask;io().then((e=>{t&&e.toCanvas(t,s,{margin:5,scale:5})}))}}),a.createElement(i.Z,{style:co.detailText},b)):a.createElement(a.Fragment,null,a.createElement(r.ZP,{size:"title4",style:co.code,weight:"bold"},l),a.createElement(i.Z,{style:co.detailText},b)),t)}const co=u.Z.create((e=>({qrCode:{alignItems:"center",paddingVertical:e.spaces.space16},code:{backgroundColor:e.colors.gray0,margin:"auto",padding:15,width:"100%",textAlign:"center"},detailText:{paddingTop:e.spaces.space16},secondaryButton:{marginTop:e.spaces.space12}})));var uo=s(96958),po=s(17492),ho=s(30535);const mo=e=>!ho.LP(e).is_eu_country,_o=(0,g.createLocalApiErrorHandlerWithContextFactory)("OCF_FLOW"),go=(0,De.Z)().propsFromState((()=>({navigationContext:F.b,personalizationSettings:ho.kQ,shouldPropagateP13nSettings:mo}))).propsFromActions((()=>({createLocalApiErrorHandler:_o,fetchPreferencesIfNeeded:ho.CP,scribeAction:Mt.n9,syncPersonalizationSettings:ho.Z$}))),bo=p().d44efc66,ko=p().b4867a18,vo=p().d4e220b4;class fo extends a.Component{constructor(...e){super(...e),this.state={errorMessage:"",isValid:!0,value:""},this._updateValue=e=>{const{callback:t}=this.props,s=(0,bi.Z)(e.trim()),n=!s&&-1!==e.toLowerCase().indexOf("twitter"),a=!s&&!n;let i="";s?i=bo:n&&(i=ko),this.setState({errorMessage:i,isValid:a,value:e}),t(e,a)},this._handleValueChange=e=>{const{value:t}=e.target;this._updateValue(t)}}componentDidMount(){const{defaultValue:e}=this.props;e&&this._updateValue(e)}render(){const{callback:e,defaultValue:t,label:s,...i}=this.props,{errorMessage:o,isValid:r}=this.state,l=this.context.featureSwitches.getValue("user_display_name_max_limit",50);return a.createElement(_s.Z,(0,n.Z)({},i,{errorText:o,invalid:!r,label:s||vo,maxLength:"number"==typeof l?l:50,name:"name",onChange:this._handleValueChange,positionCursorAtEnd:!0,style:ee.formTextInput,value:this.state.value}))}}fo.contextType=_.rC;const yo="ocfSignupNextLink",xo=p().eab9ceb2,wo=Object.freeze({Birthday:"birthday",Email:"email",Name:"name",Phone:"phone_number"}),Co="select_birthday",Io="select_email",Eo="select_name",So="select_phone",Zo={page:"onboarding",component:"signup"};class To extends a.Component{constructor(e){super(e),this._getDefaultIdentifierField=()=>{const{subtask:{allowed_identifiers:e}}=this.props;return e===Z.AA.EmailOnly||e===Z.AA.EmailThenPhone?wo.Email:wo.Phone},this._renderActiveFieldToggle=()=>{const{subtask:{allowed_identifiers:e}}=this.props;return e!==Z.AA.EmailOnly&&e!==Z.AA.PhoneOnly?a.createElement(r.ZP,{align:"right",color:"link",onPress:this._handleActiveTextToggle,withInteractiveStyling:!0},this._getToggleActiveTextTitle()):null},this._renderNameField=()=>{const{navigationContext:e,subtask:t,subtaskId:s,subtaskInputs:n}=this.props,i=(0,L.OG)(n,{key:wo.Name,subtask_id:s},""),o=e.action,r={autoComplete:"name",autoFocus:!o||o===Eo,callback:this._updateNameInfo,defaultValue:i,onFocus:this._handleNameFocus,label:t.name_hint};return a.createElement(fo,r)},this._renderActiveTextField=()=>{const{subtask:e}=this.props,{activeTextField:t,defaultActiveText:s}=this.state,n=this._shouldFocusActiveTextField(),i={autoComplete:t===wo.Phone?"tel":"email",autoFocus:n,defaultValue:s,name:t===wo.Phone?"phone_number":"email",label:t===wo.Phone?e.phone_hint:e.email_hint,onRef:this._setInputRef,onValidityChange:this._updateValidity,style:Ao.phoneEmailTextField};return t===wo.Phone?a.createElement(On,i):a.createElement(Hs,i)},this._handleDateChange=e=>{this.setState({birthdayValue:e,isBirthdayValid:this._isCompleteDate(e)},this._updateValidity)},this._isCompleteDate=e=>!!(e&&e.year&&e.month&&e.day),this._getIdentifierValue=()=>this._input&&this._input.getValue(),this._isValid=()=>{const{isBirthdayValid:e,isNameValid:t}=this.state,{subtask:s}=this.props,n=s.ignore_birthday||e;return t&&n&&this._input&&this._input.isValid()},this._setTimRef=e=>{this._timInput=e},this._updateValidity=()=>{this.setState({isValid:this._isValid()})},this._updateNameInfo=(e,t)=>{this.setState({isNameValid:t,nameValue:e},this._updateValidity)},this._handleFetchPreferences=()=>{const{createLocalApiErrorHandler:e,fetchPreferencesIfNeeded:t}=this.props;t().catch(e())},this._shouldFocusActiveTextField=()=>{const{navigationContext:e}=this.props,{activeTextField:t}=this.state,s=t===wo.Phone?So:Io;return!this.state.hasNameFieldBeenAutoFocused&&e.action===s},this._handleActiveTextToggle=()=>{const{activeTextField:e}=this.state,t=e===wo.Phone?wo.Email:wo.Phone;this._scribeEvent(t,"choose"),this._input&&this._input.clear(),this.setState({activeTextField:t,defaultActiveText:""})},this._getToggleActiveTextTitle=()=>{const{subtask:e}=this.props,{activeTextField:t}=this.state;return t===wo.Phone?e.use_email_text:e.use_phone_text},this._handleNameFocus=()=>{this.setState({hasNameFieldBeenAutoFocused:!0})},this._handleNextButtonClick=()=>{const{onNavigate:e,shouldPropagateP13nSettings:t,subtask:s,subtaskId:n,updateFlow:a}=this.props,{activeTextField:i,birthdayValue:o,nameValue:r}=this.state,{allowCookieUse:l,allowDeviceAccess:c,allowPartnerships:u,allowPersonalization:d}=this.props.personalizationSettings||{},p=i===wo.Email&&s.email_next_link?s.email_next_link:s.next_link,h=this._timInput&&this._timInput.value?{response:this._timInput.value}:void 0,m=this._getIdentifierValue()||void 0,_={js_instrumentation:h,link:p.link_id,name:r};_[i]=m,!s.ignore_birthday&&o&&(_.birthday=o),t&&(_.personalization_settings={allow_cookie_use:!!l,allow_device_personalization:!!c,allow_partnerships:!!u,allow_ads_personalization:!!d}),a(n,_),e(p)},this._scribeEvent=(e,t)=>{const{scribeAction:s}=this.props;s({...Zo,element:e,action:t})},this._setInputRef=e=>{this._input=e};const{navigationContext:t,subtask:s,subtaskId:n,subtaskInputs:i}=e,o=(0,L.OG)(i,{key:wo.Name,subtask_id:n},""),l=(0,L.OG)(i,{key:wo.Phone,subtask_id:n},"")||s.phone,c=(0,L.OG)(i,{key:wo.Email,subtask_id:n},"")||s.email,u={day:void 0,month:void 0,year:void 0},d=(0,L.OG)(i,{key:wo.Birthday,subtask_id:n},void 0)||u,p=(e=>{switch(e){case So:return{type:wo.Phone,value:l};case Io:return{type:wo.Email,value:c};default:return{type:c?wo.Email:this._getDefaultIdentifierField(),value:c||l}}})(t.action);this.state={activeTextField:p.type,birthdayValue:d,defaultActiveText:p.value,nameValue:o,hasNameFieldBeenAutoFocused:!1,isNameValid:void 0,isBirthdayValid:this._isCompleteDate(d),isValid:void 0}}componentDidMount(){const{createLocalApiErrorHandler:e,syncPersonalizationSettings:t}=this.props;Ha.Z.inject({scriptId:"jsInstLibrary",src:"https://twitter.com/i/js_inst?c_name=ui_metrics"}),this._handleFetchPreferences(),t().catch(e())}componentDidUpdate(){this._shouldFocusActiveTextField()&&this._input&&this._input.focus()}render(){const{onNavigate:e,passthroughOcfScreenProps:t,subtask:s,subtaskInputs:o}=this.props,{next_link:r,primary_text:l,secondary_text:c}=s;return a.createElement(ue.Z,(0,n.Z)({},t,{footer:a.createElement(G,{actionDisabled:!this.state.isValid,actionLabel:null==r?void 0:r.label,actionTestID:yo,onAction:this._handleNextButtonClick}),header:a.createElement(ce,{onNavigate:e,primaryTextProp:l,secondaryTextProp:c,subtaskInputs:o,withHeaderImage:!0}),providePadding:!0}),a.createElement(uo.Z,{title:xo}),a.createElement(i.Z,null,this._renderNameField(),this._renderActiveTextField(),this._renderActiveFieldToggle(),this._renderBirthdayField(),a.createElement("input",{autoComplete:"off",name:"ui_metrics",ref:this._setTimRef,type:"hidden"})))}_renderBirthdayField(){const{navigationContext:e,subtask:t}=this.props,{birthday_explanation:s,birthday_hint:n,ignore_birthday:o}=t,l=this.state.birthdayValue||{},c=e.action===Co;return o?null:a.createElement(i.Z,{accessibilityLabel:n,accessibilityRole:"group",style:Ao.section},a.createElement(r.ZP,{size:"body",style:Ao.sectionHeading,weight:"bold"},n),a.createElement(r.ZP,{color:"gray700",size:"subtext1",style:Ao.sectionSubHeading},s),a.createElement(ys.Z,{autofocus:c,day:l.day,label:t.birthday_hint||"",minSelectableYear:(0,po.Q)(),month:l.month,onChange:this._handleDateChange,year:l.year}))}}const Ao=u.Z.create((e=>({section:{marginTop:e.spaces.space20},sectionHeading:{marginBottom:e.spaces.space8},sectionSubHeading:{marginBottom:e.spaces.space4},phoneEmailTextField:{paddingHorizontal:0}}))),Fo=go(To),Po="ocfSignupReviewNextLink",No=p().a565833e,Bo=p().h3629783,Do=p().j1c3f4b9,Lo=p().c119dee8,Oo=p().f70cd5ee,Vo=p().a3841918,Ro=p().d4e220b4;class Mo extends a.Component{constructor(...e){super(...e),this._handleSignupButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,subtaskInputs:n,updateFlow:a}=this.props,{email:i,phone_number:o}=t,r=o&&o.subtask_data_reference&&(0,L.OG)(n,o.subtask_data_reference),l=i&&i.subtask_data_reference&&(0,L.OG)(n,i.subtask_data_reference);let c;this._isOldEnoughOrIgnored()?r?c=t.phone_next_link:l&&(c=t.email_next_link):c=t.invalid_birthday_link,c&&a(s,{link:c.link_id}),c&&e(c)},this._handleNavigationClick=e=>{const{onNavigate:t}=this.props;t(e)},this._handleNameEdit=()=>{const{subtask:e}=this.props;this._handleNavigationClick(e.name_edit_link)},this._handleBirthdayEdit=()=>{const{subtask:e}=this.props;this._handleNavigationClick(e.birthday_edit_link)},this._handlePhoneEdit=()=>{const{subtask:e}=this.props;this._handleNavigationClick(e.phone_edit_link)},this._handleEmailEdit=()=>{const{subtask:e}=this.props;this._handleNavigationClick(e.email_edit_link)},this._handlePrivacyOptionsClick=e=>t=>{t.preventDefault(),this._handleNavigationClick(e)},this._isOldEnoughOrIgnored=()=>{const{birthday:e,birthday_requirement:t,ignore_birthday:s}=this.props.subtask;if(s)return!0;{const s=e&&e.subtask_data_reference&&(0,L.OG)(this.props.subtaskInputs,e.subtask_data_reference),n=s&&new Date(s.year,s.month-1,s.day),{day:a,month:i,year:o}=t||{},r=o&&i&&a&&new Date(o,i-1,a);return!n||!r||n<=r}},this._getSignupButtonLabel=()=>{const{subtask:e,subtaskInputs:t}=this.props,{email:s,phone_number:n}=e,a=n&&(0,L.Ds)(t,n),i=s&&(0,L.Ds)(t,s);return a?e.phone_next_link.label:i?e.email_next_link.label:No}}render(){const{errorDialog:e,onNavigate:t,passthroughOcfScreenProps:s,subtask:i,subtaskInputs:o}=this.props,{detail_text:r,primary_text:l,secondary_text:c}=i;return a.createElement(ue.Z,(0,n.Z)({},s,{footer:a.createElement(G,{actionLabel:this._getSignupButtonLabel(),actionTestID:Po,actionType:"brandFilled",detailText:r,onAction:this._handleSignupButtonClick,onNavigate:t,subtaskInputs:o}),header:a.createElement(ce,{onNavigate:t,primaryTextProp:l,secondaryTextProp:c,subtaskInputs:o,withHeaderImage:!0}),providePadding:!0}),this._renderNameField(),this._renderPhoneOrEmailField(),this._maybeRenderBirthdayField(),e)}_renderNameField(){var e;const{subtask:t,subtaskInputs:s}=this.props,n=t.name&&(0,L.Ds)(s,t.name),o=null!=(e=t.name_hint)?e:Ro;return a.createElement(i.Z,{onClick:this._handleNameEdit,testID:"editName"},a.createElement(_s.Z,{defaultValue:n||"",label:o,name:"name",showValidationIcon:!0,style:ee.formTextInput}))}_maybeRenderBirthdayField(){var e;const{subtask:t,subtaskInputs:s}=this.props,n=t.birthday&&t.birthday.subtask_data_reference&&(0,L.OG)(s,t.birthday.subtask_data_reference),{day:o,month:r,year:l}=n||{},c=o&&r&&l&&Bo(new Date(l,r-1,o)),u=null!=(e=t.birthday_hint)?e:Lo;return!t.ignore_birthday&&n&&c?a.createElement(i.Z,{accessibilityLabel:Do({birthdate:c}),accessibilityRole:"button",onClick:this._handleBirthdayEdit,testID:"editBirthday"},a.createElement(_s.Z,{defaultValue:c,label:u,name:"birthday",showValidationIcon:!0,style:ee.formTextInput})):null}_renderPhoneOrEmailField(){const{subtask:{email:e,email_hint:t,phone_hint:s,phone_number:n},subtaskInputs:o}=this.props,r=n&&n.subtask_data_reference&&(0,L.OG)(o,n.subtask_data_reference),l=e&&e.subtask_data_reference&&(0,L.OG)(o,e.subtask_data_reference),c=null!=s?s:Oo,u=null!=t?t:Vo;return r?a.createElement(i.Z,{onClick:this._handlePhoneEdit,testID:"editPhone"},a.createElement(_s.Z,{defaultValue:r||"",label:c,name:"phone",showValidationIcon:!0,style:ee.formTextInput})):l?a.createElement(i.Z,{onClick:this._handleEmailEdit,testID:"editEmail"},a.createElement(_s.Z,{defaultValue:l||"",label:u,name:"email",showValidationIcon:!0,style:ee.formTextInput})):null}}const Uo=Mo;var zo=s(66136);const jo=(0,De.Z)().propsFromActions((()=>({setLanguage:Ut.m0})))((function(e){const{onNavigate:t,setLanguage:s,subtask:n,subtaskId:i}=e,{locale:o,next_link:r}=n,{country_code:l,language_code:c}=o,u=a.useCallback((()=>{var e;const t=zo.k1.reduce(((e,t)=>({...e,[t.toLowerCase()]:t})),{}),n=l?`${c}-${l}`:c,a=null!=(e=(0,zo.Qb)(n,zo.k1,t))?e:zo.al;return Promise.resolve(s(a))}),[l,c,s]);return a.createElement(Be,{navigationLink:r,onNavigate:t,subtaskAction:u,subtaskId:i})}));var Ho=s(3188),Go=s(88990),Wo=s(16866),qo=s(76275),$o=s(38749),Ko=s(98954),Yo=s(11839),Qo=s(11731),Xo=s(80166),Jo=s(45784),er=s(27837);const tr=Object.freeze({TopicCategory:"topic_category",Topic:"topic"}),sr=p().e854ad27;class nr extends a.PureComponent{constructor(...e){super(...e),this._handleFollow=()=>{const{id:e,onFollowTopic:t}=this.props;t(e)},this._handleUnfollow=()=>{const{id:e,onUnfollowTopic:t}=this.props;t(e)}}render(){const{id:e,onNavigate:t,selectedTopicIds:s,subtaskInputs:o,topicsById:r}=this.props,l=r[e],c=s.includes(this.props.id);return a.createElement(i.Z,{style:ir.cell},a.createElement($o.Z,{Icon:Xo.default,size:"large",style:ir.topicIcon}),a.createElement(i.Z,{style:ir.topicInfo},a.createElement(U,(0,n.Z)({weight:"bold"},l.title,{onNavigate:t,subtaskInputs:o})),l.description?a.createElement(U,(0,n.Z)({color:"gray700"},l.description,{onNavigate:t,subtaskInputs:o})):null),a.createElement(Ko.Z,{isFollowing:c,onFollow:this._handleFollow,onUnfollow:this._handleUnfollow,showRelationshipChangeConfirmation:!1,size:"small",type:"topic"}))}}class ar extends a.PureComponent{constructor(...e){super(...e),this.state={expanded:!1},this._handleClick=()=>{this.setState({expanded:!this.state.expanded})}}render(){const{categoriesById:e,id:t,isTopLevel:s,onNavigate:o,subtaskInputs:r}=this.props,{expanded:l}=this.state,c=e[t],u=l?rr:or;return a.createElement(a.Fragment,null,a.createElement(Yo.Z,{accessibilityExpanded:l,accessibilityLabel:sr({title:c.title.text}),onClick:this._handleClick,style:ir.cell},a.createElement(U,(0,n.Z)({color:"primary",size:s?"headline1":"body",weight:s?"heavy":"bold"},c.title,{onNavigate:o,subtaskInputs:r})),u),a.createElement(i.Z,{style:ir.children},a.createElement(Qo.Z,{show:l},this._renderChildren())))}_renderChildren(){const{categoriesById:e,id:t,onFollowTopic:s,onNavigate:i,onUnfollowTopic:o,selectedTopicIds:r,subtaskInputs:l,topicsById:c}=this.props,u=e[t],d={selectedTopicIds:r,onFollowTopic:s,onUnfollowTopic:o,topicsById:c,subtaskInputs:l};return u.children_items.map((({id:t,type:s})=>s===tr.Topic?a.createElement(nr,(0,n.Z)({},d,{id:t,key:t,onNavigate:i})):a.createElement(ar,(0,n.Z)({},d,{categoriesById:e,id:t,key:t,onNavigate:i}))))}}const ir=u.Z.create((e=>({cell:{alignItems:"center",flexDirection:"row",paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space4,justifyContent:"space-between",borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},topicInfo:{flexGrow:1,flexShrink:1,marginEnd:e.spaces.space12},topicIcon:{flexShrink:0,marginEnd:e.spaces.space12},plusIcon:{color:e.colors.gray700},minusIcon:{color:e.colors.primary},children:{marginStart:e.spaces.space12}}))),or=a.createElement(Jo.default,{style:ir.plusIcon}),rr=a.createElement(er.default,{style:ir.minusIcon}),lr="selected_search_topic_ids",cr="selected_topic_ids",ur=[],dr=(e,t)=>{const s=(0,F.$B)(e);return(0,L.OG)(s,{key:lr,subtask_id:t.subtaskId})},pr=(e,t)=>{const s=(0,F.$B)(e);return(0,L.OG)(s,{key:cr,subtask_id:t.subtaskId})},hr=(e,t)=>t.subtask.selected_topics_cart?t.subtask.selected_topics_cart.selected_topic_ids:ur,mr=(0,De.Z)().propsFromState((()=>({initialSearchTopicIds:dr,initialSelectedTopicIds:pr,cartTopicIds:hr}))).adjustStateProps((({cartTopicIds:e,initialSearchTopicIds:t,initialSelectedTopicIds:s})=>({initialSearchTopicIds:t||ur,initialSelectedTopicIds:s||e}))).withAnalytics({section:"topics_selector"}),_r="ocfTopicsSelectorNextLink",gr="ocfTopicsSelectorSkipLink",br=p().f134915f,kr=p().h6beb5fb,vr=p().b8fb87e0,fr=a.createElement(Wo.default,null);class yr extends a.Component{constructor(...e){super(...e),this.state={hideBanner:!1,selectedTopicIds:this.props.initialSelectedTopicIds,showCart:!1},this._renderCartButton=()=>{const{selected_topics_cart:e}=this.props.subtask,{selectedTopicIds:t}=this.state;return e&&e.title&&t.length>0?a.createElement(i.Z,null,a.createElement(D.ZP,{accessibilityLabel:vr,icon:fr,onPress:this._handleOpenCart,size:"small",type:"brandOutlined"}),a.createElement(Ho.Z,{count:t.length,truncatedCountFormatter:kr,unreadCountLabel:br,withBorder:!0})):null},this._renderCart=()=>{const{onNavigate:e,subtask:t,subtaskInputs:s}=this.props,{selected_topics_cart:i}=t,o=i&&i.done_label?a.createElement(D.ZP,{key:"button_cancel",onPress:this._handleCloseCart,style:xr.cartButton,type:"primaryOutlined"},i.done_label.text):null;return a.createElement(Ie.Z,{onMaskClick:this._handleCloseCart,style:xr.cart,type:"bottom",withMask:!0},i&&i.title?a.createElement(U,(0,n.Z)({align:"center",onNavigate:e,size:"headline1",style:xr.cartHeader,subtaskInputs:s,weight:"heavy"},i.title)):null,this._renderCartItems(),o)},this._handleOpenCart=()=>{this.setState({showCart:!0}),this.props.analytics.scribe({element:"cart",action:"impression"})},this._handleCloseCart=()=>{this.setState({showCart:!1}),this.props.analytics.scribe({element:"cart",action:"dismiss"})},this._renderBanner=()=>{const{banner:e}=this.props.subtask,{hideBanner:t}=this.state;return e&&!t?a.createElement(Go.Z,{actionLabel:e.dismiss_label.text,headline:e.title.text,onAction:this._handleBannerDismiss,onClose:this._handleBannerDismiss,subtext:e.subtitle.text}):null},this._renderCartItems=()=>{const{onNavigate:e,subtask:t,subtaskInputs:s}=this.props,{selectedTopicIds:n}=this.state;return n.map((i=>a.createElement(nr,{id:i,key:i,onFollowTopic:this._handleFollowTopic,onNavigate:e,onUnfollowTopic:this._handleUnfollowTopic,selectedTopicIds:n,subtaskInputs:s,topicsById:t.topic_by_id_list})))},this._renderItems=()=>{const{onNavigate:e,subtask:t,subtaskInputs:s}=this.props,{selectedTopicIds:n}=this.state;return t.top_category_ids.map((i=>a.createElement(ar,{categoriesById:t.category_by_id_list,id:i,isTopLevel:!0,key:i,onFollowTopic:this._handleFollowTopic,onNavigate:e,onUnfollowTopic:this._handleUnfollowTopic,selectedTopicIds:n,subtaskInputs:s,topicsById:t.topic_by_id_list})))},this._handleFollowTopic=e=>{const{analytics:t}=this.props;t.scribe({element:"topic",action:"follow",data:{items:[qo.Z.forTopic(e)]}}),this.setState({selectedTopicIds:[...this.state.selectedTopicIds,e]})},this._handleUnfollowTopic=e=>{const{analytics:t}=this.props;t.scribe({element:"topic",action:"unfollow",data:{items:[qo.Z.forTopic(e)]}}),this.setState({selectedTopicIds:this.state.selectedTopicIds.filter((t=>t!==e))})},this._handleBannerDismiss=()=>{this.props.analytics.scribe({element:"prompt",action:"dismiss"}),this.setState({hideBanner:!0})},this._handleNextButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props,{selectedTopicIds:a}=this.state;n(s,{link:t.next_link.link_id,selected_topic_ids:a}),e(t.next_link)},this._handleSkipButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props;n(s,{link:t.skip_link.link_id}),e(t.skip_link)}}componentDidMount(){const{analytics:e,subtask:t}=this.props;t.banner&&e.scribe({element:"prompt",action:"impression"})}render(){const{errorDialog:e,onNavigate:t,passthroughOcfScreenProps:s,subtask:o,subtaskInputs:r}=this.props,{next_link:l,primary_text:c,secondary_text:u,skip_link:d}=o,{showCart:p}=this.state,h=this._renderCartButton();return a.createElement(ue.Z,(0,n.Z)({},s,{footer:a.createElement(G,{actionLabel:null==l?void 0:l.label,actionTestID:_r,onAction:this._handleNextButtonClick,onSecondaryAction:this._handleSkipButtonClick,secondaryActionLabel:null==d?void 0:d.label,secondaryActionTestID:gr}),header:a.createElement(ce,{onNavigate:t,primaryTextProp:c,secondaryTextProp:u,subtaskInputs:r,withHeaderImage:!0}),leftControl:h,providePadding:!0}),a.createElement(i.Z,null,this._renderBanner(),this._renderItems()),p?this._renderCart():null,e)}}const xr=u.Z.create((e=>({cart:{flexGrow:1,maxHeight:"80vh",overflow:"auto",padding:e.spaces.space20,paddingBottom:e.spaces.space20},cartButton:{marginTop:e.spaces.space12},cartHeader:{marginBottom:e.spaces.space12}}))),wr=mr(yr),Cr=(0,g.createLocalApiErrorHandlerWithContextFactory)("OCF_TWEET_SELECTION_URT"),Ir=(0,De.Z)().propsFromActions((()=>({clearTimelineCache:ba.Z,createLocalApiErrorHandler:Cr}))).withAnalytics();var Er=s(12552),Sr=s(76831),Zr=s(52612),Tr=s(37985);const Ar="ocfTweetSelectionURTNextButton",Fr=e=>{switch(e){case ha.Z.NOT_FOUND:return a.createElement(la.Z,null);case ha.Z.NOT_ALLOWED:return a.createElement(ra.Z,null);default:return(0,I.ZP)(`Unhandled timeline unavailable reason in Ocf TweetSelectionURT screen: ${e}`),null}},Pr=Ir((e=>{var t;const{errorDialog:s,onNavigate:i,passthroughOcfScreenProps:o,subtask:r,subtaskId:l,subtaskInputs:c,updateFlow:u}=e,{graphql_timeline_query:d,header:p,next_link:h,next_link_options:m,timeline_source:_}=r,g=(0,L.OG)(c,{key:"selected_tweet_ids",subtask_id:l},[])||[],[b,k]=a.useState(g),v=a.useMemo((()=>((e,t)=>e?(0,_a.R)(e.timeline_key):(0,ga.Z)({urtUrl:{url:t||"",urlType:ma.Z.UrtEndpoint}}))(d,_)),[d,_]),f=a.useMemo((()=>((e,t)=>{if(t){const{max_enable_count:s}=t;if(s)return e<s}return!0})(b.length,m)),[b,m]),y=a.useMemo((()=>((e,t)=>{if(t){const{max_enable_count:s,min_enable_count:n}=t,a=s&&e>s;return!(n&&e<n||a)}return!0})(b.length,m)),[b,m]),x=a.useCallback((()=>{u(l,{link:h.link_id,selected_tweet_ids:b}),i(h)}),[b,i,h,l,u]),w=a.useCallback((e=>{(b.includes(e)||f)&&k((t=>t.includes(e)?t.filter((t=>e!==t)):t.concat(e)))}),[f,b]),C=a.useMemo((()=>{var e;return(({handleTweetClick:e,maxSelection:t,selectedTweetIds:s})=>({...(0,ya.G)({}),[Zr.ZP.Tombstone]:Er.OZ(Er.KM()),[Zr.ZP.Tweet]:{...(0,ya.G)({})[Zr.ZP.Tweet],handlers:{[Tr.Z.Tweet]:(0,Sr.d2)({onClick:e,maxSelection:t,selectedTweetIds:s}),[Tr.Z.QuotedTweet]:(0,Sr.d2)({onClick:e,maxSelection:t,selectedTweetIds:s})}}}))({handleTweetClick:w,selectedTweetIds:b,maxSelection:null==(e=r.next_link_options)?void 0:e.max_enable_count})}),[w,b,null==(t=r.next_link_options)?void 0:t.max_enable_count]);return a.createElement(ue.Z,(0,n.Z)({},o,{footer:a.createElement(G,{actionDisabled:!y,actionLabel:null==h?void 0:h.label,actionTestID:Ar,onAction:x}),header:a.createElement(ce,{header:p,onNavigate:i,subtaskInputs:c,withHeaderImage:!0}),providePadding:!0}),a.createElement(ca.Z,{entryConfiguration:C,module:v,renderUnavailable:Fr,title:""}),s)}));var Nr=s(74383),Br=s(19051);const Dr="ocfTypeaheadSearchNextButton",Lr="ocfTypeaheadSearchSkipForNowButton",Or="ocfTypeaheadInput",Vr=p().a9ae1e78,Rr=p().gdb7bc25;class Mr extends a.Component{constructor(e,t){super(e,t),this._renderSelectedItem=()=>a.createElement(i.Z,{style:Ur.selectedItem},this._renderSelectedItemPill()),this._renderSelectedItemPill=()=>{const{withCompactPills:e}=this.props,t=this.state.selected_item;if(!t)return;const s=t.type===A.El.User?a.createElement(Se.default,{accessibilityHidden:!0,focusable:!1,size:"custom",uri:t.data.profile_image_url_https}):void 0;let n;switch(t.type){case A.El.User:n=t.data.screen_name;break;case A.El.Event:case A.El.Topic:case A.El.Hashtag:n=t.data.topic;break;case A.El.Setting:case A.El.SettingGroup:case A.El.NoResult:n=t.data.text;break;case A.El.DMConversation:n=t.data.name;break;default:n=""}return a.createElement(Ta.Z,{accessibilityLabel:Rr({name:n}),avatar:s,compact:e,key:t.id,mode:"remove",onClick:this._handleOnRemove,style:Ur.selectionPill,text:n})},this._handleQueryChange=e=>{const{onQueryChange:t}=this.props;this.setState({query:e}),null==t||t(e)},this._handleOnSelect=e=>{this.setState({selected_item:e})},this._handleOnRemove=()=>{this.setState({selected_item:void 0})},this._handleSubmit=()=>{this.state.selected_item&&this._handleDoneButtonClick()},this._handleDoneButtonClick=()=>{var e;const{onNavigate:t,subtask:{next_link:s},subtaskId:n,updateFlow:a}=this.props;a(n,{link:s.link_id,selected_item_id:(null==(e=this.state.selected_item)?void 0:e.id)||""}),t(s)},this._handleSkipButtonClick=()=>{const{onNavigate:e,subtask:{skip_link:t},subtaskId:s,updateFlow:n}=this.props;t&&n(s,{link:t.link_id,selected_item_id:""}),t&&e(t)},this.state={query:"",selected_item:void 0}}render(){const{errorDialog:e,onNavigate:t,passthroughOcfScreenProps:s,renderCallout:o,renderHeader:r,shouldAutoFocus:l,source:c,subtask:u,subtaskInputs:d}=this.props,{detail_text:p,header:h,next_link:m,search_filter_type:_,skip_link:g}=u;return a.createElement(ue.Z,(0,n.Z)({},s,{footer:a.createElement(G,{actionDisabled:!g&&!this.state.selected_item,actionLabel:this.state.selected_item||!g?null==m?void 0:m.label:void 0,actionTestID:Dr,onAction:this._handleSubmit,onSecondaryAction:this._handleSkipButtonClick,secondaryActionLabel:this.state.selected_item||null==g?void 0:g.label,secondaryActionTestID:Lr}),header:a.createElement(ce,{header:h,onNavigate:t,primaryTextProp:null==h?void 0:h.primary_text,secondaryTextProp:null==h?void 0:h.secondary_text,subtaskInputs:d,withHeaderImage:!0}),providePadding:!0}),void 0===this.state.selected_item?a.createElement(Nr.default,{alwaysOpen:!0,disableClearButton:!0,filter:[_],isModal:!0,onItemClick:this._handleOnSelect,onQueryChange:this._handleQueryChange,placeholder:Vr,renderCallout:o,renderHeader:r,renderUserDecoration:Br.ib,selectedItems:this.state.selected_item,shouldAutoFocus:l,shouldClearOnSelect:!0,shouldFocusOnClear:!0,source:c,testID:Or,withSectionDivider:!1}):a.createElement(i.Z,null,this._renderSelectedItem()),p?a.createElement(U,(0,n.Z)({},p,{color:"gray700",onNavigate:t,subtaskInputs:d})):null,e)}}Mr.defaultProps={shouldAutoFocus:!0,withCompactPills:!1};const Ur=u.Z.create((e=>({root:{flex:1},selectionPill:{margin:e.spaces.space4,maxWidth:`calc(100% - ${e.spaces.space16})`},selectedItem:{flexDirection:"row",flexWrap:"wrap",padding:e.spaces.space4}}))),zr=(e,t)=>{const s=Ei.C6(e),[n]=s?Ii.m3(e,s):[];return n},jr=(e,t)=>{const s=Ei.vW(e),[n]=s?Ii.m3(e,s):[];return n},Hr=(0,De.Z)().propsFromState((()=>({avatarMedia:zr,bannerMedia:jr}))).propsFromActions((()=>({scribeAction:Mt.n9,updateProfileAvatar:Ei.b4,updateProfileBanner:Ei.T_}))).withAnalytics();class Gr extends a.Component{constructor(...e){super(...e),this._scribeUploadStart=e=>{const{analytics:t,flowToken:s,subtaskId:n}=this.props,a={section:e,element:"upload",action:"start",data:{items:[{token:s,name:n}]}};t.scribe(a)},this._updateMedia=()=>{const{avatarMedia:e,bannerMedia:t,subtask:{sources:s},updateProfileAvatar:n,updateProfileBanner:a}=this.props;return new Promise(((i,o)=>{try{s.forEach((s=>{const{style:i}=s;i===Z.XD.Avatar&&e?(this._scribeUploadStart("select_avatar"),n(e.id)):i===Z.XD.Banner&&t&&(this._scribeUploadStart("select_banner"),a(t.id))})),i()}catch(e){o(e)}}))}}render(){const{onNavigate:e,subtask:t,subtaskId:s}=this.props;return a.createElement(Be,{navigationLink:t.next_link,onNavigate:e,subtaskAction:this._updateMedia,subtaskId:s})}}const Wr=Hr(Gr);var qr=s(62104);const $r=e=>t=>null==t?void 0:t.selectInitialFetchStatus(e),Kr=(0,De.Z)().propsFromState((()=>({getModuleFetchStatus:$r}))).withAnalytics({page:"onboarding",section:"user_recommendations"});var Yr=s(71743);const Qr=a.createContext(new Set),Xr=(e,t)=>({promotedContent:s,userId:n,viewerUserId:i})=>a.createElement(Qr.Consumer,null,(s=>a.createElement(Ko.Z,{isFollowing:s.has(n),onFollow:e(n),onUnfollow:t(n),showRelationshipChangeConfirmation:!1,size:"small",style:Jr.followButton,type:"user"}))),Jr=u.Z.create((e=>({followButton:{alignSelf:"flex-start",marginStart:e.spaces.space12}}))),el=(e,t,s)=>n=>{const a=n.user.id_str;s.has(a)?t(a)():e(a)()},tl=({currentFollows:e,onFollow:t,onUnfollow:s})=>({...(0,ya.G)({}),[Zr.ZP.User]:(0,Yr.Z)({decoration:Xr(t,s),withLink:!1,shouldScribeProfileClick:!1,onClick:el(t,s,e)})}),sl="ocfURTUserRecommendationsNextButton",nl="ocfURTUserRecommendationsSkipButton",al=e=>{switch(e){case ha.Z.NOT_FOUND:return a.createElement(la.Z,null);case ha.Z.NOT_ALLOWED:return a.createElement(ra.Z,null);default:return(0,I.ZP)(`Unhandled timeline unavailable reason: ${e}`),null}};class il extends a.Component{constructor(e){super(e),this._isBelowMinFollows=()=>{const e=this.props.subtask.min_follow_count;return!!e&&this.state.selectedUsers.size<e},this._getMemoizedModule=(0,xe.Z)(((e,t)=>(({flow_token:e,subtask_id:t})=>(0,qr.Z)({timelineId:`nux-user-recos-${t}`,network:{getEndpoint:e=>e.URT.fetchNUXUserRecommendations,getEndpointParams:s=>({...s,subtask_id:t,flow_token:e})},context:"FETCH_NUX_USER_RECOS",perfKey:"nux-user-recos"}))({subtask_id:e,flow_token:t||""}))),this._getModule=()=>{const{flowToken:e,subtaskId:t}=this.props;return this._getMemoizedModule(t,e)},this._getModuleFetchStatus=()=>{const{getModuleFetchStatus:e}=this.props;return e(this._getModule())},this._onFollow=e=>()=>{const t=(0,We.Z)([...this.state.selectedUsers]);t.add(e),this.setState({selectedUsers:t}),this._handleScribe("follow")},this._onUnfollow=e=>()=>{const t=(0,We.Z)([...this.state.selectedUsers]);t.has(e)&&t.delete(e),this.setState({selectedUsers:t}),this._handleScribe("unfollow")},this._getFollowText=(e,t,s)=>!e||s<1?t:e.concat(oa.ZP.getFormattedCount(s)),this._handleFollowButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props;n(s,{link:t.next_link.link_id,selected_user_recommendations:[...this.state.selectedUsers]}),e(t.next_link)},this._handleSkipButtonClick=()=>{const{onNavigate:e,subtask:{skip_link:t},subtaskId:s,updateFlow:n}=this.props;t&&n(s,{link:t.link_id}),t&&e(t)},this.state={selectedUsers:new Set}}render(){var e;const{onNavigate:t,passthroughOcfScreenProps:s,subtask:i,subtaskInputs:o}=this.props,{primary_text:r,secondary_text:l,skip_link:c}=i,{selectedUsers:u}=this.state;let d="";if(i.next_link_threshold_text&&i.next_link_threshold_text.length>0){const e=i.next_link_threshold_text[0];d=e&&e.text&&e.text.text}const p=i.next_link.label,h=u.size,m=null!=(e=this._getFollowText(d,p,h))?e:void 0,_=Array.from(u).join(",");return a.createElement(ue.Z,(0,n.Z)({},s,{footer:a.createElement(G,{actionDisabled:this._isBelowMinFollows()&&this._getModuleFetchStatus()!==pa.Z.FAILED,actionLabel:this._isBelowMinFollows()&&c?void 0:m,actionTestID:sl,onAction:this._handleFollowButtonClick,onSecondaryAction:this._handleSkipButtonClick,secondaryActionLabel:this._isBelowMinFollows()?null==c?void 0:c.label:void 0,secondaryActionTestID:nl}),header:a.createElement(ce,{onNavigate:t,primaryTextProp:r,secondaryTextProp:l,subtaskInputs:o,withHeaderImage:!0}),providePadding:!0}),a.createElement(Qr.Provider,{value:u},a.createElement(ca.Z,{entryConfiguration:tl({onFollow:this._onFollow,onUnfollow:this._onUnfollow,currentFollows:u}),fetchOptions:{follows:_},module:this._getModule(),renderUnavailable:al,title:""})),this.props.errorDialog)}_handleScribe(e){const{analytics:t}=this.props;t.scribe({element:"user",action:e})}}const ol=Kr(il);var rl=s(84636),ll=s.n(rl),cl=s(4642),ul=s(89772),dl=s(15579),pl=s(14983),hl=s.n(pl),ml=s(15686),_l=s(49364),gl=s(36873);const bl="iconPlus",kl="iconCheckmark",vl="nextButton",fl="userTile",yl="userSelectList",xl="userSelectGroup",wl=u.Z.create((e=>({followButton:{alignSelf:"flex-start",marginStart:e.spaces.space12}}))),Cl=({isCheckboxFollowButton:e,isFollowed:t,screenName:s,updateFollowedItems:n,userId:i})=>{const o=e=>()=>n(i,e);return e?a.createElement(ze.Z,{checked:t,onChange:()=>n(i,!t)}):a.createElement(Ko.Z,{isFollowing:t,name:s,onFollow:o(!0),onUnfollow:o(!1),showRelationshipChangeConfirmation:!1,size:"small",style:wl.followButton,type:"user"})};var Il=s(48734);const El=u.Z.create((e=>({groupHeader:{flexDirection:"row",justifyContent:"space-between"},tileGroup:{borderRadius:e.spaces.space12,boxShadow:e.boxShadows.small,marginBottom:e.spaces.space20,overflow:"hidden"},tileFollowGroup:{boxShadow:"none",backgroundColor:e.colors.gray0},tileGroupHeader:{margin:e.spaces.space12},tileFollowGroupHeader:{zIndex:1,backgroundColor:"transparent"},listGroupHeader:{alignItems:"center",borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,paddingHorizontal:e.spaces.space20,paddingVertical:e.spaces.space12},tooltip:{marginBottom:e.spaces.space20}}))),Sl=function({children:e,header:t,message:s,styleType:n}){const[o,r]=a.useState(!0),l=n===Z.lS.List,c=n===Z.lS.TileFollowButton;return a.createElement(i.Z,{testID:xl},a.createElement(i.Z,{style:[!l&&El.tileGroup,c&&El.tileFollowGroup]},a.createElement(i.Z,{style:[El.groupHeader,l&&El.listGroupHeader,!l&&El.tileGroupHeader,c&&El.tileFollowGroupHeader]},t),e),(null==s?void 0:s.text)&&o&&a.createElement(i.Z,{style:El.tooltip},a.createElement(Il.Z,{backgroundColor:"primary",icon:null==s?void 0:s.icon,onClose:()=>r(!1),text:null==s?void 0:s.text})))};var Zl=s(35210),Tl=s(18057),Al=s(7066);const Fl=u.Z.create((e=>({container:{cursor:"pointer"},content:{padding:e.spaces.space1,position:"absolute",height:"100%",width:"100%",backgroundImage:`linear-gradient(${e.colors.transparent}, ${e.colors.translucentBlack77})`},userNameContainer:{position:"absolute",bottom:0,start:0,padding:e.spaces.space4},userName:{marginBottom:e.spaces.space4},icon:{height:"auto",width:e.spaces.space24,position:"absolute",end:e.spaces.space12,top:e.spaces.space12,color:e.colors.white,zIndex:1},image:{height:120},checkIcon:{zIndex:1}}))),Pl=({groupId:e,id:t,isBlueVerified:s,isSelected:n,isVerified:o,name:r,onFollow:l,onUnfollow:c,profileImageUrl:u,userName:d})=>a.createElement(i.Z,{accessibilityRole:"button",onClick:()=>{n?c([t],e):l([t],e)},style:Fl.container,testID:fl},n?a.createElement(Al.default,{style:[Fl.icon,Fl.checkIcon],testID:kl}):a.createElement(Jo.default,{style:Fl.icon,testID:bl}),a.createElement(ot.Z,{source:u,style:Fl.image}),a.createElement(i.Z,{style:Fl.content},a.createElement(i.Z,{style:Fl.userNameContainer},a.createElement(Ze.Z,{color:"white",isBlueVerified:s,isVerified:o,name:r,nameSize:"subtext2",screenName:d,screenNameSize:"subtext2",style:Fl.userName,withNameWrap:!0,withStackedLayout:!0})))),Nl=({groupId:e,id:t,isBlueVerified:s,isSelected:n,isVerified:o,name:r,onFollow:l,onUnfollow:c,profileImageUrl:u,style:d,userName:p})=>{const h=a.useCallback((()=>{l([t],e)}),[e,t,l]),m=a.useCallback((()=>{c([t],e)}),[e,t,c]),_=u.split("_normal").join("");return a.createElement(i.Z,{style:Bl.container},a.createElement(i.Z,{style:[Bl.background,d]}),a.createElement(Se.default,{hasAdaptiveImage:!1,size:{width:100,height:100},style:Bl.userAvatar,uri:_}),a.createElement(Ze.Z,{isBlueVerified:s,isVerified:o,name:r,nameSize:"body",screenName:p,screenNameSize:"subtext2",style:Bl.userName,withStackedLayout:!0}),a.createElement(Ko.Z,{isFollowing:n,onFollow:h,onUnfollow:m,showRelationshipChangeConfirmation:!1,type:"user"}))},Bl=u.Z.create((e=>({container:{display:"flex",alignItems:"center",marginBottom:e.spaces.space16,overflow:"visible",paddingStart:e.spaces.space20,paddingEnd:e.spaces.space20},background:{opacity:.1,transform:"[{ translate3d: ‘0,0,0’ }]",filter:"blur(50px)",height:"calc(100% + 10px)",width:"calc(100% + 10px)",position:"absolute",top:-10,start:0},userAvatar:{marginBottom:e.spaces.space4},userName:{marginBottom:e.spaces.space4,display:"flex",alignItems:"center"}}))),Dl=a.memo(Nl),Ll=u.Z.create((e=>({userCellListItem:{paddingHorizontal:e.spaces.space20},userCellListItemWrapper:{display:"flex",flexDirection:"column",justifyContent:"center"}}))),Ol=({decorator:e,description:t,groupId:s,id:n,isFollowing:o,isVerified:r,isBlueVerified:l,name:c,onCellClick:u,onFollow:d=(()=>{}),onUnfollow:p=(()=>{}),profileImageUrl:h,screenName:m,socialText:_,styleType:g,style:b})=>{const k=a.useMemo((()=>{if(_)return{contextType:Zl.Z.Follow,text:_}}),[_]);return a.createElement(i.Z,{accessibilityRole:"label",style:Ll.userCellListItemWrapper},(i=>{switch(i){case Z.lS.TileFollowButton:return a.createElement(Dl,{groupId:s||"",id:n,isBlueVerified:l,isSelected:!!o,isVerified:r,name:c,onFollow:d,onUnfollow:p,profileImageUrl:h,style:b,updateIndividualSelectedProfile:u,userName:m});case Z.lS.Tile:return a.createElement(Pl,{groupId:s||"",id:n,isBlueVerified:l,isSelected:!!o,isVerified:r,name:c,onFollow:d,onUnfollow:p,profileImageUrl:h,socialContext:k,updateIndividualSelectedProfile:u,userName:m});default:return a.createElement($.ZP,{avatarUri:h,decoration:e,description:t,displayMode:Tl.Z.UserDetailed,isBlueVerified:l,isVerified:r,name:c,onCellClick:u,promotedItemType:"users",screenName:m,socialContext:k,style:Ll.userCellListItem,userId:n,withLink:!1})}})(g))},Vl=p().j231d352,Rl=p().d960b55c,Ml=e=>e.items.map((e=>e.user_id_str)).join("-"),Ul=rs.Z,zl=u.Z.create((e=>({noBottomMargin:{marginBottom:0},noRightMargin:{marginEnd:0},container:{overflow:"hidden",width:"calc(100%/3 - 1px)",marginEnd:e.spaces.space1,marginBottom:e.spaces.space1,cursor:"pointer"},tileFollowContainer:{overflow:"visible",marginEnd:0,marginBottom:0},listItemsContainer:{flexWrap:"wrap",justifyContent:"spaceBetween",flexDirection:"row"},subheader:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},headerContainer:{flex:1}}))),jl=({userGroups:e,onNearEnd:t=h.Z,followedUserIds:s,onFollow:n,onUnfollow:o,message:l,firstSelectedGroupIdx:c=-1,scribeDescription:u="",followButtonType:d,styleType:p=Z.lS.List})=>{const{loggedInUserId:m}=a.useContext(_.rC);hl()(!!m,"loggedInUserId must be defined");const g=(0,ss.z)(),b=p===Z.lS.List,k=p===Z.lS.TileFollowButton,v=d===Z.TT.Checkbox,f=a.useCallback(((e,t,s="",a)=>{t?n(e,s,a):o(e,s,a)}),[n,o]),y=a.useCallback(((e,t,s)=>{f([e],t,s)}),[f]),x=a.useCallback(((e,t)=>()=>{const s=e.items.map((({user_id_str:e})=>e));f(s,!t,e.group_id||"",!0);const n=t?"deselect":"select",a={items:[{name:e.group_id,description:u}]};g.scribe({element:"category",action:n,data:a})}),[f,g,u]),w=a.useCallback((e=>{g.scribe({element:"category",action:"impression",data:{items:[{name:e,description:u}]}})}),[g,u]),C=a.useCallback(((e,t)=>a.createElement(a.Fragment,null,((null==e?void 0:e.header)||(null==e?void 0:e.subheader))&&a.createElement(i.Z,{style:zl.headerContainer},(null==e?void 0:e.header)&&a.createElement(r.ZP,{color:"gray700"},e.header),(null==e?void 0:e.subheader)&&a.createElement(ml.Z,null,(({direction:t})=>a.createElement(r.ZP,{dir:t,size:"headline2",style:zl.subheader,weight:"bold"},e.subheader)))),t?a.createElement(D.ZP,{onPress:x(e,t),type:"primaryOutlined"},Rl):a.createElement(D.ZP,{onPress:x(e,t),type:"primaryFilled"},Vl))),[x]),I=a.useCallback(((e,t)=>a.createElement(a.Fragment,null,a.createElement(r.ZP,{size:"headline1",weight:"bold"},e.header),v&&a.createElement(ze.Z,{checked:t,onChange:x(e,t)}))),[x,v]),E=a.useCallback(((e,t)=>p===Z.lS.List?a.createElement(Cl,{isCheckboxFollowButton:v,isFollowed:t,screenName:e.screen_name,updateFollowedItems:y,userId:e.id_str}):void 0),[y,v,p]),S=a.useCallback((t=>{var r;const d=t.items.every((e=>s.has(e.user_id_str))),h=c>=0&&t.group_id===(null==(r=e[c])?void 0:r.group_id),m=e=>()=>y(e,!d,t.group_id);return a.createElement(_l.Z,{onImpression:()=>w(t.group_id)},a.createElement(Sl,{header:b?I(t,d):C(t,d),message:h?l:void 0,scribeDescription:u,styleType:p},a.createElement(i.Z,{style:!b&&zl.listItemsContainer},t.items.map((({social_text:e,user:r},l)=>{var c;const u=s.has(r.id_str),d=null==r||null==(c=r.profile_image_extensions_media_color)?void 0:c.palette[0],h={backgroundColor:d?(_=d,`rgb(${_.rgb.red}, ${_.rgb.green}, ${_.rgb.blue})`):"none"};var _;return a.createElement(i.Z,{key:r.id_str,style:[!b&&zl.container,!b&&l+1>3&&zl.noBottomMargin,!b&&l+1===0&&zl.noRightMargin,k&&zl.tileFollowContainer]},a.createElement(Ol,{decorator:E(r,u),description:r.description,groupId:t.group_id,id:r.id_str,isBlueVerified:r.is_blue_verified,isFollowing:u,isVerified:r.verified,key:r.id_str,name:r.name,onCellClick:m(r.id_str),onFollow:n,onUnfollow:o,profileImageUrl:r.profile_image_url_https,screenName:r.screen_name,socialText:e,style:h,styleType:p}))})))))}),[c,e,b,C,I,l,u,p,s,w,y,k,E,n,o]);return a.createElement(i.Z,{testID:yl},a.createElement(gl.Z,{cacheKey:`userSelectList/${m}`,identityFunction:Ml,items:e,nearEndProximityRatio:1.15,noItemsRenderer:Ul,onNearEnd:t,renderer:S}))},Hl=e=>F.cu(e)||"",Gl=(0,De.Z)().propsFromState((()=>({flowToken:Hl,browsableNuxRecommendations:F.iD}))).propsFromActions((()=>({fetchBrowsableNuxUserRecommendations:F.Ig}))).withAnalytics({section:"who_to_follow"});var Wl=s(5252);const ql=u.Z.create((e=>({timelineStrengthContainer:{display:"flex",alignItems:"center",justifyContent:"center"},progressBar:{height:e.spaces.space8,borderRadius:e.spaces.space12},progressBarContainer:{backgroundColor:e.colors.gray50,height:e.spaces.space8,width:"100%",marginTop:e.spaces.space4,borderRadius:e.spaces.space12},progressBarInner:{backgroundImage:`linear-gradient(270deg, ${e.colors.blue500}, ${e.colors.blue700} 100%)`}}))),$l=({progress:e,text:t})=>a.createElement(i.Z,{style:ql.timelineStrengthContainer},a.createElement(r.ZP,{color:"gray1100",weight:"bold"},t),a.createElement(i.Z,{style:ql.progressBarContainer},a.createElement(Wl.Z,{progress:e,progressStyle:ql.progressBarInner,style:ql.progressBar}))),Kl="selected_user_recommendations",Yl=p().c1df579e;class Ql extends a.Component{constructor(e){super(e),this._handleNearEnd=()=>{const{analytics:e}=this.props;e.scribe({action:"scroll",data:{items:[{description:this._scribeDescription}]}}),this._getMoreRecommendations()},this._renderPopoverContent=()=>{var e;const{subtask:t}=this.props;return a.createElement(i.Z,{style:Xl.popoverContent},a.createElement(r.ZP,{weight:"bold"},null==t||null==(e=t.gated_next_link_popup_text)?void 0:e.text))},this._getPreCheckedUsers=(e=[])=>(0,We.Z)(e.reduce(((e,t)=>{const s=t.items.reduce(((e,t)=>(t.checked_by_default&&e.push(t.user_id_str),e)),[]);return[...e,...s]}),[])),this._getMoreRecommendations=()=>{const{analytics:e,fetchBrowsableNuxUserRecommendations:t,flowToken:s,subtask:n,subtaskId:a}=this.props,{followedGroupIds:i,notFollowedGroupIds:o,selectedUsers:r}=this.state,l={items:[{description:this._scribeDescription}]};e.scribe({element:"request",action:"start",data:l}),t({flow_token:s,follows:Array.from(r),location:(null==n?void 0:n.fetch_user_recommendations_location)||"append",followed_group_ids:Array.from(i),not_followed_group_ids:Array.from(o),subtask_id:a}).then((t=>{e.scribe({element:"request",action:"success",data:l})})).catch((()=>{e.scribe({element:"request",action:"failure",data:l})}))},this._getFollowText=(e,t,s)=>!e||s<1?t:e.concat(oa.ZP.getFormattedCount(s)),this._handleSelectionChanged=e=>{this.setState({selectedUsers:(0,We.Z)(e)})},this._getUserNameFromId=(e,t)=>{const{groups:s}=this.state;var n,a;if(t)return null==(n=s.find((e=>e.group_id===t)))||null==(a=n.items.find((t=>t.user_id_str===e)))?void 0:a.user.screen_name;for(const t of s)for(const s of t.items)if((null==s?void 0:s.user_id_str)===e)return s.user.screen_name},this._getScribeData=(e,t)=>({items:[{id:e,item_type:dl.Z.ItemType.USER,name:this._getUserNameFromId(e,t),description:this._scribeDescription}]}),this._handleOnUnfollowSelected=(e,t,s)=>{const{analytics:n}=this.props,{followedGroupIds:a,notFollowedGroupIds:i,selectedUsers:o}=this.state;for(const a of e)o.has(a)&&(s||n.scribe({element:"recommendation",action:"deselect",data:this._getScribeData(a,t)}),o.delete(a));t&&(a.delete(t),i.add(t)),this.setState({selectedUsers:o,followedGroupIds:a,notFollowedGroupIds:i})},this._handleOnFollowSelected=(e,t,s)=>{const{analytics:n}=this.props,{firstSelectedGroupIdx:a,followedGroupIds:i,groups:o,notFollowedGroupIds:r,selectedUsers:l}=this.state;for(const a of e)l.has(a)||s||n.scribe({element:"recommendation",action:"select",data:this._getScribeData(a,t)}),l.add(a);t&&(i.add(t),r.delete(t));const c=a<0?o.findIndex((e=>e.group_id===t)):a;this.setState({selectedUsers:l,followedGroupIds:i,notFollowedGroupIds:r,firstSelectedGroupIdx:c})},this._handleActionButtonClick=()=>{const{onNavigate:e,subtask:t,subtaskId:s,updateFlow:n}=this.props;n(s,{link:t.next_link.link_id,selected_user_recommendations:[...this.state.selectedUsers]}),e(t.next_link)};const{browsableNuxRecommendations:t,flowToken:s,subtask:n,subtaskId:o,subtaskInputs:l}=e,c=(0,We.Z)([]),u=(0,L.OG)(l,{key:Kl,subtask_id:o},c);this._scribeDescription=`subtask_id=${o},flow_token=${s}`,this._recommendedUsers=(0,We.Z)(n.groups.map((e=>e.items.map((e=>e.user_id?e.user_id.toString():"")))).reduce((function(e,t){return e.concat(t)})));const d=[...n.groups];t&&d.concat(t);const p=d.map((e=>e.group_id||"")).filter((e=>!!e.length));this.state={selectedUsers:u&&u.size?u:this._getPreCheckedUsers(n.groups),followedGroupIds:(0,We.Z)([]),notFollowedGroupIds:(0,We.Z)(p),groups:ll()(d,"group_id"),firstSelectedGroupIdx:-1}}static getDerivedStateFromProps(e,t){const{followedGroupIds:s,groups:n,notFollowedGroupIds:a}=t,{browsableNuxRecommendations:i}=e;if((0,xs.Z)(e.browsableNuxRecommendations,t.groups))return t;{const t=[...n,...i],o=(0,We.Z)(e.browsableNuxRecommendations.map((e=>e.group_id)).filter((e=>!s.has(e))));return{groups:ll()(t,"group_id"),notFollowedGroupIds:(0,We.Z)([...o,...a])}}}render(){var e,t,s;const{onNavigate:i,passthroughOcfScreenProps:o,subtask:r,subtaskInputs:l}=this.props,{firstSelectedGroupIdx:c,groups:u,selectedUsers:d}=this.state,p=(((r.next_link_threshold_text||{})[0]||{}).text||{}).text,h=r.next_link.label,m=d.size,_=this._getFollowText(p,h,m),g=null===r.min_follow_count||void 0===r.min_follow_count?1:r.min_follow_count,b=d.size<10?d.size/10:1,k=null!=r&&null!=(e=r.user_tooltip_text)&&e.text?{text:null==r||null==(t=r.user_tooltip_text)?void 0:t.text,icon:ul.default}:void 0,v=d.size<g,f=null!=r&&r.gated_next_link_popup_text&&v?e=>a.createElement(cl.Z,{preferredVerticalOrientation:"up",renderContent:this._renderPopoverContent,withArrow:!0},e):void 0,y=null==r||null==(s=r.progress_indicator_text)?void 0:s.text,x=y?a.createElement($l,{progress:b,text:y}):void 0;return a.createElement(ue.Z,(0,n.Z)({},o,{footer:a.createElement(G,{actionDisabled:v,actionLabel:_||Yl,actionTestID:vl,actionWrapper:f,decorator:x,onAction:this._handleActionButtonClick}),header:a.createElement(ce,{onNavigate:i,primaryTextProp:r.primary_text,secondaryTextProp:r.secondary_text,subtaskInputs:l}),providePadding:!0}),a.createElement(jl,{firstSelectedGroupIdx:c,followButtonType:r.follow_button_type,followedUserIds:d,message:k,onFollow:this._handleOnFollowSelected,onNearEnd:this._handleNearEnd,onUnfollow:this._handleOnUnfollowSelected,scribeDescription:this._scribeDescription,styleType:r.style,userGroups:u}),this.props.errorDialog)}}const Xl=u.Z.create((e=>({popoverContent:{padding:e.spaces.space16}}))),Jl=Gl(Ql),ec="headerPrimaryText",tc="detailText";class sc extends a.Component{constructor(...e){super(...e),this._isInteractive="interactive"===this.props.subtask.style,this._navigateAndUpdate=e=>{const{onNavigate:t,subtask:s,subtaskId:n,updateFlow:a}=this.props;a(n,{link:e.link_id,wait_time_ms:s.wait_time_ms}),t(e,!0)}}componentWillUnmount(){this._interactiveInterval&&clearInterval(this._interactiveInterval),this._interactiveTimeout&&clearTimeout(this._interactiveTimeout),this._spinnerTimer&&clearTimeout(this._spinnerTimer)}componentDidMount(){const{pollInteractivePath:e,subtask:t}=this.props;if(this._isInteractive){const s=t.extension_endpoint;t.extension_polling_interval_ms&&s&&(this._interactiveInterval=setInterval((()=>{e(s).then((e=>{e&&this._navigateAndUpdate(t.next_link)}))}),t.extension_polling_interval_ms));const n=t.extension_timeout_link;n&&(this._interactiveTimeout=setTimeout((()=>{this._navigateAndUpdate(n)}),t.max_extension_time_ms||t.wait_time_ms))}else this._spinnerTimer=setTimeout((()=>{this._navigateAndUpdate(t.next_link)}),t.wait_time_ms)}render(){const{onNavigate:e,passthroughOcfScreenProps:t,subtask:s,subtaskInputs:o}=this.props,{detail_text:r,header:l}=s;return a.createElement(ue.Z,(0,n.Z)({},t,{header:this._isInteractive&&this.props.subtask.header&&a.createElement(ce,{header:l,onNavigate:e,primaryTextTestID:ec,subtaskInputs:o,withHeaderImage:!0}),providePadding:this._isInteractive}),a.createElement(i.Z,{style:nc.indicator,testID:tc},this._isInteractive&&this.props.subtask.header?a.createElement(i.Z,null,r&&a.createElement(U,(0,n.Z)({},r,{onNavigate:e,subtaskInputs:o}))):a.createElement(ja.Z,null)))}}const nc=u.Z.create((e=>({indicator:{display:"flex",flex:1,justifyContent:"center"}})));s(60523);var ac=s(90437),ic=s(70025),oc=s(58380);function rc(e){const{onNavigate:t,passthroughOcfScreenProps:s,subtask:n,subtaskId:i,updateFlow:o}=e,r=new URLSearchParams(n.url.split("?")[1]),l=r.get("publicKey"),c=r.get("webKey")||l,u=r.get("mobileKey")||l,d="true"===r.get("verifyOnChallengeCompleted"),p=r.get("flowToken")||"",h=e=>{Ee.ZP.isTwitterApp()?ic.Z.openApp(e):(o(i,{completion_deeplink:e,link:n.next_link.link_id}),t(n.next_link))},m=e=>{o(i,{completion_deeplink:e,link:n.fail_link.link_id}),t(n.fail_link)};return c&&u&&!(d&&""===p)?a.createElement(ue.Z,s,a.createElement(oc.default,{flowToken:p,mobileKey:u,onChallengeCompleted:h,onChallengeFailed:m,shouldVerifyAfterChallengeCompleted:d,webKey:c})):((0,ac.vv)(),null)}function lc(e){const{onNavigate:t,passthroughOcfScreenProps:s,renderDefault:n,subtask:i,subtaskId:o,updateFlow:r}=e;return i&&-1!==i.url.indexOf("ocf_arkose_challenge")?a.createElement(rc,{onNavigate:t,passthroughOcfScreenProps:s,subtask:i,subtaskId:o,updateFlow:r}):n()}const cc=p().c20aaf3e,uc=p().a219e218;class dc extends a.Component{constructor(e,t){super(e,t),this._handleBackAttempt=(e,t)=>{const{currentSubtask:s}=this.props,n=!s||!s.subtask_back_navigation||s.subtask_back_navigation!==Z.bc.Disallow,a=!((null==s?void 0:s.subtask_back_navigation)!==Z.bc.CancelFlow),i=!this.currentPreviousNavigableSubtaskId&&(this._onFirstTaskSinceStart||a)&&n;if("POP"!==t||i)return!0;return this.currentPreviousNavigableSubtaskId&&n&&this._navigateToPreviousSubtask(),!1},this._sendGaOnboardingEvent=e=>{const{googleAnalyticsSendEvent:t}=this.props;t("signup",e,"new-user")},this._startFlow=e=>{const{countryCode:t,createLocalApiErrorHandler:s,debugOverrides:n,flowName:a,inputFlowData:i,location:o,startFlow:r,startLocation:l,targetUserId:c,testCountryCode:u}=e,{fromApp:d,gatedAction:p}=o.state||{},h={flow_context:{debug_overrides:n,gated_action:p,...Object.keys(l||{}).length?{start_location:l}:{start_location:{location:d?"unknown":"manual_link"}}}},m={...i,country_code:t||i.country_code,target_user_id:c||i.target_user_id,...h};"signup"===a&&this._sendGaOnboardingEvent("signup-clicked"),this._onFirstTaskSinceStart=!0,r({flow_name:a,input_flow_data:m,subtask_versions:L.OA,test_country_code:u}).catch(s(x(a,null,this._displayFailureMessage)))},this._handleFlowRestart=()=>{this._startFlow(this.props)},this._handleAbortFlow=e=>{const{clearFlow:t,currentSubtask:s,flowName:n,history:a,location:i,loginReturnPath:o,onAbort:r,returnPath:l}=this.props;t({clearPersistence:!0});const c=s&&(0,L.uL)(s),{subtask_back_navigation_link:u}=s||{};if(r)r();else{if(l)a.replace({pathname:l,query:{flow_status:e}});else if(c===Z.Ti.OpenHomeTimeline)"login"===n&&o?S.ZP.navigateTo(o):S.ZP.navigateTo("/home");else if(u)this._handleNavigate(u);else{const{loggedInUserId:e}=this.context,t=!!e;this._unblockHistory&&this._unblockHistory(),(0,C.q)({},{location:i})?a.goBack():t?o?a.replace(o):a.replace("/home"):a.replace("/")}this.props.language!==p().language&&(a.location.pathname.startsWith("/i/flow/")?a.listen((()=>window.location.reload())):window.location.reload())}},this._handleDeepLink=e=>{const{flowName:t,history:s,loginReturnPath:n}=this.props;if(e){var a;const i=S.ZP.parseInternalUrl(e),r=i&&!(null==(a=o.Qc(i))||!a.query);if(S.ZP.isOCFUrl(e)&&void 0!==i&&!r)if(!n||"login"!==t&&"signup"!==t)s.replace(i);else{const e={requested_variant:btoa(JSON.stringify({redirect_url:`${n}`}))},t=JSON.stringify(e);s.replace({pathname:i,query:{input_flow_data:t}})}else["twitter://","https://"].find((t=>e.startsWith(t)))?S.ZP.navigateTo(e):s.replace(e)}},this._displayFailureMessage=e=>{this.setState({alertFailureMessage:e})},this._submitFlow=({isTaskNavigation:e}={})=>{const{createLocalApiErrorHandler:t,flowName:s,submitFlow:n}=this.props;return n({isTaskNavigation:e}).then((e=>(this._onFirstTaskSinceStart=!1,e)),(e=>{const{failureMessage:n,shouldAbort:a}=this.props;return t(x(s,n,a?this._displayFailureMessage:void 0))(e)}))},this._handleNavigate=(e,t=!1)=>{const{navigateSubtask:s,submitFlow:n}=this.props,{is_destructive:a,subtask_id:i,subtask_navigation_context:o}=e;switch(e.suppress_client_events||this._scribeSubtaskNavigate(e),e.callbacks&&this._handleCallbacks(e.callbacks,Z.ho.Click),e.link_type){case Z.Iq.Abort:n().catch(h.Z),this._handleAbortFlow();break;case Z.Iq.Subtask:s({subtaskId:i,navigationContext:o,destructive:a,fromHiddenSubtask:t});break;case Z.Iq.Finish:case Z.Iq.Task:this._submitFlow({isTaskNavigation:!0});break;case Z.Iq.Deeplink:this._submitFlow(),this._handleDeepLink(e.url);break;case Z.Iq.DeeplinkAndAbort:n().catch(h.Z),this._handleDeepLink(e.url);break;case Z.Iq.WeblinkAndAbort:n().catch(h.Z),window.open(e.url,"_blank"),this._handleAbortFlow();break;case Z.Iq.Web:S.ZP.navigateTo(e.url);break;case Z.Iq.ChromelessWeb:window.open(e.url,"_blank");break;case Z.Iq.DeeplinkInPlace:break;default:(0,I.ZP)(`Unknown Navigation Link Type ${e.link_type}`),this._handleAbortFlow()}},this._scribeSubtaskNavigate=e=>{const{analytics:t,currentSubtask:s,flowToken:n}=this.props;if(s&&s.subtask_id){const{link_id:a}=e;t.scribe({element:"link",action:"click",data:{items:[{token:n,name:s.subtask_id,description:a}]}})}},this._navigateToSubtask=e=>()=>{this._handleNavigate({link_id:"",link_type:Z.Iq.Subtask,subtask_id:e})},this._endFlowSubtaskAction=(e,t)=>{const{submitFlow:s}=this.props;switch(t){case Z.Iq.Abort:s().catch(h.Z).then((()=>this._handleAbortFlow(e)));break;case Z.Iq.Finish:this._submitFlow().then((()=>this._handleAbortFlow(e)));break;default:(0,I.ZP)(`Unknown End Flow Type ${t}`),this._handleAbortFlow()}},this._render=()=>{const{currentSubtask:e,previousNavigableSubtaskId:t,subtaskInputs:s,subtasks:n,updateFlow:i}=this.props;if(!e)return null;let o,r;if((0,F.Lw)(e)){r=n.find((e=>e.subtask_id===t)),o=e}else r=e;return a.createElement(a.Fragment,null,o&&a.createElement(mt,{onNavigate:this._handleNavigate,subtask:o,subtaskId:e.subtask_id,subtaskInputs:s,updateFlow:i},this._renderSubtask(o)),r&&a.createElement(mt,{onNavigate:this._handleNavigate,subtask:r,subtaskId:e.subtask_id,subtaskInputs:s,updateFlow:i},this._renderSubtask(r)))},this._renderDefault=()=>{const{currentSubtask:e,flowToken:t,history:s,subtasks:n}=this.props,o=n.map((e=>a.createElement(r.ZP,{key:e.subtask_id,onClick:this._navigateToSubtask(e.subtask_id)},e.subtask_id)));return a.createElement(ue.Z,{history:s},a.createElement(i.Z,{style:{margin:5}},a.createElement(r.ZP,null,t),a.createElement(r.ZP,null,`Current Subtask: ${e?e.subtask_id:""}`),o))},this._handleAbortFlowOnConfirm=()=>{this._handleAbortFlow()},this._onNoopInvisibleSubtask=()=>Promise.resolve(),this._navigateToPreviousSubtask=()=>{const{navigateSubtask:e,previousNavigableSubtaskId:t}=this.props;e({subtaskId:t,destructive:!0})},this._renderErrorDialog=()=>{const{failureMessage:e,history:t}=this.props;return a.createElement(ue.Z,{hideBackButton:!0,history:t},a.createElement(l.Z,{confirmButtonLabel:uc,headline:cc,onConfirm:this._handleAbortFlowOnConfirm,text:e||f,withCancelButton:!1}))},this._renderSubtask=e=>{const{addToast:t,callInteractiveSpinnerPath:s,fetchTemporaryPassword:i,flowName:o,flowToken:r,history:u,location:d,previouslySubmittedSubtaskId:p,removeContacts:h,shouldAbort:m,startLocation:_,submitFailed:g,subtaskInputs:b,updateFlow:k}=this.props,{progress_indication:v,subtask_back_navigation:f,subtask_id:y}=e,x=m?a.createElement(l.Z,{confirmButtonLabel:uc,headline:cc,onConfirm:this._handleAbortFlowOnConfirm,text:this.state.alertFailureMessage,withCancelButton:!1}):null,w={onNavigate:this._handleNavigate,passthroughOcfScreenProps:{backButtonType:f===Z.bc.CancelFlow?"close":"back",history:u,onBackClick:this._getBackNavigation(e),progressIndication:v},subtaskId:y,updateFlow:k};if(e.end_flow)return this._endFlowSubtaskAction(e.end_flow.status,e.end_flow.end_flow_type),this._renderDefault();if(e.action_list)return a.createElement(ke,(0,n.Z)({subtask:e.action_list,subtaskInputs:b},w));if(e.fetch_temporary_password)return a.createElement(Be,{navigationLink:e.fetch_temporary_password.next_link,onNavigate:this._handleNavigate,subtaskAction:this._handleInvisibleSubtask(y,e.fetch_temporary_password,i),subtaskId:y});if(e.cta)return a.createElement(Ne,(0,n.Z)({errorDialog:x,subtask:e.cta,subtaskInputs:b},w));if(e.app_download_cta)return a.createElement(we,(0,n.Z)({errorDialog:x,startLocation:_,subtask:e.app_download_cta,subtaskInputs:b},w));if(e.app_locale_update)return a.createElement(jo,(0,n.Z)({subtask:e.app_locale_update},w));if(e.alert_dialog)return a.createElement(fe,(0,n.Z)({subtask:e.alert_dialog,subtaskInputs:b},w));if(e.alert_dialog_suppress_client_events)return a.createElement(fe,(0,n.Z)({subtask:e.alert_dialog_suppress_client_events,subtaskInputs:b},w));if(e.menu_dialog)return a.createElement(Ka,(0,n.Z)({subtask:e.menu_dialog,subtaskInputs:b},w));if(e.open_account)return a.createElement(Be,{navigationLink:e.open_account.next_link,onNavigate:this._handleNavigate,subtaskAction:this._openAccountAction(e.open_account),subtaskId:y});if(e.in_app_notification)return a.createElement(Za,(0,n.Z)({addToast:t,onNavigate:this._handleNavigate,subtask:e.in_app_notification,subtaskId:y},w));if(e.show_code)return a.createElement(lo,(0,n.Z)({errorDialog:x,subtask:e.show_code,subtaskInputs:b},w));if(e.sign_up)return a.createElement(Fo,(0,n.Z)({subtask:e.sign_up,subtaskInputs:b},w));if(e.sign_up_review)return a.createElement(Uo,(0,n.Z)({errorDialog:x,subtask:e.sign_up_review,subtaskInputs:b},w));if(e.js_instrumentation)return a.createElement(Wa,(0,n.Z)({subtask:e.js_instrumentation},w));if(e.phone_verification)return a.createElement(hi,(0,n.Z)({errorDialog:x,flowName:o,submitFailed:g,subtask:e.phone_verification,subtaskInputs:b},w));if(e.recaptcha)return a.createElement(Gn,(0,n.Z)({errorDialog:x,subtask:e.recaptcha,subtaskInputs:b},w));if(e.privacy_options)return a.createElement(gi,(0,n.Z)({subtask:e.privacy_options,subtaskInputs:b},w));if(e.generic_urt)return a.createElement(Sa,(0,n.Z)({errorDialog:x,subtask:e.generic_urt,subtaskInputs:b},w));if(e.interest_picker)return a.createElement(za,(0,n.Z)({errorDialog:x,subtask:e.interest_picker,subtaskInputs:b},w));if(e.topics_selector)return a.createElement(wr,(0,n.Z)({errorDialog:x,subtask:e.topics_selector,subtaskInputs:b},w));if(e.notifications_permission_prompt)return a.createElement(ai,(0,n.Z)({subtask:e.notifications_permission_prompt,subtaskInputs:b},w));if(e.open_home_timeline)return"signup"===o&&this._sendGaOnboardingEvent("complete-NUX"),a.createElement(Be,{navigationLink:e.open_home_timeline.next_link,onNavigate:this._handleNavigate,subtaskAction:this._onNoopInvisibleSubtask,subtaskId:y});if(e.open_link)return p===y?null:a.createElement(ri,{flowName:o,onNavigate:this._handleNavigate,subtask:e.open_link,subtaskId:y});if(e.upload_media)return a.createElement(Wr,{flowToken:r,onNavigate:this._handleNavigate,subtask:e.upload_media,subtaskId:y});if(e.user_recommendations_list)return a.createElement(Jl,(0,n.Z)({errorDialog:x,subtask:e.user_recommendations_list,subtaskInputs:b},w));if(e.user_recommendations_urt)return a.createElement(ol,(0,n.Z)({errorDialog:x,flowToken:r,subtask:e.user_recommendations_urt,subtaskInputs:b},w));if(e.update_users)return a.createElement(Be,{navigationLink:e.update_users.next_link,onNavigate:this._handleNavigate,subtaskAction:this._handleInvisibleSubtask(y,e.update_users,this._updateUsersAction),subtaskId:y});if(e.enter_password)return a.createElement(Pn,(0,n.Z)({errorDialog:x,subtask:e.enter_password,subtaskInputs:b},w));if(e.settings_list){const{settings_list:s}=e;return a.createElement(c.Z.Consumer,null,(({isModal:e})=>a.createElement(ao,(0,n.Z)({addToast:t,errorDialog:x,isModal:e,removeContacts:h,subtask:s,subtaskInputs:b},w))))}return e.email_contacts_sync?a.createElement(ms,(0,n.Z)({errorDialog:x,location:d,subtask:e.email_contacts_sync,subtaskInputs:b},w)):e.select_avatar?a.createElement(Ni,(0,n.Z)({errorDialog:x,subtask:e.select_avatar,subtaskInputs:b},w)):e.select_banner?a.createElement(Gi,(0,n.Z)({errorDialog:x,subtask:e.select_banner,subtaskInputs:b},w)):e.security_key?a.createElement(fi,(0,n.Z)({errorDialog:x,subtask:e.security_key,subtaskInputs:b},w)):e.enter_date?a.createElement(Es,(0,n.Z)({errorDialog:x,subtask:e.enter_date,subtaskInputs:b},w)):e.enter_text?a.createElement(Yn,(0,n.Z)({errorDialog:x,key:y,subtask:e.enter_text,subtaskInputs:b},w)):e.email_verification?a.createElement(fs,(0,n.Z)({errorDialog:x,flowName:o,submitFailed:g,subtask:e.email_verification,subtaskInputs:b},w)):e.enter_username?a.createElement(ia,(0,n.Z)({errorDialog:x,subtask:e.enter_username,subtaskInputs:b},w)):e.enter_email?a.createElement(kn,(0,n.Z)({errorDialog:x,subtask:e.enter_email,subtaskInputs:b},w)):e.enter_phone?a.createElement(Un,(0,n.Z)({errorDialog:x,subtask:e.enter_phone,subtaskInputs:b},w)):e.choice_selection?a.createElement(Lt,(0,n.Z)({key:y,subtask:e.choice_selection,subtaskInputs:b},w)):e.contacts_live_sync_permission_prompt?a.createElement(os,(0,n.Z)({subtask:e.contacts_live_sync_permission_prompt,subtaskInputs:b},w)):e.wait_spinner?a.createElement(sc,(0,n.Z)({pollInteractivePath:s,subtask:e.wait_spinner,subtaskInputs:b},w)):e.check_logged_in_account?a.createElement(Re,(0,n.Z)({errorDialog:x,onNavigate:this._handleNavigate,subtask:e.check_logged_in_account,subtaskId:y},w)):e.tweet_selection_urt?a.createElement(Pr,(0,n.Z)({errorDialog:x,subtask:e.tweet_selection_urt,subtaskInputs:b},w)):e.typeahead_search?a.createElement(Mr,(0,n.Z)({errorDialog:x,key:y,source:A._4.OcfTypeaheadSearch,subtask:e.typeahead_search,subtaskInputs:b},w)):e.web_modal?a.createElement(lc,(0,n.Z)({renderDefault:this._renderDefault.bind(this),subtask:e.web_modal},w)):this._renderDefault()},this._getBackNavigation=e=>{const{subtask_back_navigation:t=Z.bc.Allow}=e;return t===Z.bc.CancelFlow?()=>this._handleAbortFlow():this.currentPreviousNavigableSubtaskId&&t===Z.bc.Allow?this._navigateToPreviousSubtask:void 0},this._scribeSubtaskView=()=>{const{analytics:e,currentSubtask:t,flowToken:s}=this.props;t&&t.subtask_id&&!(0,L.Di)(t)&&e.scribe({element:"view",action:"impression",data:{items:[{token:s,name:t.subtask_id}]}})},this._handleCallbacks=(e,t)=>{const{analytics:s,callOnboardingPath:n}=this.props;e.forEach((e=>{if(e.trigger===t){const t=e.scribe_config;null!=t&&t.action&&s.scribe({...t,action:t.action}),e.endpoint&&n(e.endpoint,{timestampMs:Date.now()})}}))},this._openAccountAction=e=>()=>{const{loggedInUserId:t}=this.context,{analytics:s,returnPath:n,verifyCredentials:a}=this.props,{attribution_event:i,user:{id_str:o}}=e,{encryptedReferer:r,encryptedReferralDetails:l}=(0,E.Qo)(this.context.featureSwitches)||{};return T.Z.flushHTMLCache(),t&&o!==t?(S.ZP.navigateTo(n||"/home"),new Promise((()=>{}))):a().then((()=>{this._maybeScribeAppInstallBanner(),"signup"===i&&(this._sendGaOnboardingEvent("account-create"),s.scribe({page:"signup",action:"success",data:{referer:r,external_referer:l}}))}))},this._updateUsersAction=(e,t)=>{const{createLocalApiErrorHandler:s,fetchUsers:n}=this.props,a=null==t?void 0:t.users;a&&a.length&&n(a.map((e=>e.id_str))).catch(s({showToast:!0}))},this._maybeScribeAppInstallBanner=()=>{const{analytics:e}=this.props;w.Z.hasPromptWaiting()&&e.scribe({page:"signup",component:"install_banner",action:"waiting"})},this.state={alertFailureMessage:""}}UNSAFE_componentWillReceiveProps(e){this.props.flowName!==e.flowName&&this._startFlow(e)}componentDidUpdate(e){const{currentSubtask:t}=e,{currentSubtask:s}=this.props,n=t&&t.subtask_id;s&&s.subtask_id!==n&&(this._scribeSubtaskView(),s.callbacks&&this._handleCallbacks(s.callbacks,Z.ho.Impression))}UNSAFE_componentWillMount(){this._startFlow(this.props)}componentDidMount(){const{analytics:e,googleAnalyticsPageView:t,history:s}=this.props;e.scribePageImpression(),t(e.contextualScribeNamespace),this._unblockHistory=s.block(this._handleBackAttempt)}componentWillUnmount(){this._unblockHistory&&this._unblockHistory(),this.props.clearFlow()}render(){const{currentSubtask:e,shouldEndFlow:t}=this.props;t&&this._handleAbortFlow();let s=this.props.fetchStatus;return s===P.ZP.FAILED||e||(s=P.ZP.LOADING),a.createElement(i.Z,{style:pc.root},a.createElement(m.Z,{fetchStatus:s,onRequestRetry:this._handleFlowRestart,render:this._render,renderFailure:this._renderErrorDialog,retryable:!this.props.shouldAbort}))}_handleInvisibleSubtask(e,t,s){return()=>new Promise(((n,a)=>{n(s(e,t))}))}get currentPreviousNavigableSubtaskId(){return this.props.previousNavigableSubtaskId}}dc.contextType=_.rC,dc.defaultProps={inputFlowData:{}};const pc=u.Z.create((e=>({root:{backgroundColor:e.colors.cellBackground,flexGrow:1,flexShrink:1}}))),hc=ts(dc)},84973:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n=s(73186).Z.create((e=>{const t={width:"25%",minWidth:e.spaces.space48};return{avatar:{...t,height:"auto",marginTop:"-15%",marginBottom:e.spaces.space12},avatarSize:t,avatarAndButton:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap"},buttonAffordance:{height:e.spacesPx.space36},content:{paddingTop:e.componentDimensions.gutterVertical,paddingHorizontal:e.componentDimensions.gutterHorizontal},withheld:{paddingBottom:e.spaces.space12},banner:{backgroundColor:e.colors.gray200},menuSheetButton:{marginEnd:e.spaces.space8,marginBottom:e.spaces.space12},names:{marginTop:e.spaces.space4,marginBottom:e.spaces.space12}}}))},10242:(e,t,s)=>{"use strict";s.r(t),s.d(t,{VerificationLanding:()=>C,default:()=>E});s(85940);var n=s(2784),a=s(25686),i=s(34411),o=s(73186),r=s(73228),l=s.n(r),c=s(1206),u=s(72983),d=s(23803),p=s(53105),h=s(97871),m=s(92160),_=s(17943);const g=(0,h.c)("user_identifier"),b=(0,h.c)("phone"),k=(0,h.c)("email"),v=(0,h.c)("pin_code"),f=(0,m.Z)().propsFromState((()=>({email:k,identifier:g,phone:b,pinCode:v}))).propsFromActions((()=>({verificationLink:_.d7}))),y=l().b5474bd2,x=l().a9b8fb38,w=l().j24c37b2;class C extends n.Component{constructor(e){super(e),this._render=()=>n.createElement(i.Z,{actionLabel:w,headline:this.state.title||"",onAction:this._handleCloseWindow,onClose:this._handleCloseWindow,subtext:this.state.message||"",withCloseButton:!1}),this._handleCloseWindow=()=>{window&&window.close(),this.props.history.replace("/")},this.state={title:void 0,message:void 0,fetchStatus:d.ZP.LOADING}}componentDidMount(){const{email:e,history:t,identifier:s,location:n,phone:a,pinCode:i,verificationLink:o}=this.props;return t.replace(n.pathname),o({user_identifier:s,email:e,phone:a,pin_code:i}).then((e=>this.setState({fetchStatus:e.success?d.ZP.LOADED:d.ZP.FAILED,title:e.title,message:e.message}))).catch((()=>this.setState({title:y,message:x,fetchStatus:d.ZP.FAILED})))}render(){const{history:e}=this.props;return n.createElement(p.Z,{hideLogo:!0,history:e},n.createElement(a.Z,{style:I.root},n.createElement(u.Z,{fetchStatus:this.state.fetchStatus,onRequestRetry:c.Z,render:this._render,renderFailure:this._render,retryable:!1})))}}const I=o.Z.create((e=>({root:{backgroundColor:e.colors.cellBackground,flexGrow:1,flexShrink:1}}))),E=f(C)},96818:(e,t,s)=>{"use strict";s.d(t,{Z:()=>b});var n=s(7896),a=s(2784),i=s(90601),o=s(59030),r=s(25686),l=s(7066),c=s(36934),u=s(35094),d=s(79866),p=s(11839),h=s(73186);let m=1;class _ extends a.Component{blur(){this._checkboxElement&&o.Z.blur(this._checkboxElement)}focus(){this._checkboxElement&&o.Z.focus(this._checkboxElement)}constructor(){super(),this._handleChange=e=>{const{onChange:t}=this.props;t&&t(e.nativeEvent.target.checked)},this._setCheckboxRef=e=>{this._checkboxElement=e},this._labelId=`CHECKBOX_${m}_LABEL`,m+=1}render(){const{checked:e,disabled:t,helpText:s,label:o,onChange:m,style:_,...b}=this.props,k=d.Z.generate({backgroundColor:h.Z.theme.colors.transparent,color:h.Z.theme.colors.primary,withFocusWithinFocusRing:!0}),v=d.Z.generate({backgroundColor:h.Z.theme.colors.transparent,color:h.Z.theme.colors.gray700,withFocusWithinFocusRing:!0}),f=e?k:v,y=(0,i.Z)("input",{accessibilityDescribedBy:this._labelId,checked:e,disabled:t,onChange:this._handleChange,ref:this._setCheckboxRef,style:[g.nativeControl,g.cursorInherit],type:"checkbox"}),x=a.createElement(u.Z,{disabled:t},(s=>a.createElement(r.Z,(0,n.Z)({accessibilityRole:"label"},b,{style:[_,!t&&g.interactive]}),a.createElement(r.Z,{style:g.topContainer},o?a.createElement(c.ZP,null,o):null,a.createElement(r.Z,{style:g.checkboxContainer},(s=>a.createElement(p.Z,{interactiveStyles:f,interactivityState:s,style:g.fakeControlInteractiveStyles},a.createElement(r.Z,{style:[g.fakeControl,e&&g.fakeControlChecked,t&&g.fakeControlDisabled,e&&t&&g.fakeControlCheckedAndDisabled]},e?a.createElement(l.default,{style:g.icon}):null)))(s),y)))));return s?a.createElement(r.Z,null,x,a.createElement(c.ZP,{color:"gray700",nativeID:this._labelId,size:"subtext2",style:g.helpText},s)):x}}_.defaultProps={checked:!1,disabled:!1};const g=h.Z.create((e=>({interactive:{cursor:"pointer"},topContainer:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",flexGrow:1,gap:e.spaces.space8},cursorInherit:{cursor:"inherit"},checkboxContainer:{userSelect:"none"},helpText:{paddingTop:e.spaces.space4},fakeControlInteractiveStyles:{padding:e.spaces.space8,margin:`-${e.spaces.space8}`,borderRadius:e.borderRadii.infinite},fakeControl:{alignItems:"center",backgroundColor:e.colors.cellBackground,borderColor:e.colors.gray700,borderRadius:e.borderRadii.small,borderStyle:"solid",borderWidth:e.borderWidths.medium,height:e.spaces.space20,justifyContent:"center",width:e.spaces.space20},fakeControlChecked:{backgroundColor:e.colors.primary,borderColor:e.colors.primary},fakeControlDisabled:{borderColor:e.colors.gray200},fakeControlCheckedAndDisabled:{backgroundColor:e.colors.gray300,borderColor:e.colors.gray300},nativeControl:{...h.Z.absoluteFillObject,cursor:"inherit",height:"100%",margin:0,opacity:0,padding:0,width:"100%"},icon:{...h.Z.absoluteFillObject,color:e.colors.whiteOnColor,height:e.spaces.space20,margin:"auto"}}))),b=_},19874:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s(7896),a=s(2784),i=s(24921),o=s(77096);const r=e=>a.createElement(i.Z,(0,n.Z)({},e,{renderSelector:({value:e,...t})=>a.createElement(o.Z,(0,n.Z)({},t,{key:e}))}))},2520:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});s(6886);var n=s(2784),a=s(73228),i=s.n(a),o=s(83786);const r=i().b05a39b2,l=i().c566d3a6,c=e=>n.createElement(o.Z,e),u=({children:e,hideLabel:t=l,label:s,lang:a,render:i=c,revealLabel:o=r})=>{const[u,d]=n.useState(!1);return i({actionText:u?t:o,children:u?e:s,lang:a,onActionClick:()=>d(!u)})};u.displayName="TweetDisclosure";const d=u},51908:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=s(2784),a=s(90601),i=s(73569);const o=(e={})=>(0,a.Z)("svg",{...e,accessibilityRole:e.accessibilityLabel?e.accessibilityRole||"img":void 0,accessibilityHidden:void 0===e.accessibilityLabel,style:[i.Z.root,e.style],viewBox:"0 0 24 24",children:n.createElement("g",null,n.createElement("path",{d:"M13 3v13.59l5.043-5.05 1.414 1.42L12 20.41l-7.457-7.45 1.414-1.42L11 16.59V3h2z"}))});o.metadata={width:24,height:24};const r=o},27837:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=s(2784),a=s(90601),i=s(73569);const o=(e={})=>(0,a.Z)("svg",{...e,accessibilityRole:e.accessibilityLabel?e.accessibilityRole||"img":void 0,accessibilityHidden:void 0===e.accessibilityLabel,style:[i.Z.root,e.style],viewBox:"0 0 24 24",children:n.createElement("g",null,n.createElement("path",{d:"M20 13H4v-2h16v2z"}))});o.metadata={width:24,height:24};const r=o},39515:(e,t,s)=>{var n=s(38761)(s(37772),"DataView");e.exports=n},89612:(e,t,s)=>{var n=s(52118),a=s(96909),i=s(98138),o=s(4174),r=s(7942);function l(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=o,l.prototype.set=r,e.exports=l},80235:(e,t,s)=>{var n=s(3945),a=s(21846),i=s(88028),o=s(72344),r=s(91764);function l(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=o,l.prototype.set=r,e.exports=l},10326:(e,t,s)=>{var n=s(38761)(s(37772),"Map");e.exports=n},96738:(e,t,s)=>{var n=s(92411),a=s(36417),i=s(51660),o=s(79493),r=s(24150);function l(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=o,l.prototype.set=r,e.exports=l},52760:(e,t,s)=>{var n=s(38761)(s(37772),"Promise");e.exports=n},2143:(e,t,s)=>{var n=s(38761)(s(37772),"Set");e.exports=n},45386:(e,t,s)=>{var n=s(96738),a=s(52842),i=s(52482);function o(e){var t=-1,s=null==e?0:e.length;for(this.__data__=new n;++t<s;)this.add(e[t])}o.prototype.add=o.prototype.push=a,o.prototype.has=i,e.exports=o},86571:(e,t,s)=>{var n=s(80235),a=s(15243),i=s(72858),o=s(4417),r=s(8605),l=s(71418);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=a,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=r,c.prototype.set=l,e.exports=c},50857:(e,t,s)=>{var n=s(37772).Symbol;e.exports=n},79162:(e,t,s)=>{var n=s(37772).Uint8Array;e.exports=n},93215:(e,t,s)=>{var n=s(38761)(s(37772),"WeakMap");e.exports=n},67552:e=>{e.exports=function(e,t){for(var s=-1,n=null==e?0:e.length,a=0,i=[];++s<n;){var o=e[s];t(o,s,e)&&(i[a++]=o)}return i}},38333:(e,t,s)=>{var n=s(77832);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},34893:e=>{e.exports=function(e,t,s){for(var n=-1,a=null==e?0:e.length;++n<a;)if(s(t,e[n]))return!0;return!1}},1634:(e,t,s)=>{var n=s(36473),a=s(79631),i=s(86152),o=s(73226),r=s(39045),l=s(77598),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var s=i(e),u=!s&&a(e),d=!s&&!u&&o(e),p=!s&&!u&&!d&&l(e),h=s||u||d||p,m=h?n(e.length,String):[],_=m.length;for(var g in e)!t&&!c.call(e,g)||h&&("length"==g||d&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||r(g,_))||m.push(g);return m}},50343:e=>{e.exports=function(e,t){for(var s=-1,n=null==e?0:e.length,a=Array(n);++s<n;)a[s]=t(e[s],s,e);return a}},65067:e=>{e.exports=function(e,t){for(var s=-1,n=t.length,a=e.length;++s<n;)e[a+s]=t[s];return e}},87064:e=>{e.exports=function(e,t){for(var s=-1,n=null==e?0:e.length;++s<n;)if(t(e[s],s,e))return!0;return!1}},22218:(e,t,s)=>{var n=s(41225);e.exports=function(e,t){for(var s=e.length;s--;)if(n(e[s][0],t))return s;return-1}},21359:e=>{e.exports=function(e,t,s,n){for(var a=e.length,i=s+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}},13324:(e,t,s)=>{var n=s(17297),a=s(33812);e.exports=function(e,t){for(var s=0,i=(t=n(t,e)).length;null!=e&&s<i;)e=e[a(t[s++])];return s&&s==i?e:void 0}},1897:(e,t,s)=>{var n=s(65067),a=s(86152);e.exports=function(e,t,s){var i=t(e);return a(e)?i:n(i,s(e))}},53366:(e,t,s)=>{var n=s(50857),a=s(62107),i=s(37157),o=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?a(e):i(e)}},20187:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},77832:(e,t,s)=>{var n=s(21359),a=s(22195),i=s(66024);e.exports=function(e,t,s){return t==t?i(e,t,s):n(e,a,s)}},15183:(e,t,s)=>{var n=s(53366),a=s(15125);e.exports=function(e){return a(e)&&"[object Arguments]"==n(e)}},88746:(e,t,s)=>{var n=s(51952),a=s(15125);e.exports=function e(t,s,i,o,r){return t===s||(null==t||null==s||!a(t)&&!a(s)?t!=t&&s!=s:n(t,s,i,o,e,r))}},51952:(e,t,s)=>{var n=s(86571),a=s(74871),i=s(11491),o=s(17416),r=s(70940),l=s(86152),c=s(73226),u=s(77598),d="[object Arguments]",p="[object Array]",h="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,s,_,g,b){var k=l(e),v=l(t),f=k?p:r(e),y=v?p:r(t),x=(f=f==d?h:f)==h,w=(y=y==d?h:y)==h,C=f==y;if(C&&c(e)){if(!c(t))return!1;k=!0,x=!1}if(C&&!x)return b||(b=new n),k||u(e)?a(e,t,s,_,g,b):i(e,t,f,s,_,g,b);if(!(1&s)){var I=x&&m.call(e,"__wrapped__"),E=w&&m.call(t,"__wrapped__");if(I||E){var S=I?e.value():e,Z=E?t.value():t;return b||(b=new n),g(S,Z,s,_,b)}}return!!C&&(b||(b=new n),o(e,t,s,_,g,b))}},37036:(e,t,s)=>{var n=s(86571),a=s(88746);e.exports=function(e,t,s,i){var o=s.length,r=o,l=!i;if(null==e)return!r;for(e=Object(e);o--;){var c=s[o];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<r;){var u=(c=s[o])[0],d=e[u],p=c[1];if(l&&c[2]){if(void 0===d&&!(u in e))return!1}else{var h=new n;if(i)var m=i(d,p,u,e,t,h);if(!(void 0===m?a(p,d,3,i,h):m))return!1}}return!0}},22195:e=>{e.exports=function(e){return e!=e}},6840:(e,t,s)=>{var n=s(61049),a=s(47394),i=s(29259),o=s(87035),r=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||a(e))&&(n(e)?p:r).test(o(e))}},35522:(e,t,s)=>{var n=s(53366),a=s(61158),i=s(15125),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&a(e.length)&&!!o[n(e)]}},68286:(e,t,s)=>{var n=s(26423),a=s(74716),i=s(23059),o=s(86152),r=s(65798);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?o(e)?a(e[0],e[1]):n(e):r(e)}},86411:(e,t,s)=>{var n=s(16001),a=s(54248),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return a(e);var t=[];for(var s in Object(e))i.call(e,s)&&"constructor"!=s&&t.push(s);return t}},26423:(e,t,s)=>{var n=s(37036),a=s(49882),i=s(73477);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(s){return s===e||n(s,e,t)}}},74716:(e,t,s)=>{var n=s(88746),a=s(72579),i=s(95041),o=s(21401),r=s(28792),l=s(73477),c=s(33812);e.exports=function(e,t){return o(e)&&r(t)?l(c(e),t):function(s){var o=a(s,e);return void 0===o&&o===t?i(s,e):n(t,o,3)}}},20256:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},82952:(e,t,s)=>{var n=s(13324);e.exports=function(e){return function(t){return n(t,e)}}},36473:e=>{e.exports=function(e,t){for(var s=-1,n=Array(e);++s<e;)n[s]=t(s);return n}},1054:(e,t,s)=>{var n=s(50857),a=s(50343),i=s(86152),o=s(4795),r=n?n.prototype:void 0,l=r?r.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return a(t,e)+"";if(o(t))return l?l.call(t):"";var s=t+"";return"0"==s&&1/t==-Infinity?"-0":s}},47826:e=>{e.exports=function(e){return function(t){return e(t)}}},67326:(e,t,s)=>{var n=s(45386),a=s(38333),i=s(34893),o=s(59950),r=s(78803),l=s(16909);e.exports=function(e,t,s){var c=-1,u=a,d=e.length,p=!0,h=[],m=h;if(s)p=!1,u=i;else if(d>=200){var _=t?null:r(e);if(_)return l(_);p=!1,u=o,m=new n}else m=t?[]:h;e:for(;++c<d;){var g=e[c],b=t?t(g):g;if(g=s||0!==g?g:0,p&&b==b){for(var k=m.length;k--;)if(m[k]===b)continue e;t&&m.push(b),h.push(g)}else u(m,b,s)||(m!==h&&m.push(b),h.push(g))}return h}},59950:e=>{e.exports=function(e,t){return e.has(t)}},17297:(e,t,s)=>{var n=s(86152),a=s(21401),i=s(54452),o=s(66188);e.exports=function(e,t){return n(e)?e:a(e,t)?[e]:i(o(e))}},24019:(e,t,s)=>{var n=s(37772)["__core-js_shared__"];e.exports=n},78803:(e,t,s)=>{var n=s(2143),a=s(36172),i=s(16909),o=n&&1/i(new n([,-0]))[1]==1/0?function(e){return new n(e)}:a;e.exports=o},74871:(e,t,s)=>{var n=s(45386),a=s(87064),i=s(59950);e.exports=function(e,t,s,o,r,l){var c=1&s,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var p=l.get(e),h=l.get(t);if(p&&h)return p==t&&h==e;var m=-1,_=!0,g=2&s?new n:void 0;for(l.set(e,t),l.set(t,e);++m<u;){var b=e[m],k=t[m];if(o)var v=c?o(k,b,m,t,e,l):o(b,k,m,e,t,l);if(void 0!==v){if(v)continue;_=!1;break}if(g){if(!a(t,(function(e,t){if(!i(g,t)&&(b===e||r(b,e,s,o,l)))return g.push(t)}))){_=!1;break}}else if(b!==k&&!r(b,k,s,o,l)){_=!1;break}}return l.delete(e),l.delete(t),_}},11491:(e,t,s)=>{var n=s(50857),a=s(79162),i=s(41225),o=s(74871),r=s(75179),l=s(16909),c=n?n.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,s,n,c,d,p){switch(s){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=r;case"[object Set]":var m=1&n;if(h||(h=l),e.size!=t.size&&!m)return!1;var _=p.get(e);if(_)return _==t;n|=2,p.set(e,t);var g=o(h(e),h(t),n,c,d,p);return p.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},17416:(e,t,s)=>{var n=s(13483),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,s,i,o,r){var l=1&s,c=n(e),u=c.length;if(u!=n(t).length&&!l)return!1;for(var d=u;d--;){var p=c[d];if(!(l?p in t:a.call(t,p)))return!1}var h=r.get(e),m=r.get(t);if(h&&m)return h==t&&m==e;var _=!0;r.set(e,t),r.set(t,e);for(var g=l;++d<u;){var b=e[p=c[d]],k=t[p];if(i)var v=l?i(k,b,p,t,e,r):i(b,k,p,e,t,r);if(!(void 0===v?b===k||o(b,k,s,i,r):v)){_=!1;break}g||(g="constructor"==p)}if(_&&!g){var f=e.constructor,y=t.constructor;f==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof f&&f instanceof f&&"function"==typeof y&&y instanceof y||(_=!1)}return r.delete(e),r.delete(t),_}},51242:(e,t,s)=>{var n="object"==typeof s.g&&s.g&&s.g.Object===Object&&s.g;e.exports=n},13483:(e,t,s)=>{var n=s(1897),a=s(80633),i=s(90249);e.exports=function(e){return n(e,i,a)}},27937:(e,t,s)=>{var n=s(98304);e.exports=function(e,t){var s=e.__data__;return n(t)?s["string"==typeof t?"string":"hash"]:s.map}},49882:(e,t,s)=>{var n=s(28792),a=s(90249);e.exports=function(e){for(var t=a(e),s=t.length;s--;){var i=t[s],o=e[i];t[s]=[i,o,n(o)]}return t}},38761:(e,t,s)=>{var n=s(6840),a=s(98109);e.exports=function(e,t){var s=a(e,t);return n(s)?s:void 0}},62107:(e,t,s)=>{var n=s(50857),a=Object.prototype,i=a.hasOwnProperty,o=a.toString,r=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,r),s=e[r];try{e[r]=void 0;var n=!0}catch(e){}var a=o.call(e);return n&&(t?e[r]=s:delete e[r]),a}},80633:(e,t,s)=>{var n=s(67552),a=s(30981),i=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,r=o?function(e){return null==e?[]:(e=Object(e),n(o(e),(function(t){return i.call(e,t)})))}:a;e.exports=r},70940:(e,t,s)=>{var n=s(39515),a=s(10326),i=s(52760),o=s(2143),r=s(93215),l=s(53366),c=s(87035),u="[object Map]",d="[object Promise]",p="[object Set]",h="[object WeakMap]",m="[object DataView]",_=c(n),g=c(a),b=c(i),k=c(o),v=c(r),f=l;(n&&f(new n(new ArrayBuffer(1)))!=m||a&&f(new a)!=u||i&&f(i.resolve())!=d||o&&f(new o)!=p||r&&f(new r)!=h)&&(f=function(e){var t=l(e),s="[object Object]"==t?e.constructor:void 0,n=s?c(s):"";if(n)switch(n){case _:return m;case g:return u;case b:return d;case k:return p;case v:return h}return t}),e.exports=f},98109:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},1369:(e,t,s)=>{var n=s(17297),a=s(79631),i=s(86152),o=s(39045),r=s(61158),l=s(33812);e.exports=function(e,t,s){for(var c=-1,u=(t=n(t,e)).length,d=!1;++c<u;){var p=l(t[c]);if(!(d=null!=e&&s(e,p)))break;e=e[p]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&r(u)&&o(p,u)&&(i(e)||a(e))}},52118:(e,t,s)=>{var n=s(99191);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},96909:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},98138:(e,t,s)=>{var n=s(99191),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var s=t[e];return"__lodash_hash_undefined__"===s?void 0:s}return a.call(t,e)?t[e]:void 0}},4174:(e,t,s)=>{var n=s(99191),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:a.call(t,e)}},7942:(e,t,s)=>{var n=s(99191);e.exports=function(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},39045:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,s){var n=typeof e;return!!(s=null==s?9007199254740991:s)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<s}},21401:(e,t,s)=>{var n=s(86152),a=s(4795),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var s=typeof e;return!("number"!=s&&"symbol"!=s&&"boolean"!=s&&null!=e&&!a(e))||(o.test(e)||!i.test(e)||null!=t&&e in Object(t))}},98304:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},47394:(e,t,s)=>{var n,a=s(24019),i=(n=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!i&&i in e}},16001:e=>{var t=Object.prototype;e.exports=function(e){var s=e&&e.constructor;return e===("function"==typeof s&&s.prototype||t)}},28792:(e,t,s)=>{var n=s(29259);e.exports=function(e){return e==e&&!n(e)}},3945:e=>{e.exports=function(){this.__data__=[],this.size=0}},21846:(e,t,s)=>{var n=s(22218),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,s=n(t,e);return!(s<0)&&(s==t.length-1?t.pop():a.call(t,s,1),--this.size,!0)}},88028:(e,t,s)=>{var n=s(22218);e.exports=function(e){var t=this.__data__,s=n(t,e);return s<0?void 0:t[s][1]}},72344:(e,t,s)=>{var n=s(22218);e.exports=function(e){return n(this.__data__,e)>-1}},91764:(e,t,s)=>{var n=s(22218);e.exports=function(e,t){var s=this.__data__,a=n(s,e);return a<0?(++this.size,s.push([e,t])):s[a][1]=t,this}},92411:(e,t,s)=>{var n=s(89612),a=s(80235),i=s(10326);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||a),string:new n}}},36417:(e,t,s)=>{var n=s(27937);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},51660:(e,t,s)=>{var n=s(27937);e.exports=function(e){return n(this,e).get(e)}},79493:(e,t,s)=>{var n=s(27937);e.exports=function(e){return n(this,e).has(e)}},24150:(e,t,s)=>{var n=s(27937);e.exports=function(e,t){var s=n(this,e),a=s.size;return s.set(e,t),this.size+=s.size==a?0:1,this}},75179:e=>{e.exports=function(e){var t=-1,s=Array(e.size);return e.forEach((function(e,n){s[++t]=[n,e]})),s}},73477:e=>{e.exports=function(e,t){return function(s){return null!=s&&(s[e]===t&&(void 0!==t||e in Object(s)))}}},77777:(e,t,s)=>{var n=s(30733);e.exports=function(e){var t=n(e,(function(e){return 500===s.size&&s.clear(),e})),s=t.cache;return t}},99191:(e,t,s)=>{var n=s(38761)(Object,"create");e.exports=n},54248:(e,t,s)=>{var n=s(60241)(Object.keys,Object);e.exports=n},4146:(e,t,s)=>{e=s.nmd(e);var n=s(51242),a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,o=i&&i.exports===a&&n.process,r=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=r},37157:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},60241:e=>{e.exports=function(e,t){return function(s){return e(t(s))}}},37772:(e,t,s)=>{var n=s(51242),a="object"==typeof self&&self&&self.Object===Object&&self,i=n||a||Function("return this")();e.exports=i},52842:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},52482:e=>{e.exports=function(e){return this.__data__.has(e)}},16909:e=>{e.exports=function(e){var t=-1,s=Array(e.size);return e.forEach((function(e){s[++t]=e})),s}},15243:(e,t,s)=>{var n=s(80235);e.exports=function(){this.__data__=new n,this.size=0}},72858:e=>{e.exports=function(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}},4417:e=>{e.exports=function(e){return this.__data__.get(e)}},8605:e=>{e.exports=function(e){return this.__data__.has(e)}},71418:(e,t,s)=>{var n=s(80235),a=s(10326),i=s(96738);e.exports=function(e,t){var s=this.__data__;if(s instanceof n){var o=s.__data__;if(!a||o.length<199)return o.push([e,t]),this.size=++s.size,this;s=this.__data__=new i(o)}return s.set(e,t),this.size=s.size,this}},66024:e=>{e.exports=function(e,t,s){for(var n=s-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}},54452:(e,t,s)=>{var n=s(77777),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,o=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,(function(e,s,n,a){t.push(n?a.replace(i,"$1"):s||e)})),t}));e.exports=o},33812:(e,t,s)=>{var n=s(4795);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},87035:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},41225:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},72579:(e,t,s)=>{var n=s(13324);e.exports=function(e,t,s){var a=null==e?void 0:n(e,t);return void 0===a?s:a}},95041:(e,t,s)=>{var n=s(20187),a=s(1369);e.exports=function(e,t){return null!=e&&a(e,t,n)}},23059:e=>{e.exports=function(e){return e}},79631:(e,t,s)=>{var n=s(15183),a=s(15125),i=Object.prototype,o=i.hasOwnProperty,r=i.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return a(e)&&o.call(e,"callee")&&!r.call(e,"callee")};e.exports=l},86152:e=>{var t=Array.isArray;e.exports=t},67878:(e,t,s)=>{var n=s(61049),a=s(61158);e.exports=function(e){return null!=e&&a(e.length)&&!n(e)}},73226:(e,t,s)=>{e=s.nmd(e);var n=s(37772),a=s(36330),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,r=o&&o.exports===i?n.Buffer:void 0,l=(r?r.isBuffer:void 0)||a;e.exports=l},61049:(e,t,s)=>{var n=s(53366),a=s(29259);e.exports=function(e){if(!a(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},61158:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},29259:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},15125:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},4795:(e,t,s)=>{var n=s(53366),a=s(15125);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==n(e)}},77598:(e,t,s)=>{var n=s(35522),a=s(47826),i=s(4146),o=i&&i.isTypedArray,r=o?a(o):n;e.exports=r},90249:(e,t,s)=>{var n=s(1634),a=s(86411),i=s(67878);e.exports=function(e){return i(e)?n(e):a(e)}},30733:(e,t,s)=>{var n=s(96738);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var s=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=s.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return s.cache=i.set(a,o)||i,o};return s.cache=new(a.Cache||n),s}a.Cache=n,e.exports=a},36172:e=>{e.exports=function(){}},65798:(e,t,s)=>{var n=s(20256),a=s(82952),i=s(21401),o=s(33812);e.exports=function(e){return i(e)?n(o(e)):a(e)}},30981:e=>{e.exports=function(){return[]}},36330:e=>{e.exports=function(){return!1}},66188:(e,t,s)=>{var n=s(1054);e.exports=function(e){return null==e?"":n(e)}},84636:(e,t,s)=>{var n=s(68286),a=s(67326);e.exports=function(e,t){return e&&e.length?a(e,n(t,2)):[]}},59639:function(e,t,s){var n;/*! https://mths.be/punycode v1.3.2 by @mathias */e=s.nmd(e),function(a){t&&t.nodeType,e&&e.nodeType;var i="object"==typeof s.g&&s.g;i.global!==i&&i.window!==i&&i.self;var o,r=2147483647,l=36,c=/^xn--/,u=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,m=String.fromCharCode;function _(e){throw RangeError(p[e])}function g(e,t){for(var s=e.length,n=[];s--;)n[s]=t(e[s]);return n}function b(e,t){var s=e.split("@"),n="";return s.length>1&&(n=s[0]+"@",e=s[1]),n+g((e=e.replace(d,".")).split("."),t).join(".")}function k(e){for(var t,s,n=[],a=0,i=e.length;a<i;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<i?56320==(64512&(s=e.charCodeAt(a++)))?n.push(((1023&t)<<10)+(1023&s)+65536):(n.push(t),a--):n.push(t);return n}function v(e){return g(e,(function(e){var t="";return e>65535&&(t+=m((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=m(e)})).join("")}function f(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function y(e,t,s){var n=0;for(e=s?h(e/700):e>>1,e+=h(e/t);e>455;n+=l)e=h(e/35);return h(n+36*e/(e+38))}function x(e){var t,s,n,a,i,o,c,u,d,p,m,g=[],b=e.length,k=0,f=128,x=72;for((s=e.lastIndexOf("-"))<0&&(s=0),n=0;n<s;++n)e.charCodeAt(n)>=128&&_("not-basic"),g.push(e.charCodeAt(n));for(a=s>0?s+1:0;a<b;){for(i=k,o=1,c=l;a>=b&&_("invalid-input"),((u=(m=e.charCodeAt(a++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:l)>=l||u>h((r-k)/o))&&_("overflow"),k+=u*o,!(u<(d=c<=x?1:c>=x+26?26:c-x));c+=l)o>h(r/(p=l-d))&&_("overflow"),o*=p;x=y(k-i,t=g.length+1,0==i),h(k/t)>r-f&&_("overflow"),f+=h(k/t),k%=t,g.splice(k++,0,f)}return v(g)}function w(e){var t,s,n,a,i,o,c,u,d,p,g,b,v,x,w,C=[];for(b=(e=k(e)).length,t=128,s=0,i=72,o=0;o<b;++o)(g=e[o])<128&&C.push(m(g));for(n=a=C.length,a&&C.push("-");n<b;){for(c=r,o=0;o<b;++o)(g=e[o])>=t&&g<c&&(c=g);for(c-t>h((r-s)/(v=n+1))&&_("overflow"),s+=(c-t)*v,t=c,o=0;o<b;++o)if((g=e[o])<t&&++s>r&&_("overflow"),g==t){for(u=s,d=l;!(u<(p=d<=i?1:d>=i+26?26:d-i));d+=l)w=u-p,x=l-p,C.push(m(f(p+w%x,0))),u=h(w/x);C.push(m(f(u,0))),i=y(s,v,n==a),s=0,++n}++s,++t}return C.join("")}o={version:"1.3.2",ucs2:{decode:k,encode:v},decode:x,encode:w,toASCII:function(e){return b(e,(function(e){return u.test(e)?"xn--"+w(e):e}))},toUnicode:function(e){return b(e,(function(e){return c.test(e)?x(e.slice(4).toLowerCase()):e}))}},void 0===(n=function(){return o}.call(t,s,t,e))||(e.exports=n)}()},883:(e,t,s)=>{"use strict";var n=s(59639),a=s(25225);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.Qc=v;var o=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),d=["%","/","?",";","#"].concat(u),p=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=s(56642);function v(e,t,s){if(e&&a.isObject(e)&&e instanceof i)return e;var n=new i;return n.parse(e,t,s),n}i.prototype.parse=function(e,t,s){if(!a.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),r=-1!==i&&i<e.indexOf("#")?"?":"#",c=e.split(r);c[0]=c[0].replace(/\\/g,"/");var v=e=c.join(r);if(v=v.trim(),!s&&1===e.split("#").length){var f=l.exec(v);if(f)return this.path=v,this.href=v,this.pathname=f[1],f[2]?(this.search=f[2],this.query=t?k.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var y=o.exec(v);if(y){var x=(y=y[0]).toLowerCase();this.protocol=x,v=v.substr(y.length)}if(s||y||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===v.substr(0,2);!w||y&&g[y]||(v=v.substr(2),this.slashes=!0)}if(!g[y]&&(w||y&&!b[y])){for(var C,I,E=-1,S=0;S<p.length;S++){-1!==(Z=v.indexOf(p[S]))&&(-1===E||Z<E)&&(E=Z)}-1!==(I=-1===E?v.lastIndexOf("@"):v.lastIndexOf("@",E))&&(C=v.slice(0,I),v=v.slice(I+1),this.auth=decodeURIComponent(C)),E=-1;for(S=0;S<d.length;S++){var Z;-1!==(Z=v.indexOf(d[S]))&&(-1===E||Z<E)&&(E=Z)}-1===E&&(E=v.length),this.host=v.slice(0,E),v=v.slice(E),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var A=this.hostname.split(/\./),F=(S=0,A.length);S<F;S++){var P=A[S];if(P&&!P.match(h)){for(var N="",B=0,D=P.length;B<D;B++)P.charCodeAt(B)>127?N+="x":N+=P[B];if(!N.match(h)){var L=A.slice(0,S),O=A.slice(S+1),V=P.match(m);V&&(L.push(V[1]),O.unshift(V[2])),O.length&&(v="/"+O.join(".")+v),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=n.toASCII(this.hostname));var R=this.port?":"+this.port:"",M=this.hostname||"";this.host=M+R,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!_[x])for(S=0,F=u.length;S<F;S++){var U=u[S];if(-1!==v.indexOf(U)){var z=encodeURIComponent(U);z===U&&(z=escape(U)),v=v.split(U).join(z)}}var j=v.indexOf("#");-1!==j&&(this.hash=v.substr(j),v=v.slice(0,j));var H=v.indexOf("?");if(-1!==H?(this.search=v.substr(H),this.query=v.substr(H+1),t&&(this.query=k.parse(this.query)),v=v.slice(0,H)):t&&(this.search="",this.query={}),v&&(this.pathname=v),b[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){R=this.pathname||"";var G=this.search||"";this.path=R+G}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",s=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(o=k.stringify(this.query));var r=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||b[t])&&!1!==i?(i="//"+(i||""),s&&"/"!==s.charAt(0)&&(s="/"+s)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),r&&"?"!==r.charAt(0)&&(r="?"+r),t+i+(s=s.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(r=r.replace("#","%23"))+n},i.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(a.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var s=new i,n=Object.keys(this),o=0;o<n.length;o++){var r=n[o];s[r]=this[r]}if(s.hash=e.hash,""===e.href)return s.href=s.format(),s;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(s[u]=e[u])}return b[s.protocol]&&s.hostname&&!s.pathname&&(s.path=s.pathname="/"),s.href=s.format(),s}if(e.protocol&&e.protocol!==s.protocol){if(!b[e.protocol]){for(var d=Object.keys(e),p=0;p<d.length;p++){var h=d[p];s[h]=e[h]}return s.href=s.format(),s}if(s.protocol=e.protocol,e.host||g[e.protocol])s.pathname=e.pathname;else{for(var m=(e.pathname||"").split("/");m.length&&!(e.host=m.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),s.pathname=m.join("/")}if(s.search=e.search,s.query=e.query,s.host=e.host||"",s.auth=e.auth,s.hostname=e.hostname||e.host,s.port=e.port,s.pathname||s.search){var _=s.pathname||"",k=s.search||"";s.path=_+k}return s.slashes=s.slashes||e.slashes,s.href=s.format(),s}var v=s.pathname&&"/"===s.pathname.charAt(0),f=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=f||v||s.host&&e.pathname,x=y,w=s.pathname&&s.pathname.split("/")||[],C=(m=e.pathname&&e.pathname.split("/")||[],s.protocol&&!b[s.protocol]);if(C&&(s.hostname="",s.port=null,s.host&&(""===w[0]?w[0]=s.host:w.unshift(s.host)),s.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host=null),y=y&&(""===m[0]||""===w[0])),f)s.host=e.host||""===e.host?e.host:s.host,s.hostname=e.hostname||""===e.hostname?e.hostname:s.hostname,s.search=e.search,s.query=e.query,w=m;else if(m.length)w||(w=[]),w.pop(),w=w.concat(m),s.search=e.search,s.query=e.query;else if(!a.isNullOrUndefined(e.search)){if(C)s.hostname=s.host=w.shift(),(T=!!(s.host&&s.host.indexOf("@")>0)&&s.host.split("@"))&&(s.auth=T.shift(),s.host=s.hostname=T.shift());return s.search=e.search,s.query=e.query,a.isNull(s.pathname)&&a.isNull(s.search)||(s.path=(s.pathname?s.pathname:"")+(s.search?s.search:"")),s.href=s.format(),s}if(!w.length)return s.pathname=null,s.search?s.path="/"+s.search:s.path=null,s.href=s.format(),s;for(var I=w.slice(-1)[0],E=(s.host||e.host||w.length>1)&&("."===I||".."===I)||""===I,S=0,Z=w.length;Z>=0;Z--)"."===(I=w[Z])?w.splice(Z,1):".."===I?(w.splice(Z,1),S++):S&&(w.splice(Z,1),S--);if(!y&&!x)for(;S--;S)w.unshift("..");!y||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),E&&"/"!==w.join("/").substr(-1)&&w.push("");var T,A=""===w[0]||w[0]&&"/"===w[0].charAt(0);C&&(s.hostname=s.host=A?"":w.length?w.shift():"",(T=!!(s.host&&s.host.indexOf("@")>0)&&s.host.split("@"))&&(s.auth=T.shift(),s.host=s.hostname=T.shift()));return(y=y||s.host&&w.length)&&!A&&w.unshift(""),w.length?s.pathname=w.join("/"):(s.pathname=null,s.path=null),a.isNull(s.pathname)&&a.isNull(s.search)||(s.path=(s.pathname?s.pathname:"")+(s.search?s.search:"")),s.auth=e.auth||s.auth,s.slashes=s.slashes||e.slashes,s.href=s.format(),s},i.prototype.parseHost=function(){var e=this.host,t=r.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},25225:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.Ocf.0be6b6ea.js.map